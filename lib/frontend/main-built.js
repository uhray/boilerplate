/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("bower/almond/almond",function(){}),function(){function r(e,t){if("function"==typeof e)return r("*",e);if("function"==typeof t){var n=new o(e);for(var i=1;i<arguments.length;++i)r.callbacks.push(n.middleware(arguments[i]))}else"string"==typeof e?r.show(e,t):r.start(e)}function i(e){var t=window.location.pathname+window.location.search;if(t==e.canonicalPath)return;r.stop(),e.unhandled=!0,window.location=e.canonicalPath}function s(e,n){"/"==e[0]&&0!=e.indexOf(t)&&(e=t+e);var r=e.indexOf("?");this.canonicalPath=e,this.path=e.replace(t,"")||"/",this.title=document.title,this.state=n||{},this.state.path=e,this.querystring=~r?e.slice(r+1):"",this.pathname=~r?e.slice(0,r):e,this.params=[],this.hash="";if(!~this.path.indexOf("#"))return;var i=this.path.split("#");this.path=i[0],this.hash=i[1]||"",this.querystring=this.querystring.split("#")[0]}function o(e,t){t=t||{},this.path=e,this.method="GET",this.regexp=u(e,this.keys=[],t.sensitive,t.strict)}function u(e,t,n,r){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,r,i,s,o){return t.push({name:i,optional:!!o}),n=n||"",""+(o?"":n)+"(?:"+(o?n:"")+(r||"")+(s||r&&"([^/.]+?)"||"([^/]+?)")+")"+(o||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))}function a(e){if(e.state){var t=e.state.path;r.replace(t,e.state)}}function f(e){if(1!=l(e))return;if(e.metaKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;var n=e.target;while(n&&"A"!=n.nodeName)n=n.parentNode;if(!n||"A"!=n.nodeName)return;var i=n.getAttribute("href");if(!(n.pathname!=location.pathname||!n.hash&&"#"!=i))return;if(n.target)return;if(!c(n.href))return;var s=n.pathname+n.search+(n.hash||""),o=s+n.hash;s=s.replace(t,"");if(t&&o==s)return;e.preventDefault(),r.show(o)}function l(e){return e=e||window.event,null==e.which?e.button:e.which}function c(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),0==e.indexOf(t)}var e=!0,t="",n;r.callbacks=[],r.base=function(e){if(0==arguments.length)return t;t=e},r.start=function(t){t=t||{};if(n)return;n=!0,!1===t.dispatch&&(e=!1),!1!==t.popstate&&window.addEventListener("popstate",a,!1),!1!==t.click&&window.addEventListener("click",f,!1);if(!e)return;var i=location.pathname+location.search+location.hash;r.replace(i,null,!0,e)},r.stop=function(){n=!1,removeEventListener("click",f,!1),removeEventListener("popstate",a,!1)},r.show=function(e,t,n){var i=new s(e,t);return!1!==n&&r.dispatch(i),i.unhandled||i.pushState(),i},r.replace=function(e,t,n,i){var o=new s(e,t);return o.init=n,null==i&&(i=!0),i&&r.dispatch(o),o.save(),o},r.dispatch=function(e){function n(){var s=r.callbacks[t++];if(!s)return i(e);s(e,n)}var t=0;n()},r.Context=s,s.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)},s.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)},r.Route=o,o.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return e(n,r);r()}},o.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,s=this.regexp.exec(i);if(!s)return!1;for(var o=1,u=s.length;o<u;++o){var a=n[o-1],f="string"==typeof s[o]?decodeURIComponent(s[o]):s[o];a?t[a.name]=undefined!==t[a.name]?t[a.name]:f:t.push(f)}return!0},"undefined"==typeof module?window.page=r:module.exports=r}(),n("page",function(e){return function(){var t,n;return t||e.page}}(this)),function(e){var t=e.Ractive,r=function(){var e={el:void 0,append:!1,template:{v:1,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return e}(),i={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},s=[],o=Object.prototype.hasOwnProperty,u=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}(),a=function(){var e=Object.prototype.toString;return function(t){return t&&e.call(t)==="[object Object]"}}(),f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},l=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return!i(e)||!i(t)?null:(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e})},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;r=[],i=[],u=s=Math.min(e.length,t.length);while(u--)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){var t=s;while(t--)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){var t=s,n;while(t--)n=i[t],a[n]=u[n](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return e!==0&&typeof e!="string"||t!==0&&typeof t!="string"?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}},s}(s,o,u,a,f),c=function(){var e;return typeof document=="undefined"?e=!1:e=document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),e}(),h=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},p=function(){function i(e){setTimeout(e,0)}function s(e,t){return function(){var n;while(n=e.shift())n(t)}}function o(t,n,r,i){var s;if(n===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(n instanceof e)n.then(r,i);else if(!n||typeof n!="object"&&typeof n!="function")r(n);else{try{s=n.then}catch(u){i(u);return}if(typeof s=="function"){var a,f,l;f=function(e){if(a)return;a=!0,o(t,e,r,i)},l=function(e){if(a)return;a=!0,i(e)};try{s.call(n,f,l)}catch(u){if(!a){i(u),a=!0;return}}}else r(n)}}var e,t={},n={},r={};return typeof p=="function"?e=p:(e=function(u){var a=[],f=[],l=t,c,h,p,d,v,m;p=function(e){return function(r){if(l!==t)return;c=r,l=e,h=s(l===n?a:f,c),i(h)}},d=p(n),v=p(r);try{u(d,v)}catch(g){v(g)}return m={then:function(n,r){var s=new e(function(e,u){var c=function(t,n,r){typeof t=="function"?n.push(function(n){var r;try{r=t(n),o(s,r,e,u)}catch(i){u(i)}}):n.push(r)};c(n,a,e),c(r,f,u),l!==t&&i(h)});return s}},m["catch"]=function(e){return this.then(null,e)},m},e.all=function(t){return new e(function(e,n){var r=[],i,s,o;if(!t.length){e(r);return}o=function(s){t[s].then(function(t){r[s]=t,--i||e(r)},n)},i=s=t.length;while(s--)o(s)})},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})}),e}(),d=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(n){return(n||"").replace(e,".$1")}}(),v=function(e){do if(e.context)return e.context;while(e=e.parent);return""},m=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},g=function(e,t,n){var r;e.push(function(){return r=e.runloop});var i=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=i,this.otherInstance=n,this.otherKeypath=r,this.bind(),this.value=this.root.viewmodel.get(this.keypath)};return i.prototype={setValue:function(e){var i=this;if(this.updating||this.counterpart&&this.counterpart.updating){this.value=e;return}if(t(e)&&e._ractive&&e._ractive.setting)return;n(e,this.value)||(this.updating=!0,r.addViewmodel(this.otherInstance.viewmodel),this.otherInstance.viewmodel.set(this.otherKeypath,e),this.value=e,r.scheduleTask(function(){return i.updating=!1}))},bind:function(){this.root.viewmodel.register(this.keypath,this)},rebind:function(e){this.unbind(),this.keypath=e,this.counterpart.otherKeypath=e,this.bind()},unbind:function(){this.root.viewmodel.unregister(this.keypath,this)}},function(t,n,r,s){var o,u,a,f,l,c;o=r+"="+s,a=t.bindings;if(a[o])return;a[o]=!0,u=t.instance,f=t.parentFragment.priority,l=new i(n,r,u,s,f),a.push(l),u.twoway&&(c=new i(u,s,n,r,1),a.push(c),l.counterpart=c,c.counterpart=l)}}(s,u,m),y=function(e,t,n){function s(e,t){var n;if(t===".")return e;n=e?e.split("."):[];if(t.substr(0,3)==="../"){while(t.substr(0,3)==="../"){if(!n.length)throw new Error(r);n.pop(),t=t.substring(3)}return n.push(t),n.join(".")}return e?e+t.replace(/^\.\//,"."):t.replace(/^\.\/?/,"")}var r,i;return r='Could not resolve reference - too many "../" prefixes',i={evaluateWrapped:!0},function o(r,u,a){var f,l,c,h,p,d,v,m,g,y;u=e(u);if(u.substr(0,2)==="~/")return u.substring(2);if(u.charAt(0)===".")return s(t(a),u);l=u.split(".")[0];do{f=a.context;if(!f)continue;d=!0,p=r.viewmodel.get(f,i);if(p&&(typeof p=="object"||typeof p=="function")&&l in p)return f+"."+u}while(a=a.parent);if(l in r.data||l in r.viewmodel.computations)return u;if(r._parent&&!r.isolated){a=r.component.parentFragment;if(a.indexRefs&&(c=a.indexRefs[u])!==undefined){r.component.indexRefBindings[u]=u,r.viewmodel.set(u,c,!0);return}h=o(r._parent,u,a);if(h){v=h.split("."),m=u.split(".");while(v.length>1&&m.length>1&&v[v.length-1]===m[m.length-1])v.pop(),m.pop();return g=v.join("."),y=m.join("."),r.viewmodel.set(y,r._parent.viewmodel.get(g),!0),n(r.component,r._parent,g,y),u}}if(!d)return u;if(r.viewmodel.get(u)!==undefined)return u}}(d,v,g),b=function(e){function n(e){e.detach()}function r(e){e.detachNodes()}function i(e){if(!e.ready||e.outros.length||e.outroChildren)return;e.outrosComplete||(e.parent?e.parent.decrementOutros(e):e.detachNodes(),e.outrosComplete=!0),!e.intros.length&&!e.totalChildren&&(typeof e.callback=="function"&&e.callback(),e.parent&&e.parent.decrementTotal())}var t=function(e,t){this.callback=e,this.parent=t,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,t&&t.addChild(this)};return t.prototype={addChild:function(e){this.children.push(e),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,i(this)},decrementTotal:function(){this.totalChildren-=1,i(this)},add:function(e){var t=e.isIntro?this.intros:this.outros;t.push(e)},remove:function(t){var n=t.isIntro?this.intros:this.outros;e(n,t),i(this)},init:function(){this.ready=!0,i(this)},detachNodes:function(){this.detachQueue.forEach(n),this.children.forEach(r)}},t}(h),w=function(e,t,n,r,i){function a(){var e,t,n;for(e=0;e<s.viewmodels.length;e+=1)t=s.viewmodels[e],n=t.applyChanges(),n&&t.ractive.fire("change",n);s.viewmodels.length=0,f();for(e=0;e<s.views.length;e+=1)s.views[e].update();s.views.length=0;for(e=0;e<s.tasks.length;e+=1)s.tasks[e]();s.tasks.length=0;if(s.viewmodels.length)return a()}function f(){var e,t,n;if(!u.length)return;e=u.splice(0,u.length);while(t=e.pop()){if(t.keypath)continue;n=r(t.root,t.ref,t.parentFragment),n!==undefined?t.resolve(n):u.push(t)}}var s,o,u=[];return o={start:function(e,t){var r,o;return t&&(r=new n(function(e){return o=e})),s={previousBatch:s,transitionManager:new i(o,s&&s.transitionManager),views:[],tasks:[],viewmodels:[]},e&&s.viewmodels.push(e.viewmodel),r},end:function(){a(),s.transitionManager.init(),s=s.previousBatch},addViewmodel:function(e){s?s.viewmodels.indexOf(e)===-1&&s.viewmodels.push(e):e.applyChanges()},registerTransition:function(e){e._manager=s.transitionManager,s.transitionManager.add(e)},addView:function(e){s.views.push(e)},addUnresolved:function(e){u.push(e)},removeUnresolved:function(e){t(u,e)},detachWhenReady:function(e){s.transitionManager.detachQueue.push(e)},scheduleTask:function(e){s?s.tasks.push(e):e()}},e.runloop=o,o}(s,h,p,y,b),E=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),S=function(e,t,n){function o(t,n,r){function l(t){var r,i;t.value=n;if(t.updating)return;i=t.ractive,r=t.keypath,t.updating=!0,e.start(i),i.viewmodel.mark(r),e.end(),t.updating=!1}var i,s,o,u,a,f;i=t.obj,s=t.prop;if(r&&!r.configurable){if(s==="length")return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}r&&(o=r.get,u=r.set),a=o||function(){return n},f=function(e){u&&u(e),n=o?o():e,f._ractiveWrappers.forEach(l)},f._ractiveWrappers=[t],Object.defineProperty(i,s,{get:a,set:f,enumerable:!0,configurable:!0})}var r,i;try{Object.defineProperty({},"test",{value:0}),r={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r.viewmodel.wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&(typeof a=="object"||typeof a=="function"))):!1},wrap:function(e,t,n){return new i(e,t,n)}},i=function(e,t,n){var r,i,s,u;this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?e.get(i):e.data,s=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(s&&s.set&&(u=s.set._ractiveWrappers)){u.indexOf(this)===-1&&u.push(this);return}o(this,t,s)},i.prototype={get:function(){return this.value},reset:function(t){if(this.updating)return;this.updating=!0,this.obj[this.prop]=t,e.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath),this.updating=!1},set:function(e,n){if(this.updating)return;this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating)return!1;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set;if(!t)return;r=t._ractiveWrappers,i=r.indexOf(this),i!==-1&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n)}}}catch(s){r=!1}return r}(w,E,u),x=function(e){return!!e}(S),T={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=function(e,t){var n;return e?n=function(e,n){return!n||n===t.html?document.createElement(e):document.createElementNS(n,e)}:n=function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)},n}(c,T),C=function(){var e=typeof document=="object";return e}(),k=function(e){var t;try{Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),t=Object.defineProperty}catch(n){t=function(e,t,n){e[t]=n.value}}return t}(C),L=function(e,t,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}n&&Object.defineProperties(e("div"),{test:{value:0}}),r=Object.defineProperties}catch(i){r=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}return r}(N,k,C),A=function(e){return function(n,r,i){var s;if(typeof r!="string"||!e(i))throw new Error("Bad arguments");s=+n.get(r)||0;if(!e(s))throw new Error("Cannot add to a non-numeric value");return n.set(r,s+i)}}(f),O=function(e){return function(n,r){return e(this,n,r===undefined?1:+r)}}(A),M=function(e){var t=/^\.+/;return function(r){return e(r).replace(t,"")}}(d),_=["o","ms","moz","webkit"],D=function(e){var t;return typeof window=="undefined"?t=null:(function(e,t,n){var r,i;if(n.requestAnimationFrame)return;for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(e,0,window),t=window.requestAnimationFrame),t}(_),P=function(){var e;return typeof window!="undefined"&&window.performance&&typeof window.performance.now=="function"?e=function(){return window.performance.now()}:e=function(){return Date.now()},e}(),H=function(e,t,n){var r=[],i={tick:function(){var s,o,u;u=t(),n.start();for(s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){var n=r.length,i;while(n--)i=r[n],i.root===t&&i.keypath===e&&i.stop()}};return i}(D,P,w),B=function(){var e,t={};return typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function"?e=function(e,n){if(!n){if(t[e])return;t[e]=!0}console.warn(e)}:e=function(){},e}(),j=function(){function s(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function o(e){return e.str}var e=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,t=/\/\*.*?\*\//g,n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,r=/^@media/,i=/\[data-rvcguid="[a-z0-9-]+"]/g;return function(a,f){var l,c;return c=function(e){var t,r,i,s,u,a,l,c,h=[];t=[];while(r=n.exec(e))t.push({str:r[0],base:r[1],modifiers:r[2]});s='[data-rvcguid="'+f+'"]',u=t.map(o),c=t.length;while(c--)l=u.slice(),i=t[c],l[c]=i.base+s+i.modifiers||"",a=u.slice(),a[c]=s+" "+a[c],h.push(l.join(" "),a.join(" "));return h.join(", ")},i.test(a)?l=a.replace(i,'[data-rvcguid="'+f+'"]'):l=a.replace(t,"").replace(e,function(e,t){var n,i;return r.test(t)?e:(n=t.split(",").map(s),i=n.map(c).join(", ")+" ",e.replace(t,i))}),l}}(),F=function(e){function n(e,t,n){var i=t.constructor._guid,s;if(s=r(n.css,n,i)||r(e.css,e,i))t.constructor.css=s}function r(t,n,r){if(!t)return;return n.noCssTransform?t:e(t,r)}var t={name:"css",extend:n,init:function(){}};return t}(j),I=function(){function e(e,t){return typeof t=="function"&&/_super/.test(e)}return function(t,n,r){return r||e(t,n)?function(){var e="_super"in this,r=this._super,i;return this._super=n,i=t.apply(this,arguments),e&&(this._super=r),i}:t}}(),q=function(e){function n(e,t,n){var r=n.data||{},i=o(e.prototype.data);return u(i,r)}function r(e,t,r){t.data=n(e,t,r)}function i(e,t,r){var i=r.data,s=n(e,t,r);return typeof s=="function"&&(s=s.call(t,i)||i),t.data=s||{}}function s(e){var t=this.init(e.constructor,e,e);if(t)return e.data=t,!0}function o(e){if(typeof e!="function"||!Object.keys(e).length)return e;var t={};return a(e,t),u(e,t)}function u(e,t){return typeof t=="function"?c(t,e):typeof e=="function"?l(t,e):f(t,e)}function a(e,t,n){for(var r in e){if(n&&r in t)continue;t[r]=e[r]}}function f(e,t){return e=e||{},t?(a(t,e,!0),e):e}function l(e,t){return function(n){var r;if(e){r=[];for(var i in e)(!n||!(i in n))&&r.push(i)}return n=t.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(t){n[t]=e[t]})),n}}function c(t,n){var r;return typeof n!="function"?r=function(e){f(e,n)}:r=function(t){return n=e(n,function(){},!0),n.call(this,t)||t},e(t,r)}var t={name:"data",extend:r,init:i,reset:s};return t}(I),R={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned'},U=null,z=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return t===null?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),W=null,X=function(){return function(t,n){var r=t.map(n);return t.forEach(function(e,t){r[e]=r[t]}),r}}(W),V=function(e){var t,n;return t=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters"],n=e(t,function(e){return e}),n}(X),$=function(e,t,n,r,i){function o(e){var t=r(s);return t.parse=function(t,n){return u(t,n||e)},t}function u(t,r){if(!n)throw new Error(e.missingParser);return n(t,r||this.options)}function a(e,n){var r;if(!t){if(n&&n.noThrow)return;throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}f(e)&&(e=e.substring(1));if(!(r=document.getElementById(e))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+e)}return r.innerHTML}function f(e){return e.charAt(0)==="#"}function l(e){return typeof e!="string"}function c(e){return e.defaults&&(e=e.defaults),i.reduce(function(t,n){return t[n]=e[n],t},{})}var s={parse:u,fromId:a,isHashedId:f,isParsed:l,getParseOptions:c,createHelper:o};return s}(R,C,U,z,V),J=function(e,t){function r(e){var t=e._config.template,n;if(!t||!t.fn)return;n=i(e,t.fn);if(n!==t.result)return t.result=n,n=s(n,e),n}function i(t,n){var r=e.createHelper(e.getParseOptions(t));return n.call(t,t.data,r)}function s(n,r){if(typeof n=="string")n[0]==="#"&&(n=e.fromId(n)),n=t(n,e.getParseOptions(r));else if(n.v!==1)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return n}function o(e,t,n){if(!t)return;for(var r in t)if(n||!e.hasOwnProperty(r))e[r]=t[r]}var n={name:"template",extend:function(t,n,r){var i;"template"in r&&(i=r.template,typeof i=="function"?n.template=i:n.template=s(i,n))},init:function(t,n,r){var u,a;u="template"in r?r.template:t.prototype.template,typeof u=="function"&&(a=u,u=i(n,a),n._config.template={fn:a,result:u}),u=s(u,n),n.template=u.t,u.p&&o(n.partials,u.p)},reset:function(e){var t=r(e),n;if(t)return n=s(t,e),e.template=n.t,o(e.partials,n.p,!0),!0}};return n}($,U),K=function(e){function t(e,t){this.name=e,this.useDefaults=t}function n(e,t){var r,i;if(r=t(e))return r;if(!e.isolated&&(i=e._parent))return n(i,t)}return t.prototype={constructor:t,extend:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,this.useDefaults?t:t.constructor,n)},init:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,t,n)},configure:function(t,n,r){var i=this.name,s=r[i],o;o=e(t[i]);for(var u in s)o[u]=s[u];n[i]=o},reset:function(e){var t=e[this.name],n=!1;return Object.keys(t).forEach(function(e){var r=t[e];r._fn&&(r._fn.isOwner?t[e]=r._fn:delete t[e],n=!0)}),n},findOwner:function(e,t){return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e.constructor,t)},findConstructor:function(e,t){if(!e)return;return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e._parent,t)},find:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]})},findInstance:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]?e:void 0})}},t}(z,W),Q=function(e,t){var n=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],r=e(n,function(e){return new t(e,e==="computed")});return r}(X,K),G=function(){},Y=function(e){function t(t,n){var r;if(n in t){var i=t[n];typeof i=="function"?r=i:r=function(){return i}}else r=e;return r}return function(n,r,i){if(!/_super/.test(i))return i;var s=function(){var n=t(s._parent,r),o="_super"in this,u=this._super,a;return this._super=n,a=i.apply(this,arguments),o?this._super=u:delete this._super,a};return s._parent=n,s._method=i,s}}(G),Z=function(e,t){function n(t,n,i){if(n in t){if(i in t)throw new Error(r(n,i,!0));e(r(n,i)),t[i]=t[n]}}function r(e,t,n){return"options."+e+" has been deprecated in favour of options."+t+"."+(n?" You cannot specify both options, please use options."+t+".":"")}function i(e){n(e,"eventDefinitions","events")}function s(e){t(e.adaptors)&&n(e,"adaptors","adapt")}return function(t){i(t),s(t)}}(B,u),et=function(e,t,n,r,i,s,o,u){function h(e,t,n,r,i){a[t][e](n,r,i)}function p(e,t,r,i){u(i),h(e,"data",t,r,i),l.parseOptions.forEach(function(e){e in i&&(r[e]=i[e])});for(var s in i)if(s in n&&!(s in l.parseOptions)&&!(s in a)){var f=i[s];r[s]=typeof f=="function"?o(t.prototype,s,f):f}l.registries.forEach(function(n){n[e](t,r,i)}),h(e,"template",t,r,i),h(e,"css",t,r,i)}var a,f,l;a={data:t,template:r,css:e},f=Object.keys(n).filter(function(e){return!s[e]&&!a[e]&&!i[e]}),l=[].concat(a.data,i,f,s,a.template,a.css);for(var c in a)l[c]=a[c];return l.keys=Object.keys(n).concat(s.map(function(e){return e.name})).concat(["css"]),l.parseOptions=i,l.registries=s,l.extend=function(e,t,n){p("extend",e,t,n)},l.init=function(e,t,n){p("init",e,t,n),t._config&&(t._config.options=n)},l.reset=function(e){return l.filter(function(t){return t.reset&&t.reset(e)}).map(function(e){return e.name})},l}(F,q,r,J,V,Q,Y,Z),tt=function(e,t,n,r){function s(e){return function(){return e}}var i=function(e,i,o,u){if(e===i)return s(i);if(u){var a=r.registries.interpolators.find(o,u);if(a)return a(e,i)||s(i);t('Missing "'+u+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,i)||n.array(e,i)||n.object(e,i)||n.cssLength(e,i)||s(i)};return e.interpolate=i,i}(s,B,l,et),nt=function(e,t,n){var r=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return r.prototype={tick:function(){var n,r,i,s,o,u;return u=this.keypath,this.running?(s=Date.now(),n=s-this.startTime,n>=this.duration?(u!==null&&(t.start(this.root),this.root.viewmodel.set(u,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),o=this.root._animations.indexOf(this),o===-1&&e("Animation was not found"),this.root._animations.splice(o,1),this.running=!1,!1):(r=this.easing?this.easing(n/this.duration):n/this.duration,u!==null&&(i=this.interpolator(r),t.start(this.root),this.root.viewmodel.set(u,i),t.end()),this.step&&this.step(r,i),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&e("Animation was not found"),this.root._animations.splice(t,1)}},r}(B,w,tt),rt=function(e,t,n,r,i){function u(t,s,u,a){var f,l,c,h;return s&&(s=n(s)),s!==null&&(h=t.viewmodel.get(s)),r.abort(s,t),e(h,u)?(a.complete&&a.complete(a.to),o):(a.easing&&(typeof a.easing=="function"?f=a.easing:f=t.easing[a.easing],typeof f!="function"&&(f=null)),l=a.duration===undefined?400:a.duration,c=new i({keypath:s,from:h,to:u,root:t,duration:l,easing:f,interpolator:a.interpolator,step:a.step,complete:a.complete}),r.add(c),t._animations.push(c),c)}var s=function(){},o={stop:s};return function(n,r,i){var o,a,f,l,c,h,p,d,v,m,g,y,b,w;o=new t(function(e){a=e});if(typeof n=="object"){i=r||{},h=i.easing,p=i.duration,c=[],d=i.step,v=i.complete;if(d||v)g={},i.step=null,i.complete=null,m=function(e){return function(t,n){g[e]=n}};for(f in n)if(n.hasOwnProperty(f)){if(d||v)y=m(f),i={easing:h,duration:p},d&&(i.step=y);i.complete=v?y:s,c.push(u(this,f,n[f],i))}if(d||v)w={easing:h,duration:p},d&&(w.step=function(e){d(e,g)}),v&&o.then(function(e){v(e,g)}),w.complete=a,b=u(this,null,null,w),c.push(b);return{stop:function(){var e;while(e=c.pop())e.stop();b&&b.stop()}}}return i=i||{},i.complete&&o.then(i.complete),i.complete=a,l=u(this,n,r,i),o.stop=function(){l.stop()},o}}(m,p,M,H,nt),it=function(e){return function(){return this.el&&e(this.el.__ractive_instances__,this),this.fragment.detach()}}(h),st=function(t){return this.el?this.fragment.find(t):null},ot=function(e,t,n){var r,i,s,o,u,a,f,l;if(!e)r=null;else{i=n("div"),s=["matches","matchesSelector"],l=function(e){return function(t,n){return t[e](n)}},a=s.length;while(a--&&!r){o=s[a];if(i[o])r=l(o);else{f=t.length;while(f--){u=t[a]+o.substr(0,1).toUpperCase()+o.substring(1);if(i[u]){r=l(u);break}}}}r||(r=function(e,t){var n,r,s;r=e.parentNode,r||(i.innerHTML="",r=i,e=e.cloneNode(),i.appendChild(e)),n=r.querySelectorAll(t),s=n.length;while(s--)if(n[s]===e)return!0;return!1})}return r}(C,_,N),ut=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r)return this.push(t.node||t.instance),n||this._makeDirty(),!0}}(ot),at=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),n!==-1&&(e.splice(n,1),e[t]=null)},ft=function(){function e(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner}function t(t){var n,r;n=[t],r=e(t);while(r)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];while(s&&s===o)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment;if(c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),lt=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),r&2?1:-1):e(t,n)}}(ft),ct=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(lt,ft),ht=function(e){return function(){var t=this;this._dirty||(this._dirty=!0,e.scheduleTask(function(){t._sort()}))}}(w),pt=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);t!==-1&&this.splice(t,1)},dt=function(e,t,n,r,i,s){return function(u,a,f,l){var c=[];return e(c,{selector:{value:a},live:{value:f},_isComponentQuery:{value:l},_test:{value:t}}),f?(e(c,{cancel:{value:n},_root:{value:u},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),c):c}}(L,ut,at,ct,ht,pt),vt=function(e){return function(n,r){var i,s;return this.el?(r=r||{},i=this._liveQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!1),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAll(n,s),s)):[]}}(dt),mt=function(e){return function(n,r){var i,s;return r=r||{},i=this._liveComponentQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!0),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAllComponents(n,s),s)}}(dt),gt=function(t){return this.fragment.findComponent(t)},yt=function(t){var n,r,i,s=this._subs[t];if(!s)return;n=Array.prototype.slice.call(arguments,1);for(r=0,i=s.length;r<i;r+=1)s[r].apply(this,n)},bt=function(e){var t={capture:!0};return function(r){return r=e(r),this.viewmodel.get(r,t)}}(M),wt=function(t){var n;if(!t||typeof t=="boolean")return;if(typeof window=="undefined"||!document||!t)return null;if(t.nodeType)return t;if(typeof t=="string"){n=document.getElementById(t),!n&&document.querySelector&&(n=document.querySelector(t));if(n&&n.nodeType)return n}return t[0]&&t[0].nodeType?t[0]:null},Et=function(e){return function(n,r){if(!this.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");n=e(n),r=e(r)||null;if(!n)throw new Error("You must specify a valid target to insert into");n.insertBefore(this.detach(),r),this.el=n,(n.__ractive_instances__||(n.__ractive_instances__=[])).push(this)}}(wt),St=function(e,t,n){return function(i,s,o){var u,a;return i=n(i),u=this.viewmodel.get(i),!t(u)||!t(s)?this.set(i,s,o&&o.complete):(a=e.start(this,!0),this.viewmodel.merge(i,u,s,o),e.end(),o&&o.complete&&a.then(o.complete),a)}}(w,u,M),xt=function(e,t){var n=function(e,t,n,r){this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.priority=0,this.context=r&&r.context?r.context:e};return n.prototype={init:function(e){this.value=this.root.viewmodel.get(this.keypath),e!==!1&&this.update()},setValue:function(n){var r=this;t(n,this.value)||(this.value=n,this.defer&&this.ready?e.scheduleTask(function(){return r.update()}):this.update())},update:function(){if(this.updating)return;this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1}},n}(w,m),Tt=function(e){return function(n,r){function u(t,r){var i,s,o;i=n.viewmodel.wrapped[r]?n.viewmodel.wrapped[r].get():n.get(r);for(s in i)i.hasOwnProperty(s)&&(s!=="_ractive"||!e(i))&&(o=r?r+"."+s:s,t.push(o));return t}function a(e){return function(t){return t?t+"."+e:e}}var i,s,o;i=r.split("."),o=[""];while(s=i.shift())s==="*"?o=o.reduce(u,[]):o[0]===""?o[0]=s:o=o.map(a(s));return o}}(u),Nt=function(e){return function(n,r){var i,s;return i=e(n,r),s={},i.forEach(function(e){s[e]=n.get(e)}),s}}(Tt),Ct=function(e,t,n){var r,i=/\*/,s=Array.prototype.slice;return r=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},r.prototype={init:function(e){var t,r;t=n(this.root,this.keypath);if(e!==!1)for(r in t)t.hasOwnProperty(r)&&this.update(r);else this.values=t},update:function(t){var r;if(i.test(t)){r=n(this.root,t);for(t in r)r.hasOwnProperty(t)&&this.update(t);return}if(this.root.viewmodel.implicitChanges[t])return;if(this.defer&&this.ready){e.addObserver(this.getProxy(t));return}this.reallyUpdate(t)},reallyUpdate:function(e){var n,r,i;n=this.root.viewmodel.get(e);if(this.updating){this.values[e]=n;return}this.updating=!0;if(!t(n,this.values[e])||!this.ready)r=s.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r),this.callback.apply(this.context,i),this.values[e]=n;this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},r}(w,m,Nt),kt=function(e,t,n){var r=/\*/,i={};return function(o,u,a,f){var l,c,h;return u=e(u),f=f||i,r.test(u)?(l=new n(o,u,a,f),o.viewmodel.patternObservers.push(l),c=!0):l=new t(o,u,a,f),o.viewmodel.register(u,l,c?"patternObservers":"observers"),l.init(f.init),l.ready=!0,{cancel:function(){var e;if(h)return;c&&(e=o.viewmodel.patternObservers.indexOf(l),o.viewmodel.patternObservers.splice(e,1),o.viewmodel.unregister(u,l,"patternObservers")),o.viewmodel.unregister(u,l,"observers"),h=!0}}}}(M,xt,Ct),Lt=function(e,t){return function(r,i,s){var o,u,a,f;if(e(r)){s=i,u=r,o=[];for(r in u)u.hasOwnProperty(r)&&(i=u[r],o.push(this.observe(r,i,s)));return{cancel:function(){while(o.length)o.pop().cancel()}}}if(typeof r=="function")return s=i,i=r,r="",t(this,r,i,s);a=r.split(" ");if(a.length===1)return t(this,r,i,s);o=[],f=a.length;while(f--)r=a[f],r&&o.push(t(this,r,i,s));return{cancel:function(){while(o.length)o.pop().cancel()}}}}(a,kt),At=function(e){return e.trim()},Ot=function(e){return e!==""},Mt=function(e,t){return function(r,i){var s=this,o;if(!r)for(r in this._subs)delete this._subs[r];else o=r.split(" ").map(e).filter(t),o.forEach(function(e){var t,n;if(t=s._subs[e])i?(n=t.indexOf(i),n!==-1&&t.splice(n,1)):s._subs[e]=[]});return this}}(At,Ot),_t=function(e,t){return function(r,i){var s=this,o=this,u,a,f;if(typeof r=="object"){u=[];for(a in r)r.hasOwnProperty(a)&&u.push(this.on(a,r[a]));return{cancel:function(){var e;while(e=u.pop())e.cancel()}}}return f=r.split(" ").map(e).filter(t),f.forEach(function(e){(s._subs[e]||(s._subs[e]=[])).push(i)}),{cancel:function(){o.off(r,i)}}}}(At,Ot),Dt=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length)return[-1];return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},Pt=function(e,t){var n,r,i,s,o,u;return t?(n=+(t[0]<0?e.length+t[0]:t[0]),s=Math.max(0,t.length-2),o=t[1]!==undefined?t[1]:e.length-n,o=Math.min(o,e.length-n),u=s-o,i=e.length+u,u?r=Math.max(e.length,i):r=n+s,{rangeStart:n,rangeEnd:r,balance:u,added:s,removed:o}):null},Ht=function(e,t,n,r){var i=Array.prototype;return function(s){return function(o){var u=Array.prototype.slice,a=u.call(arguments,1),f,l,c,h;f=this.get(o);if(!e(f))throw new Error("Called ractive."+s+"('"+o+"'), but '"+o+"' does not refer to an array");return l=n(f,s,a),c=r(f,l),i[s].apply(f,a),h=t.start(this,!0),c?this.viewmodel.splice(o,c):this.viewmodel.mark(o),t.end(),h}}}(u,w,Dt,Pt),Bt=function(e){return e("pop")}(Ht),jt=function(e){return e("push")}(Ht),Ft=function(e,t,n){var r,i,s,o,u,a,f,l="/* Ractive.js component styles */\n",c={},h=[];return t?(e.push(function(){s=e.runloop}),o=document.createElement("style"),o.type="text/css",u=document.getElementsByTagName("head")[0],f=!1,a=o.styleSheet,i=function(){var e;h.length?(e=l+h.join(" "),a?a.cssText=e:o.innerHTML=e,f||(u.appendChild(o),f=!0)):f&&(u.removeChild(o),f=!1)},r={add:function(e){if(!e.css)return;c[e._guid]||(c[e._guid]=0,h.push(e.css),s.scheduleTask(i)),c[e._guid]+=1},remove:function(e){if(!e.css)return;c[e._guid]-=1,c[e._guid]||(n(h,e.css),s.scheduleTask(i))}}):r=null,r}(s,C,h),It=function(e,t,n){function s(e){e.init&&e.init(e._config.options),o(e).forEach(s),r[e._guid]=null}function o(e){return r[e._guid]||(r[e._guid]=[])}var r={},i={};return function(u,a){var f=this,l,c;i[this._guid]=!0,l=e.start(this,!0);if(this.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return u=n(u)||this.el,a=n(a)||this.anchor,this.el=u,this.anchor=a,this.constructor.css&&t.add(this.constructor),u&&((c=u.__ractive_instances__)?c.push(this):u.__ractive_instances__=[this],a?u.insertBefore(this.fragment.render(),a):u.appendChild(this.fragment.render())),this._hasInited||(this._hasInited=!0,!this._parent||!i[this._parent._guid]?s(this):o(this._parent).push(this)),i[this._guid]=!1,e.end(),this.rendered=!0,this.complete&&l.then(function(){return f.complete()}),l}}(w,Ft,wt),qt=function(){this.dirtyValue=this.dirtyArgs=!0,this.inited&&this.owner.bubble&&this.owner.bubble()},Rt=function(){var t;return this.items.length===1?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.detach())}),t)},Ut=function(t){var n,r,i,s;if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.find&&(s=i.find(t)))return s}return null}},zt=function(t,n){var r,i,s;if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAll&&s.findAll(t,n)}return n},Wt=function(t,n){var r,i,s;if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAllComponents&&s.findAllComponents(t,n)}return n},Xt=function(t){var n,r,i,s;if(this.items){n=this.items.length;for(r=0;r<n;r+=1){i=this.items[r];if(i.findComponent&&(s=i.findComponent(t)))return s}return null}},Vt=function(t){var n=t.index,r;return this.items[n+1]?r=this.items[n+1].firstNode():this.owner===this.root?this.owner.component?r=this.owner.component.findNextNode():r=null:r=this.owner.findNextNode(this),r},$t=function(){return this.items&&this.items[0]?this.items[0].firstNode():null},Jt=function(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.el},Kt={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},Qt={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},Gt=function(e){var t=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(Kt),Yt=function(e){return function(t){var n=t.remaining();return n.substr(0,4)==="true"?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):n.substr(0,5)==="false"?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(Kt),Zt=function(){var e,t,n;return e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,t=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var s,o,u,a;s=i.pos,o='"',u=!1;while(!u)a=i.matchPattern(e)||i.matchPattern(t)||i.matchString(r),a?a==='"'?o+='\\"':a==="\\'"?o+="'":o+=a:(a=i.matchPattern(n),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(),en=function(e){return e('"')}(Zt),tn=function(e){return e("'")}(Zt),nn=function(e,t,n){return function(r){var i,s;return i=r.pos,r.matchString('"')?(s=n(r),r.matchString('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.matchString("'")?(s=t(r),r.matchString("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(Kt,en,tn),rn={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},sn=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;if(s=e(i))return r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"';if(s=t(i))return s.v;if(s=i.matchPattern(n.name))return s}}(nn,Gt,rn),on=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),i===null?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),s=n.readExpression(),s===null?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(Kt,sn),un=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),s===null?null:(i=[s],n.matchString(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(on),an=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=t(n),n.allowWhitespace(),n.matchString("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(Kt,un),fn=function(e){return function t(n){function u(e){i.push(e)}var r,i,s,o;return r=n.pos,n.allowWhitespace(),s=n.readExpression(),s===null?null:(i=[s],n.allowWhitespace(),n.matchString(",")&&(o=t(n),o===null&&n.error(e.expectedExpression),o.forEach(u)),i)}}(Qt),ln=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=t(n),n.matchString("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(Kt,fn),cn=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(Gt,Yt,nn,an,ln),hn=function(e,t){var n,r,i,s,o;return n=/^\.[a-zA-Z_$0-9]+/,i=function(e){var t=e.matchPattern(r);return t?"."+t:null},r=/^\[(0|[1-9][0-9]*)\]/,s=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,o=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,function(r){var u,a,f,l,c,h,p;u=r.pos;if(r.matchString("~/"))a="~/";else{a="";while(r.matchString("../"))a+="../"}a||(l=r.matchString(".")||""),f=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(t.name)||"";if(o.test(f))return r.pos=u,null;if(!a&&!l&&s.test(f))return{t:e.GLOBAL,v:f};c=(a||l)+f;if(!c)return null;while(h=r.matchPattern(n)||i(r))c+=h;return r.matchString("(")&&(p=c.lastIndexOf("."),p!==-1?(c=c.substr(0,p),r.pos=u+c.length):r.pos-=1),{t:e.REFERENCE,n:c.replace(/^this\./,"./").replace(/^this$/,".")}}}(Kt,rn),pn=function(e,t){return function(n){var r,i;return r=n.pos,n.matchString("(")?(n.allowWhitespace(),i=n.readExpression(),i||n.error(t.expectedExpression),n.allowWhitespace(),n.matchString(")")||n.error(t.expectedParen),{t:e.BRACKETED,x:i}):null}}(Kt,Qt),dn=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(cn,hn,pn),vn=function(e,t,n){return function(i){var s,o,u;s=i.pos,i.allowWhitespace();if(i.matchString(".")){i.allowWhitespace();if(o=i.matchPattern(n.name))return{t:e.REFINEMENT,n:o};i.error("Expected a property name")}return i.matchString("[")?(i.allowWhitespace(),u=i.readExpression(),u||i.error(t.expectedExpression),i.allowWhitespace(),i.matchString("]")||i.error("Expected ']'"),{t:e.REFINEMENT,x:u}):null}}(Kt,Qt,rn),mn=function(e,t,n,r,i){return function(s){var o,u,a,f;u=t(s);if(!u)return null;while(u){o=s.pos;if(a=r(s))u={t:e.MEMBER,x:u,r:a};else{if(!s.matchString("("))break;s.allowWhitespace(),f=n(s),s.allowWhitespace(),s.matchString(")")||s.error(i.expectedParen),u={t:e.INVOCATION,x:u},f&&(u.o=f)}}return u}}(Kt,dn,fn,vn,Qt),gn=function(e,t,n){var r,i;return i=function(n,r){return function(i){var s;return(s=r(i))?s:i.matchString(n)?(i.allowWhitespace(),s=i.readExpression(),s||i.error(t.expectedExpression),{s:n,o:s,t:e.PREFIX_OPERATOR}):null}},function(){var e,t,s,o,u;o="! ~ + - typeof".split(" "),u=n;for(e=0,t=o.length;e<t;e+=1)s=i(o[e],u),u=s;r=u}(),r}(Kt,Qt,mn),yn=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;s=n(r);if(!s)return null;for(;;){i=r.pos,r.allowWhitespace();if(!r.matchString(t))return r.pos=i,s;if(t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,s;r.allowWhitespace(),o=n(r);if(!o)return r.pos=i,s;s={t:e.INFIX_OPERATOR,s:t,o:[s,o]}}}},function(){var e,i,s,o,u;o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t;for(e=0,i=o.length;e<i;e+=1)s=r(o[e],u),u=s;n=u}(),n}(Kt,gn),bn=function(e,t,n){return function(r){var i,s,o,u;return s=t(r),s?(i=r.pos,r.allowWhitespace(),r.matchString("?")?(r.allowWhitespace(),o=r.readExpression(),o||r.error(n.expectedExpression),r.allowWhitespace(),r.matchString(":")||r.error('Expected ":"'),r.allowWhitespace(),u=r.readExpression(),u||r.error(n.expectedExpression),{t:e.CONDITIONAL,o:[s,o,u]}):(r.pos=i,s)):null}}(Kt,yn,Qt),wn=function(e,t){function n(e){return JSON.stringify(String(e))}function r(n,i){var s,o;n.t===e.REFERENCE&&i.indexOf(n.n)===-1&&i.unshift(n.n),o=n.o||n.m;if(o)if(t(o))r(o,i);else{s=o.length;while(s--)r(o[s],i)}n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(t,r,s){var o=function(e){return i(t,e,s)};switch(r.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return r.v;case e.STRING_LITERAL:return n(r.v);case e.ARRAY_LITERAL:return"["+(r.m?r.m.map(o).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(r.m?r.m.map(o).join(","):"")+"}";case e.KEY_VALUE_PAIR:return r.k+":"+i(t,r.v,s);case e.PREFIX_OPERATOR:return(r.s==="typeof"?"typeof ":r.s)+i(t,r.o,s);case e.INFIX_OPERATOR:return i(t,r.o[0],s)+(r.s.substr(0,2)==="in"?" "+r.s+" ":r.s)+i(t,r.o[1],s);case e.INVOCATION:return i(t,r.x,s)+"("+(r.o?r.o.map(o).join(","):"")+")";case e.BRACKETED:return"("+i(t,r.x,s)+")";case e.MEMBER:return i(t,r.x,s)+i(t,r.r,s);case e.REFINEMENT:return r.n?"."+r.n:"["+i(t,r.x,s)+"]";case e.CONDITIONAL:return i(t,r.o[0],s)+"?"+i(t,r.o[1],s)+":"+i(t,r.o[2],s);case e.REFERENCE:return"${"+s.indexOf(r.n)+"}";default:t.error("Expected legal JavaScript")}}return function(e){var t=[],n;return r(e,t),n={r:t,s:i(this,e,t)},n}}(Kt,a),En=function(e,t,n,r,i){var s,o,u=/^\s+/;return o=function(e){this.name="ParseError",this.message=e;try{throw new Error(e)}catch(t){this.stack=t.stack}},o.prototype=Error.prototype,s=function(e,t){var n,r;this.str=e,this.options=t||{},this.pos=0,this.init&&this.init(e,t),n=[];while(this.pos<this.str.length&&(r=this.read()))n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},s.prototype={read:function(e){var t,n,r,i;e||(e=this.converters),t=this.pos,r=e.length;for(n=0;n<r;n+=1){this.pos=t;if(i=e[n](this))return i}return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(){var e,t,n,r,i,s;e=this.str.split("\n"),i=-1,r=0;do n=r,i++,t=e[i],r+=t.length+1;while(r<=this.pos);return s=this.pos-n,{line:i+1,ch:s+1,text:t,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(e){var t,n;throw t=this.getLinePos(),n=e+" at "+t,new o(n)},matchString:function(e){if(this.str.substr(this.pos,e.length)===e)return this.pos+=e.length,e},matchPattern:function(e){var t;if(t=e.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},allowWhitespace:function(){this.matchPattern(u)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},s.extend=function(e){var r=this,i,o;i=function(e,t){s.call(this,e,t)},i.prototype=t(r.prototype);for(o in e)n.call(e,o)&&(i.prototype[o]=e[o]);return i.extend=s.extend,i},e.Parser=s,s}(s,z,o,bn,wn),Sn=function(e,t,n){function l(e){var t,r,i;return e.allowWhitespace(),t=n(e),t?(i={key:t},e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),r=e.read(),r?(i.value=r.v,i):null):null):null}var r,i,s,o,u,a,f;return i={"true":!0,"false":!1,"undefined":undefined,"null":null},s=new RegExp("^(?:"+Object.keys(i).join("|")+")"),o=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,u=/\$\{([^\}]+)\}/g,a=/^\$\{([^\}]+)\}/,f=/^\s*$/,r=e.extend({init:function(e,t){this.values=t.values},postProcess:function(e){return e.length!==1||!f.test(this.leftover)?null:{value:e[0].v}},converters:[function(t){var n;if(!t.values)return null;n=t.matchPattern(a);if(n&&t.values.hasOwnProperty(n))return{v:t.values[n]}},function(t){var n;if(n=t.matchPattern(s))return{v:i[n]}},function(t){var n;if(n=t.matchPattern(o))return{v:+n}},function(n){var r=t(n),i;return r&&(i=n.values)?{v:r.v.replace(u,function(e,t){return t in i?i[t]:t})}:r},function(t){var n,r;if(!t.matchString("{"))return null;n={},t.allowWhitespace();if(t.matchString("}"))return{v:n};while(r=l(t)){n[r.key]=r.value,t.allowWhitespace();if(t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){var n,r;if(!t.matchString("["))return null;n=[],t.allowWhitespace();if(t.matchString("]"))return{v:n};while(r=t.read()){n.push(r.v),t.allowWhitespace();if(t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),function(e,t){var n=new r(e,{values:t});return n.result}}(En,nn,sn),xn=function(e){function n(e,t,r,i){return i=i||0,e.map(function(e){var s,o,u;return e.text?e.text:e.fragments?e.fragments.map(function(e){return n(e.items,t,r,i)}).join(""):(s=r+"-"+i++,(o=e.root.viewmodel.wrapped[e.keypath])?u=o.value:u=e.getValue(),t[s]=u,"${"+s+"}")}).join("")}var t={};return function(){var i=arguments[0];i===void 0&&(i=t);var s,o,u,a,f,l,c;return s=i.args,f=s?"argsList":"value",l=s?"dirtyArgs":"dirtyValue",this[l]&&(u=n(this.items,o={},this.root._guid),a=e(s?"["+u+"]":u,o),a?c=a.value:c=s?[this.toString()]:this.toString(),this[f]=c,this[l]=!1),this[f]}}(Sn),Tn=function(){var e=/</g,t=/>/g;return function(r){return r.replace(e,"&lt;").replace(t,"&gt;")}}(),Nn=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t},Cn=function(e){return function(){return e(this.node)}}(Nn),kn=function(e,t,n){var r=function(t){this.type=e.TEXT,this.text=t.template};return r.prototype={detach:n,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(e){return e?t(this.text):this.text},unrender:function(e){if(e)return this.detach()}},r}(Kt,Tn,Cn),Ln=function(e){return function(){this.keypath?this.root.viewmodel.unregister(this.keypath,this):e.removeUnresolved(this),this.resolver&&this.resolver.teardown()}}(w),An=function(){return this.value},On=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(w),Mn=function(t,n){return t.substr(0,n.length+1)===n+"."},_n=function(e){return function(n,r,i){if(n===r)return i;if(e(n,r))return n.replace(r+".",i+".")}}(Mn),Dn=function(e,t){function r(e){var n=t[e.message]||e.message||"";return i(n,e.args)}function i(e,t){return e.replace(/{([^{}]*)}/g,function(e,n){return t[n]})}var n={warn:function(e,t){if(!e.debug&&!t)return;this.logger(r(e),e.allowDuplicates)},error:function(e){this.errorOnly(e),e.debug||this.warn(e,!0)},errorOnly:function(e){e.debug&&this.critical(e)},critical:function(e){var t=e.err||new Error(r(e));this.thrower(t)},logger:e,thrower:function(e){throw e}};return n}(B,R),Pn=function(t,n,r){var i,s;i=n.length;while(i--)s=n[i],r.indexOf(s)===-1&&t.viewmodel.unregister(s,t,"computed");i=r.length;while(i--)s=r[i],n.indexOf(s)===-1&&t.viewmodel.register(s,t,"computed");t.dependencies=r.slice()},Hn=function(e,t,n,r){function o(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(s[e])return s[e];r=[];while(t--)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),s[e]=n,n}function u(e,t){var r,i;return e._noWrap?e:(i="__ractive_"+t._guid,r=e[i],r?r:/this/.test(e.toString())?(n(e,i,{value:e.bind(t)}),e[i]):(n(e,"__ractive_nowrap",{value:e}),e.__ractive_nowrap))}function a(e){return typeof e=="function"?e():e}var i,s={};return i=function(e,t,n,r,i,s){var a=this,f=e.viewmodel;a.root=e,a.viewmodel=f,a.uniqueString=n,a.keypath=t,a.priority=s,a.fn=o(r,i.length),a.explicitDependencies=[],a.dependencies=[],a.argumentGetters=i.map(function(t){var n,r;return t?t.indexRef?(r=t.value,r):(n=t.keypath,a.explicitDependencies.push(n),f.register(n,a,"computed"),function(){var t=f.get(n);return typeof t=="function"?u(t,e):t}):void 0})},i.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1},getValue:function(){var t,n,i;t=this.argumentGetters.map(a);if(this.updating)return;this.updating=!0,this.viewmodel.capture();try{n=this.fn.apply(null,t)}catch(s){this.root.debug&&e.warn({debug:this.root.debug,message:"evaluationError",args:{uniqueString:this.uniqueString,err:s.message||s}}),n=undefined}return i=this.viewmodel.release(),r(this,this.dependencies,i),this.updating=!1,n},update:function(){var e=this.getValue();return t(e,this.value)||(this.value=e,this.root.viewmodel.mark(this.keypath)),this},teardown:function(){var e=this;this.explicitDependencies.concat(this.dependencies).forEach(function(t){return e.viewmodel.unregister(t,e,"computed")}),this.root.viewmodel.evaluators[this.keypath]=null}},i}(Dn,m,k,Pn),Bn=function(e,t,n,r,i){function o(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){var r=t[n];return r?r.indexRef?r.value:r.keypath:"undefined"})}function u(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var s=function(r,i,s,o){var u=this,a,f,l;a=r.root,this.root=a,this.callback=o,this.owner=r,this.str=s.s,this.args=l=[],this.unresolved=[],this.pending=0,f=i.indexRefs;if(!s.r||!s.r.length){this.resolved=this.ready=!0,this.bubble();return}s.r.forEach(function(r,s){var o,c,h;if(f&&(o=f[r])!==undefined){l[s]={indexRef:r,value:o};return}if(c=t(a,r,i)){l[s]={keypath:c};return}l[s]=null,u.pending+=1,h=new n(a,r,i,function(t){u.resolve(s,t),e(u.unresolved,h)}),u.unresolved.push(h)}),this.ready=!0,this.bubble()};return s.prototype={bubble:function(){if(!this.ready)return;this.uniqueString=o(this.str,this.args),this.keypath=u(this.uniqueString),this.createEvaluator(),this.callback(this.keypath)},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e=this.root.viewmodel.evaluators[this.keypath];e||(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=e),e.update()},rebind:function(e,t,n,r){var s;this.args.forEach(function(o){var u;if(!o)return;o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef&&o.indexRef===e&&(o.value=t,s=!0)}),s&&this.bubble()}},s}(h,y,On,Hn,_n),jn=function(e,t,n,r,i){var s=function(r,s,o){var u=this,a,f,l,c,h;u.resolver=s,u.root=s.root,u.viewmodel=s.root.viewmodel,typeof r=="string"?u.value=r:r.t===e.REFERENCE?(a=u.ref=r.n,(f=o.indexRefs)&&(l=f[a])!==undefined?(u.indexRef=a,u.value=l):(c=s.root,(h=t(c,a,o))?u.resolve(h):u.unresolved=new n(c,a,o,function(e){u.unresolved=null,u.resolve(e)}))):new i(s,o,r,function(e){u.resolve(e)})};return s.prototype={resolve:function(e){this.keypath=e,this.value=this.viewmodel.get(e),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(e,t,n,i){var s;if(e&&this.indexRef===e){if(t!==this.value)return this.value=t,!0}else if(this.keypath&&(s=r(this.keypath,n,i)))return this.unbind(),this.keypath=s,this.value=this.root.viewmodel.get(s),this.bind(),!0},setValue:function(e){this.value=e,this.resolver.bubble()},unbind:function(){this.keypath&&this.root.viewmodel.unregister(this.keypath,this)},teardown:function(){this.unbind(),this.unresolved&&this.unresolved.teardown()},forceResolution:function(){this.unresolved&&(this.unresolved.teardown(),this.unresolved=null,this.keypath=this.ref,this.value=this.viewmodel.get(this.ref),this.bind())}},s}(Kt,y,On,_n,Bn),Fn=function(e,t,n){function i(e){return e.value}function s(e){return e!=undefined}function o(e){e.unbind()}var r=function(r,i,s){var o=this,u=this,a,f,l,c;c=r.parentFragment,u.root=a=r.root,u.mustache=r,u.priority=r.priority,u.ref=f=i.r,u.callback=s,u.unresolved=[],(l=e(a,f,c))?u.base=l:u.baseResolver=new t(a,f,c,function(e){u.base=e,u.baseResolver=null,u.bubble()}),u.members=i.m.map(function(e){return new n(e,o,c)}),u.ready=!0,u.bubble()};return r.prototype={getKeypath:function(){var e=this.members.map(i);if(!e.every(s)||this.baseResolver)return;return this.base+"."+e.join(".")},bubble:function(){if(!this.ready||this.baseResolver)return;this.callback(this.getKeypath())},teardown:function(){this.members.forEach(o)},rebind:function(e,t,n,r){var i;this.members.forEach(function(s){s.rebind(e,t,n,r)&&(i=!0)}),i&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.teardown(),this.baseResolver=null),this.members.forEach(function(e){return e.forceResolution()}),this.bubble()}},r}(y,On,jn),In=function(e,t,n,r,i){return function(o,u){function d(e){var t=o.keypath;e!==t&&(o.resolve(e),t!==undefined&&o.fragments&&o.fragments.forEach(function(n){n.rebind(null,null,t,e)}))}var a,f,l,c,h,p;h=u.parentFragment,p=u.template,o.root=h.root,o.parentFragment=h,o.pElement=h.pElement,o.template=u.template,o.index=u.index||0,o.priority=h.priority,o.isStatic=u.template.s,o.type=u.template.t;if(a=p.r){l=h.indexRefs;if(l&&(c=l[a])!==undefined){o.indexRef=a,o.setValue(c);return}f=n(o.root,a,o.parentFragment),f!==undefined?o.resolve(f):(o.ref=a,t.addUnresolved(o))}u.template.x&&(o.resolver=new i(o,h,u.template.x,d)),u.template.rx&&(o.resolver=new r(o,u.template.rx,d)),o.template.n===e.SECTION_UNLESS&&!o.hasOwnProperty("value")&&o.setValue(undefined)}}(Kt,w,y,Fn,Bn),qn=function(t){var n,r,i;this.keypath!==undefined&&(this.root.viewmodel.unregister(this.keypath,this),n=!0),this.keypath=t,t!==undefined&&(r=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this)),this.setValue(r),n&&(i=this.twowayBinding)&&i.rebound()},Rn=function(e){return function(n,r,i,s){var o;this.fragments&&this.fragments.forEach(function(e){return e.rebind(n,r,i,s)}),this.resolver&&this.resolver.rebind(n,r,i,s),this.keypath?(o=e(this.keypath,i,s))&&this.resolve(o):n!==undefined&&this.indexRef===n&&this.setValue(r)}}(_n),Un=function(e,t,n,r){return{getValue:e,init:t,resolve:n,rebind:r}}(An,In,qn,Rn),zn=function(e,t,n,r,i,s,o){var u=function(t){this.type=e.INTERPOLATOR,s.init(this,t)};return u.prototype={update:function(){this.node.data=this.value==undefined?"":this.value},resolve:s.resolve,rebind:s.rebind,detach:o,unbind:i,render:function(){return this.node||(this.node=document.createTextNode(this.value!=undefined?this.value:"")),this.node},unrender:function(e){e&&r(this.node)},getValue:s.getValue,setValue:function(e){var n;if(n=this.root.viewmodel.wrapped[this.keypath])e=n.get();e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.node&&t.addView(this))},firstNode:function(){return this.node},toString:function(e){var t=this.value!=undefined?""+this.value:"";return e?n(t):t}},u}(Kt,w,Tn,Nn,Ln,Un,Cn),Wn=function(){this.parentFragment.bubble()},Xn=function(){var t;return this.fragments.length===1?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)},Vn=function(t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].find(t))return i;return null},$n=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAll(t,n)},Jn=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAllComponents(t,n)},Kn=function(t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].findComponent(t))return i;return null},Qn=function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},Gn=function(){var t,n,r;if(t=this.fragments.length)for(n=0;n<t;n+=1)if(r=this.fragments[n].firstNode())return r;return this.parentFragment.findNextNode(this)},Yn=function(e,t){var n;return t.push(function(){n=t.Fragment}),function(n){var r=this,i,s,o,u,a,f,l,c;if(this.unbound)return;i=this.parentFragment,a=[],n.forEach(function(t,n){var i,o,u,f;if(t===n){a[t]=r.fragments[n];return}i=r.fragments[n],s===undefined&&(s=n);if(t===-1){r.fragmentsToUnrender.push(i),i.unbind();return}o=t-n,u=r.keypath+"."+n,f=r.keypath+"."+t,i.rebind(r.template.i,t,u,f),a[t]=i}),u=this.root.get(this.keypath).length;if(s===undefined){if(this.length===u)return;s=this.length}this.length=this.fragments.length=u,e.addView(this),f={template:this.template.f,root:this.root,owner:this},this.template.i&&(f.indexRef=this.template.i);for(o=s;o<u;o+=1)(l=a[o])?this.docFrag.appendChild(l.detach(!1)):this.fragmentsToCreate.push(o),this.fragments[o]=l;c=i.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,c)}}(w,s),Zn=function(){var t;return t=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,t},er=function(e,t,n,r,i){function o(r,i){var s={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.subtype)switch(r.subtype){case e.SECTION_IF:return l(r,i,!1,s);case e.SECTION_UNLESS:return l(r,i,!0,s);case e.SECTION_WITH:return f(r,s);case e.SECTION_EACH:if(n(i))return a(r,i,s)}return r.ordered=!!t(i),r.ordered?u(r,i,s):n(i)||typeof i=="function"?r.template.i?a(r,i,s):f(r,s):l(r,i,!1,s)}function u(e,t,n){var r,i,o;i=t.length;if(i===e.length)return!1;if(i<e.length)e.fragmentsToUnrender=e.fragments.splice(i,e.length-i),e.fragmentsToUnrender.forEach(c);else if(i>e.length)for(r=e.length;r<i;r+=1)n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),o=new s(n),e.fragmentsToRender.push(e.fragments[r]=o);return e.length=i,!0}function a(e,t,n){var r,i,o,u,a;o=e.hasKey||(e.hasKey={}),i=e.fragments.length;while(i--)u=e.fragments[i],u.index in t||(a=!0,u.unbind(),e.fragmentsToUnrender.push(u),e.fragments.splice(i,1),o[u.index]=!1);for(r in t)o[r]||(a=!0,n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),u=new s(n),e.fragmentsToRender.push(u),e.fragments.push(u),o[r]=!0);return e.length=e.fragments.length,a}function f(e,t){var n;if(!e.length)return t.context=e.keypath,t.index=0,n=new s(t),e.fragmentsToRender.push(e.fragments[0]=n),e.length=1,!0}function l(e,n,r,i){var o,u,a;u=t(n)&&n.length===0,r?o=u||!n:o=n&&!u;if(o){if(!e.length)return i.index=0,a=new s(i),e.fragmentsToRender.push(e.fragments[0]=a),e.length=1,!0;if(e.length>1)return e.fragmentsToUnrender=e.fragments.splice(1),e.fragmentsToUnrender.forEach(c),!0}else if(e.length)return e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length),e.fragmentsToUnrender.forEach(c),e.length=0,!0}function c(e){e.unbind()}var s;return i.push(function(){s=i.Fragment}),function(t){var n=this,i,u;if(this.updating)return;this.updating=!0;if(i=this.root.viewmodel.wrapped[this.keypath])t=i.get();this.fragmentsToCreate.length?(u={template:this.template.f,root:this.root,pElement:this.pElement,owner:this,indexRef:this.template.i},this.fragmentsToCreate.forEach(function(e){var t;u.context=n.keypath+"."+e,u.index=e,t=new s(u),n.fragmentsToRender.push(n.fragments[e]=t)}),this.fragmentsToCreate.length=0):o(this,t)&&(this.bubble(),this.rendered&&r.addView(this)),this.value=t,this.updating=!1}}(Kt,u,a,w,s),tr=function(e,t){function r(e){e.unbind()}function i(e,t){var n=[],r;for(r=e;r<t;r+=1)n.push(r);return n}function s(e,t,n,r){var i,s,o,u,a;o=e.template.i;for(i=t;i<n;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.rebind(o,i,u,a)}var n;return t.push(function(){n=t.Fragment}),function(n){var o=this,u,a,f,l,c;if(this.unbound)return;u=n.balance;if(!u)return;e.addView(o),a=n.rangeStart,o.length+=u;if(u<0){o.fragmentsToUnrender=o.fragments.splice(a,-u),o.fragmentsToUnrender.forEach(r),s(o,a,o.length,u);return}f=a+n.removed,l=a+n.added,c=[f,0],c.length+=u,o.fragments.splice.apply(o.fragments,c),s(o,l,o.length,u),o.fragmentsToCreate=i(f,l)}}(w,s),nr=function(t){var n,r,i;n="",r=0,i=this.length;for(r=0;r<i;r+=1)n+=this.fragments[r].toString(t);return n},rr=function(e){function t(e){e.unbind()}return function(){this.fragments.forEach(t),e.call(this),this.length=0,this.unbound=!0}}(Ln),ir=function(){function e(e){e.unrender(!0)}function t(e){e.unrender(!1)}return function(r){this.fragments.forEach(r?e:t)}}(),sr=function(){var t,n,r,i,s;while(t=this.fragmentsToUnrender.pop())t.unrender(!0);if(!this.fragmentsToRender.length)return;this.rendered&&(s=this.parentFragment.getNode());while(t=this.fragmentsToRender.shift())n=t.render(),this.docFrag.appendChild(n),this.rendered&&this.ordered&&(r=this.fragments[t.index+1],r&&r.rendered&&s.insertBefore(this.docFrag,r.firstNode()||null));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),s.insertBefore(this.docFrag,i))},or=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(n){this.type=e.SECTION,this.subtype=n.template.n,this.inverted=this.subtype===e.SECTION_UNLESS,this.pElement=n.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],this.length=0,t.init(this,n)};return y.prototype={bubble:n,detach:r,find:i,findAll:s,findAllComponents:o,findComponent:u,findNextNode:a,firstNode:f,getValue:t.getValue,merge:l,rebind:t.rebind,render:c,resolve:t.resolve,setValue:h,splice:p,toString:d,unbind:v,unrender:m,update:g},y}(Kt,Un,Wn,Xn,Vn,$n,Jn,Kn,Qn,Gn,Yn,Zn,er,tr,nr,rr,ir,sr),ur=function(){var t,n;if(this.docFrag){t=this.nodes.length;for(n=0;n<t;n+=1)this.docFrag.appendChild(this.nodes[n]);return this.docFrag}},ar=function(e){return function(n){var r,i,s,o;i=this.nodes.length;for(r=0;r<i;r+=1){s=this.nodes[r];if(s.nodeType!==1)continue;if(e(s,n))return s;if(o=s.querySelector(n))return o}return null}}(ot),fr=function(e){return function(n,r){var i,s,o,u,a,f;s=this.nodes.length;for(i=0;i<s;i+=1){o=this.nodes[i];if(o.nodeType!==1)continue;e(o,n)&&r.push(o);if(u=o.querySelectorAll(n)){a=u.length;for(f=0;f<a;f+=1)r.push(u[f])}}}}(ot),lr=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},cr=function(e,t){function o(e){return n[e]||(n[e]=t(e))}var n={},r,i;try{t("table").innerHTML="foo"}catch(s){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,n,s){var u,a=[],f,l,c,h;if(t){r&&(f=i[n.tagName])?(u=o("DIV"),u.innerHTML=f[0]+t+f[1],u=u.querySelector(".x"),u.tagName==="SELECT"&&(l=u.options[u.selectedIndex])):n.namespaceURI===e.svg?(u=o("DIV"),u.innerHTML='<svg class="x">'+t+"</svg>",u=u.querySelector(".x")):(u=o(n.tagName),u.innerHTML=t);while(c=u.firstChild)a.push(c),s.appendChild(c);if(r&&n.tagName==="SELECT"){h=a.length;while(h--)a[h]!==l&&(a[h].selected=!1)}}return a}}(T,N),hr=function(t){var n=[],r=t.length;while(r--)n[r]=t[r];return n},pr=function(e){function t(e){return e.selected}return function(r){var i,s,o;if(!r||r.name!=="select"||!r.binding)return;i=e(r.node.options).filter(t);if(r.getAttribute("multiple"))o=i.map(function(e){return e.value});else if(s=i[0])o=s.value;o!==undefined&&r.binding.setValue(o),r.bubble()}}(hr),dr=function(e,t){return function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=e(this.value,this.parentFragment.getNode(),this.docFrag),t(this.pElement),this.rendered=!0,this.docFrag}}(cr,pr),vr=function(e){return function(n){var r;if(r=this.root.viewmodel.wrapped[this.keypath])n=r.get();n!==this.value&&(this.value=n,this.parentFragment.bubble(),this.rendered&&e.addView(this))}}(w),mr=function(){return this.value!=undefined?this.value:""},gr=function(e){return function(n){this.rendered&&n&&(this.nodes.forEach(e),this.rendered=!1)}}(Nn),yr=function(e,t){return function(){var r,i;if(!this.rendered)return;while(this.nodes&&this.nodes.length)r=this.nodes.pop(),r.parentNode.removeChild(r);i=this.parentFragment.getNode(),this.nodes=e(this.value,i,this.docFrag),i.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),t(this.pElement)}}(cr,pr),br=function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(n){this.type=e.TRIPLE,t.init(this,n)};return h.prototype={detach:n,find:r,findAll:i,firstNode:s,getValue:t.getValue,rebind:t.rebind,render:o,resolve:t.resolve,setValue:u,toString:a,unbind:c,unrender:f,update:l},h}(Kt,Un,ur,ar,fr,lr,dr,vr,mr,gr,yr,Ln),wr=function(){this.parentFragment.bubble()},Er=function(){var t=this.node,n;if(t)return(n=t.parentNode)&&n.removeChild(t),t},Sr=function(e){return function(t){if(e(this.node,t))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(t)}}(ot),xr=function(e,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t),this.fragment&&this.fragment.findAll(e,t)},Tr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},Nr=function(e){if(this.fragment)return this.fragment.findComponent(e)},Cr=function(){return null},kr=function(){return this.node},Lr=function(t){if(!this.attributes||!this.attributes[t])return;return this.attributes[t].value},Ar=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),Or=function(e){return function(){var n=this.fragment.getValue();n!==this.value&&(this.value=n,this.name==="value"&&this.node&&(this.node._ractive.value=n),this.rendered&&e.addView(this))}}(w),Mr=function(e,t){return function(n,r){var i,s;i=r.indexOf(":");if(i!==-1){s=r.substr(0,i);if(s!=="xmlns"){r=r.substring(i+1),n.name=t(r),n.namespace=e[s.toLowerCase()];if(!n.namespace)throw'Unknown namespace ("'+s+'")';return}}n.name=n.element.namespace!==e.html?t(r):r}}(T,Ar),_r=function(e){return function(n){var r=n.fragment.items;if(r.length!==1)return;if(r[0].type===e.INTERPOLATOR)return r[0]}}(Kt),Dr=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name,r.pNode[i]!==undefined&&(n.propertyName=i);if(typeof r.pNode[i]=="boolean"||i==="value")n.useProperty=!0}}}(T),Pr=function(e,t,n,r,i){var s;return i.push(function(){s=i.Fragment}),function(o){this.type=e.ATTRIBUTE,this.element=o.element,this.root=o.root,t(this,o.name);if(!o.value||typeof o.value=="string"){this.value=o.value||!0;return}this.parentFragment=this.element.parentFragment,this.fragment=new s({template:o.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=n(this),this.isBindable=!!this.interpolator,r(this,o),this.ready=!0}}(Kt,Mr,_r,Dr,s),Hr=function(t,n,r,i){this.fragment&&this.fragment.rebind(t,n,r,i)},Br=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r){var i;this.node=r;if(!r.namespaceURI||r.namespaceURI===e.html){i=t[this.name]||this.name,r[i]!==undefined&&(this.propertyName=i);if(typeof r[i]=="boolean"||i==="value")this.useProperty=!0;i==="value"&&(this.useProperty=!0,r._ractive.value=this.value)}this.rendered=!0,this.update()}}(T),jr=function(){function e(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return function(){var n,r,i;n=this.name,r=this.value;if(n==="value"&&this.element.name==="select")return;return n==="name"&&this.element.name==="input"&&(i=this.interpolator)?"name={{"+(i.keypath||i.ref)+"}}":typeof r=="number"?n+'="'+r+'"':typeof r=="string"?n+'="'+e(r)+'"':r?n:""}}(),Fr=function(){this.fragment&&this.fragment.unbind()},Ir=function(){var t=this.value,n,r,i,s;if(!this.locked){this.node._ractive.value=t,n=this.node.options,s=n.length;while(s--){r=n[s],i=r._ractive?r._ractive.value:r.value;if(i==t){r.selected=!0;break}}}},qr=function(e){return function(){var n=this.value,r,i,s,o;e(n)||(n=[n]),r=this.node.options,i=r.length;while(i--)s=r[i],o=s._ractive?s._ractive.value:s.value,s.selected=n.indexOf(o)!==-1}}(u),Rr=function(){var t=(n=this).node,n=n.value;t.checked=n==t._ractive.value},Ur=function(e){return function(){var n,r=this.node,i,s,o;n=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name");if(n&&!r.checked&&this.element.binding){s=this.element.binding.siblings;if(o=s.length){while(o--){i=s[o];if(!i.element.node)return;if(i.element.node.checked)return e.addViewmodel(i.root.viewmodel),i.handleChange()}e.addViewmodel(i.root.viewmodel),this.root.viewmodel.set(i.keypath,undefined)}}}}(w),zr=function(e){return function(){var n,r;n=this.node,r=this.value,e(r)?n.checked=r.indexOf(n._ractive.value)!==-1:n.checked=r==n._ractive.value}}(u),Wr=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.className=n},Xr=function(){var t,n;t=this.node,n=this.value,n!==undefined&&(this.root.nodes[n]=undefined),this.root.nodes[n]=t,t.id=n},Vr=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.style.setAttribute("cssText",n)},$r=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),this.locked||(t.innerHTML=n)},Jr=function(){var t,n;t=this.node,n=this.value,t._ractive.value=n,this.locked||(t.value=n==undefined?"":n)},Kr=function(){this.locked||(this.node[this.propertyName]=this.value)},Qr=function(){var t,n,r;t=this.node,n=this.name,r=this.value,this.namespace?t.setAttributeNS(this.namespace,n,r):typeof r=="string"||typeof r=="number"?t.setAttribute(n,r):r?t.setAttribute(n,""):t.removeAttribute(n)},Gr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return function(){var v,m,g,y,b;v=this.name,m=this.element,g=this.node,v==="id"?b=a:v==="value"?m.name==="select"&&v==="value"?b=g.multiple?r:n:m.name==="textarea"?b=c:g.getAttribute("contenteditable")?b=l:m.name==="input"&&(y=m.getAttribute("type"),y==="file"?b=t:y==="radio"&&m.binding&&m.binding.name==="name"?b=s:b=c):this.twoway&&v==="name"?g.type==="radio"?b=i:g.type==="checkbox"&&(b=o):v==="style"&&g.style.setAttribute?b=f:v!=="class"||!!g.namespaceURI&&g.namespaceURI!==e.html?this.useProperty&&(b=h):b=u,b||(b=p),this.update=b,this.update()}}(T,G,Ir,qr,Rr,Ur,zr,Wr,Xr,Vr,$r,Jr,Kr,Qr),Yr=function(e,t,n,r,i,s,o){var u=function(e){this.init(e)};return u.prototype={bubble:e,init:t,rebind:n,render:r,toString:i,unbind:s,update:o},u}(Or,Pr,Hr,Br,jr,Fr,Gr),Zr=function(e){return function(t,n){var r,i,s=[];for(r in n)n.hasOwnProperty(r)&&(i=new e({element:t,name:r,value:n[r],root:t.root}),s.push(s[r]=i));return s}}(Yr),ei=function(e){var t=Array.prototype.slice,n=t.call(arguments,1),r,i;while(i=n.shift())for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r]);return e},ti=function(e,t,n,r,i){var s=function(e){var n,r,i;this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],n=this.attribute.interpolator,n.twowayBinding=this;if(n.keypath&&n.keypath.substr==="${")return t("Two-way binding does not work with expressions: "+n.keypath),!1;n.keypath||(n.ref&&n.resolve(n.ref),n.resolver&&n.resolver.forceResolution()),this.keypath=r=n.keypath,this.root.viewmodel.get(r)===undefined&&this.getInitialValue&&(i=this.getInitialValue(),i!==undefined&&this.root.viewmodel.set(r,i))};return s.prototype={handleChange:function(){var t=this;e.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),e.scheduleTask(function(){return t.attribute.locked=!1}),e.end()},rebound:function(){var e,t,n;t=this.keypath,n=this.attribute.interpolator.keypath;if(t===n)return;i(this.root._twowayBindings[t],this),this.keypath=n,e=this.root._twowayBindings[n]||(this.root._twowayBindings[n]=[]),e.push(this)},unbind:function(){}},s.extend=function(e){var t=this,i;return i=function(e){s.call(this,e),this.init&&this.init()},i.prototype=n(t.prototype),r(i.prototype,e),i.extend=s.extend,i},s}(w,B,z,ei,h),ni=function(){this._ractive.binding.handleChange()},ri=function(e,t){var n=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1))},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1)},getValue:function(){return this.element.node.innerHTML}});return n}(ti,ni),ii=function(){var e={};return function(n,r,i){var s=n+r+i;return e[s]||(e[s]=[])}}(),si=function(e,t,n,r,i){var s=n.extend({name:"checked",init:function(){this.siblings=r(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var e=this.element.node;e.addEventListener("change",i,!1),e.attachEvent&&e.addEventListener("click",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,!1),e.removeEventListener("click",i,!1)},handleChange:function(){e.start(this.root),this.siblings.forEach(function(e){e.root.viewmodel.set(e.keypath,e.getValue())}),e.end()},getValue:function(){return this.element.node.checked},unbind:function(){t(this.siblings,this)}});return s}(w,h,ti,ii,ni),oi=function(e,t,n,r){var i=t.extend({name:"name",init:function(){this.siblings=r(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}",e.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),e.addEventListener("change",n,!1),e.attachEvent&&e.addEventListener("click",n,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",n,!1),e.removeEventListener("click",n,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){this.element.node.checked&&t.prototype.handleChange.call(this)},rebound:function(e,n,r,i){var s;t.prototype.rebound.call(this,e,n,r,i);if(s=this.element.node)s.name="{{"+this.keypath+"}}"},unbind:function(){e(this.siblings,this)}});return i}(h,ti,ni,ii),ui=function(e,t,n,r,i){function o(e){return e.isChecked}function u(e){return e.element.getAttribute("value")}var s=n.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,n,i;this.checkboxName=!0,this.siblings=r(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),i=this.siblings.noInitialValue,t=this.root.viewmodel.get(this.keypath),n=this.element.getAttribute("value"),i?(this.isChecked=this.element.getAttribute("checked"),this.isChecked&&t.push(n)):this.isChecked=e(t)?t.indexOf(n)!==-1:t===n},unbind:function(){t(this.siblings,this)},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}",e.checked=this.isChecked,e.addEventListener("change",i,!1),e.attachEvent&&e.addEventListener("click",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,!1),e.removeEventListener("click",i,!1)},changed:function(){var e=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===e},handleChange:function(){this.isChecked=this.element.node.checked,n.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(o).map(u)}});return s}(u,h,ti,ii,ni),ai=function(e,t){var n=e.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",t,!1),e.attachEvent&&e.addEventListener("click",t,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("click",t,!1)},getValue:function(){return this.element.node.checked}});return n}(ti,ni),fi=function(e,t,n){var r=t.extend({getInitialValue:function(){var e=this.element.options,t,n;n=t=e.length;if(!t)return;while(n--)if(e[n].getAttribute("selected"))return e[n].getAttribute("value");while(++n<t)if(!e[n].getAttribute("disabled"))return e[n].getAttribute("value")},render:function(){this.element.node.addEventListener("change",n,!1)},unrender:function(){this.element.node.removeEventListener("change",n,!1)},setValue:function(t){e.addViewmodel(this.root.viewmodel),this.root.viewmodel.set(this.keypath,t)},getValue:function(){var e,t,n,r,i;e=this.element.node.options,n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected)return i=r._ractive?r._ractive.value:r.value,i}},forceUpdate:function(){var t=this,n=this.getValue();n!==undefined&&(this.attribute.locked=!0,e.addViewmodel(this.root.viewmodel),e.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))}});return r}(w,ti,ni),li=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;r=t.length;while(r--)if(t[r]!==n[r])return!1;return!0}}(u),ci=function(e,t,n,r){var i=n.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",r,!1),e=this.root.viewmodel.get(this.keypath),e===undefined&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",r,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,r,i,s;e=[],t=this.element.node.options,r=t.length;for(n=0;n<r;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},handleChange:function(){var e,r,i;return e=this.attribute,r=e.value,i=this.getValue(),(r===undefined||!t(i,r))&&n.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,n=this.getValue();n!==undefined&&(this.attribute.locked=!0,e.addViewmodel(this.root.viewmodel),e.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))},updateModel:function(){(this.attribute.value===undefined||!this.attribute.value.length)&&this.root.viewmodel.set(this.keypath,this.initialValue)}});return i}(w,li,fi,ni),hi=function(e,t){var n=e.extend({render:function(){this.element.node.addEventListener("change",t,!1)},unrender:function(){this.element.node.removeEventListener("change",t,!1)},getValue:function(){return this.element.node.files}});return n}(ti,ni),pi=function(e,t){function i(){var e;t.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,r),this.value=e==undefined?"":e}var n,r;return r={evaluateWrapped:!0},n=e.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1)),e.addEventListener("blur",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1),e.removeEventListener("blur",i,!1)}}),n}(ti,ni),di=function(e){return e.extend({getInitialValue:function(){return undefined},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?undefined:e}})}(pi),vi=function(e,t,n,r,i,s,o,u,a,f,l){function c(e){return e&&e.isBindable}return function(p){var d=p.attributes,v,m,g,y;p.binding&&(p.binding.teardown(),p.binding=null),p.getAttribute("contenteditable")&&c(d.value)?m=t:p.name==="input"?(v=p.getAttribute("type"),v==="radio"||v==="checkbox"?(g=c(d.name),y=c(d.checked),g&&y&&e.error({message:"badRadioInputBinding"}),g?m=v==="radio"?r:i:y&&(m=v==="radio"?n:s)):v==="file"&&c(d.value)?m=a:c(d.value)&&(m=v==="number"||v==="range"?f:l)):p.name==="select"&&c(d.value)?m=p.getAttribute("multiple")?u:o:p.name==="textarea"&&c(d.value)&&(m=l);if(m)return new m(p)}}(Dn,ri,si,oi,ui,ai,fi,ci,hi,di,pi),mi=function(t){this.root.fire(this.action.toString().trim(),t)},gi=function(e){function r(e){this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(this.params))}function i(e){var t=this.dynamicParams.getValue(n);typeof t=="string"&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(t))}var t,n={args:!0};return e.push(function(){t=e.Fragment}),function(n,s,o){var u;this.element=n,this.root=n.root,this.name=s,this.proxies=[],u=o.n||o,typeof u!="string"&&(u=new t({template:u,root:this.root,owner:this.element})),this.action=u,o.d?(this.dynamicParams=new t({template:o.d,root:this.root,owner:this.element}),this.fire=i):o.a&&(this.params=o.a,this.fire=r)}}(s),yi=function(t,n,r,i){typeof this.action!="string"&&this.action.rebind(t,n,r,i),this.dynamicParams&&this.dynamicParams.rebind(t,n,r,i)},bi=function(t){var n,r;n=this._ractive,r=n.events[t.type],r.fire({node:this,original:t,index:n.index,keypath:n.keypath,context:n.root.get(n.keypath)})},wi=function(e,t,n){function i(e){return r[e]||(r[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}),r[e]}var r={};return function(){var s=this.name,o;this.node=this.element.node,(o=t.registries.events.find(this.root,s))?this.custom=o(this.node,i(s)):(!("on"+s in this.node)&&!(window&&"on"+s in window)&&e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(s,n,!1)),this.node._ractive.events[s]=this}}(B,et,bi),Ei=function(){typeof this.action!="string"&&this.action.teardown(),this.dynamicParams&&this.dynamicParams.teardown()},Si=function(e){return function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,e,!1)}}(bi),xi=function(e,t,n,r,i,s){var o=function(e,t,n){this.init(e,t,n)};return o.prototype={fire:e,init:t,rebind:n,render:r,teardown:i,unrender:s},o}(mi,gi,yi,wi,Ei,Si),Ti=function(e){return function(t,n){var r,i,s,o,u=[];for(i in n)if(n.hasOwnProperty(i)){s=i.split("-"),r=s.length;while(r--)o=new e(t,s[r],n[i]),u.push(o)}return u}}(xi),Ni=function(e,t,n){var r,i,s;return t.push(function(){r=t.Fragment}),i={args:!0},s=function(t,s){var o=this,u,a,f;o.element=t,o.root=u=t.root,a=s.n||s,typeof a!="string"&&(f=new r({template:a,root:u,owner:t}),a=f.toString(),f.unbind()),s.a?o.params=s.a:s.d&&(o.fragment=new r({template:s.d,root:u,owner:t}),o.params=o.fragment.getValue(i),o.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getValue(i),o.ready&&o.update()}),o.fn=n.registries.decorators.find(u,a),o.fn||e.error({debug:u.debug,message:"missingPlugin",args:{plugin:"decorator",name:a}})},s.prototype={init:function(){var e=this,t,n,r;t=e.element.node,e.params?(r=[t].concat(e.params),n=e.fn.apply(e.root,r)):n=e.fn.call(e.root,t);if(!n||!n.teardown)throw new Error("Decorator definition must return an object with a teardown method");e.actual=n,e.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.unbind()}},s}(Dn,s,et),Ci=function(e){function t(e,t){var n=e.length;while(n--)if(e[n]==t)return!0}return function(r){var i,s,o,u,a;i=r.node;if(!i)return;u=e(i.options),s=r.getAttribute("value"),o=r.getAttribute("multiple"),s!==undefined?(u.forEach(function(e){var n,r;n=e._ractive?e._ractive.value:e.value,r=o?t(s,n):s==n,r&&(a=!0),e.selected=r}),a||(u[0]&&(u[0].selected=!0),r.binding&&r.binding.forceUpdate())):r.binding&&r.binding.forceUpdate()}}(hr),ki=function(e,t){return function(){var r=this;this.dirty||(this.dirty=!0,e.scheduleTask(function(){t(r),r.dirty=!1})),this.parentFragment.bubble()}}(w,Ci),Li=function(t){do if(t.name==="select")return t;while(t=t.parent)},Ai=function(e){return function(n,r){n.select=e(n.parent),n.select.options.push(n),r.a||(r.a={}),!r.a.value&&!r.a.hasOwnProperty("disabled")&&(r.a.value=r.f),"selected"in r.a&&n.select.getAttribute("value")!==undefined&&delete r.a.selected}}(Li),Oi=function(e,t,n,r,i,s,o,u,a){var f;return a.push(function(){f=a.Fragment}),function(l){var c,h,p,d,v;this.type=e.ELEMENT,c=this.parentFragment=l.parentFragment,h=this.template=l.template,this.parent=l.pElement||c.pElement,this.root=p=c.root,this.index=l.index,this.name=t(h.e),this.name==="option"&&u(this,h),this.name==="select"&&(this.options=[],this.bubble=o),this.attributes=n(this,h.a),h.f&&(this.fragment=new f({template:h.f,root:p,owner:this,pElement:this})),p.twoway&&(d=r(this,h.a))&&(this.binding=d,v=this.root._twowayBindings[d.keypath]||(this.root._twowayBindings[d.keypath]=[]),v.push(d)),h.v&&(this.eventHandlers=i(this,h.v)),h.o&&(this.decorator=new s(this,h.o)),this.intro=h.t0||h.t1,this.outro=h.t0||h.t2}}(Kt,Ar,Zr,vi,Ti,Ni,ki,Ai,s),Mi=function(e){return function(n,r){return n===r||e(n,r)}}(Mn),_i=function(e,t){return function(r,i,s,o){var u=r[i];if(!u||e(u,o)||!e(u,s))return;r[i]=t(u,s,o)}}(Mi,_n),Di=function(e){return function(n,r,i,s){function l(e){e.rebind(n,r,i,s)}var o,u,a,f;this.attributes&&this.attributes.forEach(l),this.eventHandlers&&this.eventHandlers.forEach(l),this.fragment&&l(this.fragment);if(a=this.liveQueries){f=this.root,o=a.length;while(o--)a[o]._makeDirty()}this.node&&(u=this.node._ractive)&&(e(u,"keypath",i,s),n!=undefined&&(u.index[n]=r))}}(_i),Pi=function(t){var n,r,i;((n=t.getAttribute("width"))||(r=t.getAttribute("height")))&&t.node.addEventListener("load",i=function(){n&&(t.node.width=n.value),r&&(t.node.height=r.value),t.node.removeEventListener("load",i,!1)},!1)},Hi=function(e,t,n){var r,i={};return n.push(function(){r=n.Fragment}),function(s,o,u){var a=this,f,l,c;a.element=s,a.root=f=s.root,a.isIntro=u,l=o.n||o,typeof l!="string"&&(c=new r({template:l,root:f,owner:s}),l=c.toString(),c.unbind()),a.name=l,o.a?a.params=o.a:o.d&&(c=new r({template:o.d,root:f,owner:s}),a.params=c.getValue(i),c.unbind()),a._fn=t.registries.transitions.find(f,l);if(!a._fn){e.error({debug:f.debug,message:"missingPlugin",args:{plugin:"transition",name:l}});return}}}(Dn,et,s),Bi=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},ji=function(e,t,n,r){var i,s,o;return e?(s={},o=n("div").style,i=function(e){var n,i,u;e=r(e);if(!s[e])if(o[e]!==undefined)s[e]=e;else{u=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;while(n--){i=t[n];if(o[i+u]!==undefined){s[e]=i+u;break}}}return s[e]}):i=null,i}(C,_,N,Bi),Fi=function(e,t,n,r){var i,s;return t?(s=window.getComputedStyle||e.getComputedStyle,i=function(e){var t,i,o,u,a;t=s(this.node);if(typeof e=="string")return a=t[r(e)],a==="0px"&&(a=0),a;if(!n(e))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");i={},o=e.length;while(o--)u=e[o],a=t[r(u)],a==="0px"&&(a=0),i[u]=a;return i}):i=null,i}(W,C,u,ji),Ii=function(e){return function(t,n){var r;if(typeof t=="string")this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(ji),qi=function(e,t,n){function i(e){return e}var r=function(r){var s;this.duration=r.duration,this.step=r.step,this.complete=r.complete,typeof r.easing=="string"?(s=r.root.easing[r.easing],s||(e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]'),s=i)):typeof r.easing=="function"?s=r.easing:s=i,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return r.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},r}(B,P,H),Ri=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(_),Ui=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),n):""}}(_),zi=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m,g={},y={};return e?(l=n("div").style,function(){l.transition!==undefined?(c="transition",h="transitionend",p=!0):l.webkitTransition!==undefined?(c="webkitTransition",h="webkitTransitionEnd",p=!0):p=!1}(),c&&(d=c+"Duration",v=c+"Property",m=c+"TimingFunction"),f=function(e,n,f,l,c){setTimeout(function(){var b,w,E,S,x;S=function(){w&&E&&(e.root.fire(e.name+":end",e.node,e.isIntro),c())},b=(e.node.namespaceURI||"")+e.node.tagName,e.node.style[v]=l.map(o).map(a).join(","),e.node.style[m]=a(f.easing||"linear"),e.node.style[d]=f.duration/1e3+"s",x=function(t){var n;n=l.indexOf(r(u(t.propertyName))),n!==-1&&l.splice(n,1);if(l.length)return;e.node.removeEventListener(h,x,!1),E=!0,S()},e.node.addEventListener(h,x,!1),setTimeout(function(){var u=l.length,a,c,d,v=[],m,T;while(u--){m=l[u],a=b+m,p&&!y[a]&&(e.node.style[o(m)]=n[m],g[a]||(c=e.getStyle(m),g[a]=e.getStyle(m)!=n[m],y[a]=!g[a],y[a]&&(e.node.style[o(m)]=c)));if(!p||y[a])c===undefined&&(c=e.getStyle(m)),d=l.indexOf(m),d===-1?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(d,1),T=/[^\d]*$/.exec(n[m])[0],v.push({name:o(m),interpolator:i(parseFloat(c),parseFloat(n[m])),suffix:T})}v.length?new s({root:e.root,duration:f.duration,easing:r(f.easing||""),step:function(t){var n,r;r=v.length;while(r--)n=v[r],e.node.style[n.name]=n.interpolator(t)+n.suffix},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(h,x,!1),E=!0,S())},0)},f.delay||0)}):f=null,f}(C,B,N,Bi,tt,qi,ji,Ri,Ui),Wi=function(e){function o(){s.hidden=document[t]}function u(){s.hidden=!0}function a(){s.hidden=!1}var t,n,r,i,s;if(typeof document!="undefined"){t="hidden",s={};if(t in document)r="";else{i=e.length;while(i--)n=e[i],t=n+"Hidden",t in document&&(r=n)}r!==undefined?(document.addEventListener(r+"visibilitychange",o),o()):("onfocusout"in document?(document.addEventListener("focusout",u),document.addEventListener("focusin",a)):(window.addEventListener("pagehide",u),window.addEventListener("blur",u),window.addEventListener("pageshow",a),window.addEventListener("focus",a)),s.hidden=!1)}return s}(_),Xi=function(e,t,n,r,i,s,o){var u,a,f;return t?(a=window.getComputedStyle||e.getComputedStyle,u=function(e,t,u,l){var c=this,h;if(o.hidden)return this.setStyle(e,t),f||(f=r.resolve());typeof e=="string"?(h={},h[e]=t):(h=e,l=u,u=t),u||(n('The "'+c.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),u=c,l=c.complete);var p=new r(function(e){var t,n,r,o,f,l,p;if(!u.duration){c.setStyle(h),e();return}t=Object.keys(h),n=[],r=a(c.node),f={},l=t.length;while(l--)p=t[l],o=r[i(p)],o==="0px"&&(o=0),o!=h[p]&&(n.push(p),c.node.style[i(p)]=o);if(!n.length){e();return}s(c,h,u,n,e)});return l&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),p.then(l)),p}):u=null,u}(W,C,B,p,ji,zi,Wi),Vi=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!(n in e)&&(e[n]=t[n]);return e},$i=function(e){return function(t,n){return typeof t=="number"?t={duration:t}:typeof t=="string"?t==="slow"?t={duration:600}:t==="fast"?t={duration:200}:t={duration:400}:t||(t={}),e(t,n)}}(Vi),Ji=function(){function e(e,t){t?e.setAttribute("style",t):(e.getAttribute("style"),e.removeAttribute("style"))}return function(){var n=this,r,i;r=n.node=n.element.node,i=r.getAttribute("style"),n.complete=function(t){!t&&n.isIntro&&e(r,i),r._ractive.transition=null,n._manager.remove(n)};if(!n._fn){n.complete();return}n._fn.apply(n.root,[n].concat(n.params))}}(),Ki=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){u=o.Fragment}),a=function(e,t,n){this.init(e,t,n)},a.prototype={init:e,start:s,getStyle:t,setStyle:n,animateStyle:r,processParams:i},a}(Hi,Fi,Ii,Xi,$i,Ji,s),Qi=function(e,t,n,r,i,s,o,u,a,f,l){function p(t){var n,r,i;return(r=t.getAttribute("xmlns"))?n=r:t.name==="svg"?n=e.svg:(i=t.parent)?i.name==="foreignObject"?n=e.html:n=i.node.namespaceURI:n=t.root.el.namespaceURI,n}function d(e){var n,r,i;r=e.select.getAttribute("value");if(r===undefined)return;n=e.getAttribute("value");if(e.select.node.multiple&&t(r)){i=r.length;while(i--)if(n==r[i]){e.node.selected=!0;break}}else e.node.selected=n==r}function v(e){var t,n,r,i,s;t=e.root;do{n=t._liveQueries,r=n.length;while(r--)i=n[r],s=n["_"+i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s)}while(t=t._parent)}var c,h;return c=function(){var e=this.node,t=this.fragment.toString(!1);if(e.styleSheet)e.styleSheet.cssText=t;else{while(e.hasChildNodes())e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},h=function(){(!this.node.type||this.node.type==="text/javascript")&&n("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},function(){var t=this,n=this.root,m,g;m=p(this),g=this.node=i(this.name,m),n.constructor.css&&this.parentFragment.getNode()===n.el&&this.node.setAttribute("data-rvcguid",n.constructor._guid),s(this.node,"_ractive",{value:{proxy:this,keypath:a(this.parentFragment),index:this.parentFragment.indexRefs,events:r(null),root:n}}),this.attributes.forEach(function(e){return e.render(g)}),this.fragment&&(this.name==="script"?(this.bubble=h,this.node.text=this.fragment.toString(!1),this.fragment.unrender=o):this.name==="style"?(this.bubble=c,this.bubble(),this.fragment.unrender=o):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=o:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.name==="img"&&f(this),this.decorator&&this.decorator.fn&&u.scheduleTask(function(){t.decorator.init()});if(n.transitionsEnabled&&this.intro){var y=new l(this,this.intro,!0);u.registerTransition(y),u.scheduleTask(function(){return y.start()})}return this.name==="option"&&d(this),this.node.autofocus&&u.scheduleTask(function(){return t.node.focus()}),v(this),this.node}}(T,u,B,z,N,k,G,w,v,Pi,Ki),Gi=function(){var e=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return e}(),Yi=function(e,t){function n(e){var n,r,i;n=e.getAttribute("value");if(n===undefined)return!1;r=e.select.getAttribute("value");if(r==n)return!0;if(e.select.getAttribute("multiple")&&t(r)){i=r.length;while(i--)if(r[i]==n)return!0}}function r(e){var t,n,r,i;t=e.attributes,n=t.type,r=t.value,i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator)return;if(r.value===i.interpolator.value)return!0}function i(e){var t=e.toString();return t?" "+t:""}return function(){var t,s;return t="<"+(this.template.y?"!DOCTYPE":this.template.e),t+=this.attributes.map(i).join(""),this.name==="option"&&n(this)&&(t+=" selected"),this.name==="input"&&r(this)&&(t+=" checked"),t+=">",this.fragment&&(s=this.name!=="script"&&this.name!=="style",t+=this.fragment.toString(s)),e.test(this.template.e)||(t+="</"+this.template.e+">"),t}}(Gi,u),Zi=function(e){return function(n){e(n.select.options,n)}}(h),es=function(e){function t(e){e.unbind()}return function(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.name==="option"&&e(this),this.attributes.forEach(t)}}(Zi),ts=function(e,t){function n(e){var t,n,r;r=e.liveQueries.length;while(r--)t=e.liveQueries[r],n=t.selector,t._remove(e.node)}return function(i){var s,o;this.name==="option"?this.detach():i&&e.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1);if(s=this.binding)this.binding.unrender(),this.node._ractive.binding=null,o=this.root._twowayBindings[s.keypath],o.splice(o.indexOf(s),1);this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.unrender()}),this.decorator&&this.decorator.teardown();if(this.root.transitionsEnabled&&this.outro){var u=new t(this,this.outro,!1);e.registerTransition(u),e.scheduleTask(function(){return u.start()})}this.liveQueries&&n(this)}}(w,Ki),ns=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){this.init(e)};return v.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getAttribute:a,init:f,rebind:l,render:c,toString:h,unbind:p,unrender:d},v}(wr,Er,Sr,xr,Tr,Nr,Cr,kr,Lr,Oi,Di,Qi,Yi,es,ts),rs=function(){function n(e,n){var r=t.exec(n)[0];return e===null||r.length<e.length?r:e}var e=/^\s*$/,t=/^\s*/;return function(t){var r,i,s,o;return r=t.split("\n"),i=r[0],i!==undefined&&e.test(i)&&r.shift(),s=r[r.length-1],s!==undefined&&e.test(s)&&r.pop(),o=r.reduce(n,null),o&&(t=r.map(function(e){return e.replace(o,"")}).join("\n")),t}}(),is=function(e,t,n,r){function i(r,i){var s=t.registries.partials,o=s.findInstance(r,i);if(!o)return;var u=o.partials[i],a;typeof u=="function"&&(a=u.bind(o),a.isOwner=o.partials.hasOwnProperty(i),u=a(o.data,n));if(!u){e.warn({debug:r.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:i}});return}if(!n.isParsed(u)){var f=n.parse(u,n.getParseOptions(o));f.p&&e.warn({debug:r.debug,message:"noNestedPartials",args:{rname:i}});var l=a?o:s.findOwner(o,i);l.partials[i]=u=f.t}return a&&(u._fn=a),u.v?u.t:u}return function(s,o){var u;if(u=i(s,o))return u;u=n.fromId(o,{noThrow:!0});if(u){u=r(u);var a=n.parse(u,n.getParseOptions(s));return s.partials[o]=a.t}return e.error({debug:s.debug,message:"noTemplateForPartial",args:{name:o}}),[]}}(Dn,et,$,rs),ss=function(e,t){var n;return t?(n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"),n):e},os=function(e,t,n,r){var i,s;return r.push(function(){s=r.Fragment}),i=function(n){var r=this.parentFragment=n.parentFragment,i;this.type=e.PARTIAL,this.name=n.template.r,this.index=n.index,this.root=r.root;if(!n.template.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");i=t(r.root,n.template.r),this.fragment=new s({template:i,root:r.root,owner:this,pElement:r.pElement})},i.prototype={bubble:function(){this.parentFragment.bubble()},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.fragment.render()},unrender:function(e){this.fragment.unrender(e)},rebind:function(e,t,n,r){return this.fragment.rebind(e,t,n,r)},unbind:function(){this.fragment.unbind()},toString:function(t){var r,i,s,o;return r=this.fragment.toString(t),i=this.parentFragment.items[this.index-1],!i||i.type!==e.TEXT?r:(s=i.template.split("\n").pop(),(o=/^\s+$/.exec(s))?n(r,o[0]):r)},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},getValue:function(){return this.fragment.getValue()}},i}(Kt,is,ss,s),us=function(e,t,n){var r;return n.push(function(){r=n.Ractive}),function i(n,r){var s,o=e.registries.components.findInstance(n,r);if(o){s=o.components[r];if(!s._parent){var u=s.bind(o);u.isOwner=o.components.hasOwnProperty(r),s=u(o.data);if(!s){t.warn({debug:n.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:r}});return}typeof s=="string"&&(s=i(n,s)),s._fn=u,o.components[r]=s}}return s}}(et,Dn,s),as=function(){return this.instance.fragment.detach()},fs=function(t){return this.instance.fragment.find(t)},ls=function(t,n){return this.instance.fragment.findAll(t,n)},cs=function(t,n){n._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,n)},hs=function(t){return!t||t===this.name?this.instance:this.instance.fragment?this.instance.fragment.findComponent(t):null},ps=function(){return this.parentFragment.findNextNode(this)},ds=function(){return this.rendered?this.instance.fragment.firstNode():null},vs=function(e,t){var n,r;return t.push(function(){n=t.Fragment}),r=function(e,t,r){this.parentFragment=e.parentFragment,this.component=e,this.key=t,this.fragment=new n({template:r,root:e.root,owner:this}),this.value=this.fragment.getValue()},r.prototype={bubble:function(){this.dirty||(this.dirty=!0,e.addView(this))},update:function(){var t=this.fragment.getValue();this.component.instance.viewmodel.set(this.key,t),e.addViewmodel(this.component.instance.viewmodel),this.value=t,this.dirty=!1},rebind:function(e,t,n,r){this.fragment.rebind(e,t,n,r)},unbind:function(){this.fragment.unbind()}},r}(w,s),ms=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h,p;return l=i.root,c=i.parentFragment,typeof o=="string"?(f=t(o),f?f.value:o):o===null?!0:o.length===1&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&c.indexRefs[p=o[0].r]!==undefined?(i.indexRefBindings[p]=s,c.indexRefs[p]):(h=n(l,o[0].r,c)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.viewmodel.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n,r){var s={},o,u;e.complexParameters=[];for(o in n)if(n.hasOwnProperty(o)){u=i(e,o,n[o],r);if(u!==undefined||t[o]===undefined)s[o]=u}return s}}(Kt,Sn,y,vs),gs=function(e,t,n,r){var i,s,o,u;return s=e.parentFragment,u=e.root,o={content:r||[]},i=new t({append:!0,data:n,partials:o,magic:u.magic||t.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:e,adapt:u.adapt}),i},ys=function(e){return function(n,r){r.forEach(function(r){var i,s;e(n,n.root,r.parentKeypath,r.childKeypath),i=n.instance.viewmodel.get(r.childKeypath),s=n.root.viewmodel.get(r.parentKeypath),i!==undefined&&s===undefined&&n.root.viewmodel.set(r.parentKeypath,i)})}}(g),bs=function(e){function t(t,n,r,i){typeof i!="string"&&e.error({debug:n.debug,message:"noComponentEventArguments"}),t.on(r,function(){var e=Array.prototype.slice.call(arguments);e.unshift(i),n.fire.apply(n,e)})}return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e.instance,e.root,r,n[r])}}(Dn),ws=function(e){var t,n;t=e.root;while(t)(n=t._liveComponentQueries["_"+e.name])&&n.push(e.instance),t=t._parent},Es=function(e,t,n,r,i,s,o){return function(a,f){var l,c,h,p;l=this.parentFragment=a.parentFragment,c=l.root,this.root=c,this.type=e.COMPONENT,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.bindings=[];if(!f)throw new Error('Component "'+this.name+'" not found');p=[],h=n(this,f.defaults.data||{},a.template.a,p),r(this,f,h,a.template.f),i(this,p),s(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(this)}}(Kt,B,ms,gs,ys,bs,ws),Ss=function(e,t){return function(r,i,s,o){var u=this.instance,a=u._parent,f,l;this.bindings.forEach(function(e){var n;if(e.root!==a)return;(n=t(e.keypath,s,o))&&e.rebind(n)}),this.complexParameters.forEach(function(e){e.rebind(r,i,s,o)});if(f=this.indexRefBindings[r])e.addViewmodel(u.viewmodel),u.viewmodel.set(f,i);(l=this.root._liveComponentQueries["_"+this.name])&&l._makeDirty()}}(w,_n),xs=function(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.detach()},Ts=function(){return this.instance.fragment.toString()},Ns=function(){function e(e){e.unbind()}function t(e){var t,n;t=e.root;do(n=t._liveComponentQueries["_"+e.name])&&n._remove(e);while(t=t._parent)}return function(){this.complexParameters.forEach(e),this.bindings.forEach(e),t(this),this.instance.fragment.unbind()}}(),Cs=function(t){this.instance.fire("teardown"),this.shouldDestroy=t,this.instance.unrender()},ks=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e,t){this.init(e,t)};return p.prototype={detach:e,find:t,findAll:n,findAllComponents:r,findComponent:i,findNextNode:s,firstNode:o,init:u,rebind:a,render:f,toString:l,unbind:c,unrender:h},p}(as,fs,ls,cs,hs,ps,ds,Es,Ss,xs,Ts,Ns,Cs),Ls=function(e,t){var n=function(t){this.type=e.COMMENT,this.value=t.template.c};return n.prototype={detach:t,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){e&&this.node.parentNode.removeChild(this.node)}},n}(Kt,Cn),As=function(e,t,n,r,i,s,o,u,a,f){return function(c){if(typeof c.template=="string")return new t(c);switch(c.template.t){case e.INTERPOLATOR:return new n(c);case e.SECTION:return new r(c);case e.TRIPLE:return new i(c);case e.ELEMENT:var h;if(h=u(c.parentFragment.root,c.template.e))return new a(c,h);return new s(c);case e.PARTIAL:return new o(c);case e.COMMENT:return new f(c);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(Kt,kn,zn,or,br,ns,os,us,ks,Ls),Os=function(e,t,n){return function(i){var s=this,o,u,a;this.owner=i.owner,o=this.parent=this.owner.parentFragment,this.root=i.root,this.pElement=i.pElement,this.context=i.context,this.owner.type===e.SECTION&&(this.index=i.index);if(o){u=o.indexRefs;if(u){this.indexRefs=t(null);for(a in u)this.indexRefs[a]=u[a]}}this.priority=o?o.priority+1:1,i.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[i.indexRef]=i.index),typeof i.template=="string"?i.template=[i.template]:i.template||(i.template=[]),this.items=i.template.map(function(e,t){return n({parentFragment:s,pElement:i.pElement,template:e,index:t})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.inited=!0}}(Kt,z,As),Ms=function(e){return function(n,r,i,s){e(this,"context",i,s),this.indexRefs&&this.indexRefs[n]!==undefined&&(this.indexRefs[n]=r),this.items.forEach(function(e){e.rebind&&e.rebind(n,r,i,s)})}}(_i),_s=function(){var t;return this.items.length===1?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t},Ds=function(t){return this.items?this.items.map(function(e){return e.toString(t)}).join(""):""},Ps=function(){function e(e){e.unbind&&e.unbind()}return function(){this.items.forEach(e)}}(),Hs=function(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)})},Bs=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=function(e){this.init(e)};return g.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getNode:a,getValue:f,init:l,rebind:c,render:h,toString:p,unbind:d,unrender:v},m.Fragment=g,g}(qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,xn,Os,Ms,_s,Ds,Ps,Hs,s),js=function(e,t,n){var r=["template","partials","components","decorators","events"];return function(s,o){var u,a,f,l,c;typeof s=="function"&&!o?(o=s,s={}):s=s||{};if(typeof s!="object")throw new Error("The reset method takes either no arguments, or an object containing new data");(a=this.viewmodel.wrapped[""])&&a.reset?a.reset(s)===!1&&(this.data=s):this.data=s,f=n.reset(this),l=f.length;while(l--)if(r.indexOf(f[l])>-1){c=!0;break}if(c){var h;this.viewmodel.mark("");if(h=this.component)h.shouldDestroy=!0;this.unrender(),h&&(h.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new t({template:this.template,root:this,owner:this})),u=this.render(this.el,this.anchor)}else u=e.start(this,!0),this.viewmodel.mark(""),e.end();return this.fire("reset",s),o&&u.then(o),u}}(w,Bs,et),Fs=function(e,t){return function(r){var i,s;e.template.init(null,this,{template:r}),i=this.transitionsEnabled,this.transitionsEnabled=!1;if(s=this.component)s.shouldDestroy=!0;this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new t({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=i}}(et,Bs),Is=function(e){return e("reverse")}(Ht),qs=function(e,t,n,r){var i=/\*/;return function(o,u,a){var f=this,l,c;c=e.start(this,!0);if(t(o)){l=o,a=u;for(o in l)l.hasOwnProperty(o)&&(u=l[o],o=n(o),this.viewmodel.set(o,u))}else o=n(o),i.test(o)?r(this,o).forEach(function(e){f.viewmodel.set(e,u)}):this.viewmodel.set(o,u);return e.end(),a&&c.then(a.bind(this)),c}}(w,a,M,Tt),Rs=function(e){return e("shift")}(Ht),Us=function(e){return e("sort")}(Ht),zs=function(e){return e("splice")}(Ht),Ws=function(e){return function(n,r){return e(this,n,r===undefined?-1:-r)}}(A),Xs=function(e){return function(n){var r;return this.fire("teardown"),this.fragment.unbind(),this.viewmodel.teardown(),r=this.rendered?this.unrender():e.resolve(),n&&r.then(n.bind(this)),r}}(p),Vs=function(e){return function(n,r){var i;return typeof n!="string"&&e.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:n}}),i=this.get(n),this.set(n,!i,r)}}(Dn),$s=function(){return this.fragment.toString(!0)},Js=function(e,t,n){return function(){var i=this,s,o;if(!this.rendered)throw new Error("ractive.unrender() was called on a Ractive instance that was not rendered");s=t.start(this,!0),o=!this.component||this.component.shouldDestroy,o=o||this.shouldDestroy,this.constructor.css&&s.then(function(){n.remove(i.constructor)});while(this._animations[0])this._animations[0].stop();return this.fragment.unrender(o),this.rendered=!1,e(this.el.__ractive_instances__,this),t.end(),s}}(h,w,Ft),Ks=function(e){return e("unshift")}(Ht),Qs=function(e){return function(n,r){var i;return typeof n=="function"?(r=n,n=""):n=n||"",i=e.start(this,!0),this.viewmodel.mark(n),e.end(),this.fire("update",n),r&&i.then(r.bind(this)),i}}(w),Gs=function(e,t){function n(r,i,s,o){var u,a,f,l,c,h,p=[];u=r._twowayBindings[i];if(u&&(f=u.length))while(f--){l=u[f];if(l.radioName&&!l.element.node.checked)continue;if(l.checkboxName){!p[l.keypath]&&!l.changed()&&(p.push(l.keypath),p[l.keypath]=l);continue}c=l.attribute.value,h=l.getValue();if(e(c,h))continue;t(c,h)||(s[i]=h)}p.length&&p.forEach(function(t){var n,r,i;n=p[t],r=n.attribute.value,i=n.getValue(),e(r,i)||(s[t]=i)});if(!o)return;a=r.viewmodel.depsMap["default"][i];if(a){f=a.length;while(f--)n(r,a[f],s,o)}}return function(t,r){var i;return typeof t!="string"&&(t="",r=!0),n(this,t,i={},r),this.set(i)}}(li,m),Ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,pop:d,push:v,render:m,reset:g,resetTemplate:y,reverse:b,set:w,shift:E,sort:S,splice:x,subtract:T,teardown:N,toggle:C,toHTML:k,unrender:L,unshift:A,update:O,updateModel:M}}(O,rt,it,st,vt,mt,gt,yt,bt,Et,St,Lt,Mt,_t,Bt,jt,It,js,Fs,Is,qs,Rs,Us,zs,Ws,Xs,Vs,$s,Js,Ks,Qs,Gs),Zs=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},eo=function(){var e=0;return function(){return"r-"+e++}}(),to=function(e,t,n,r){var i=e.root,s=e.keypath;if(n==="sort"||n==="reverse"){i.viewmodel.set(s,t);return}if(!r)return;i.viewmodel.splice(s,r)},no=function(e,t,n,r,i){var s=[],o=["pop","push","reverse","shift","sort","splice","unshift"],u,a,f;return o.forEach(function(o){var u=function(){var t,s,u,a,f;t=n(this,o,Array.prototype.slice.call(arguments)),s=r(this,t),u=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;while(f--)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,o,s),e.end();return this._ractive.setting=!1,u};t(s,o,{value:u})}),u={},u.__proto__?(a=function(e){e.__proto__=s},f=function(e){e.__proto__=Array.prototype}):(a=function(e){var n,r;n=o.length;while(n--)r=o[n],t(e,r,{value:s[r],configurable:!0})},f=function(e){var t;t=o.length;while(t--)delete e[o[t]]}),a.unpatch=f,a}(w,k,Dt,Pt,to),ro=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;e=this.value,t=e._ractive,r=t.wrappers,i=t.instances;if(t.setting)return!1;o=r.indexOf(this);if(o===-1)throw new Error(s);r.splice(o,1);if(!r.length)delete e._ractive,n.unpatch(this.value);else{i[this.root._guid]-=1;if(!i[this.root._guid]){o=i.indexOf(this.root);if(o===-1)throw new Error(s);i.splice(o,1)}}}},s="Something went wrong in a rather interesting way",r}(k,u,no),io=function(e,t){var n,r;return e&&(n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}}),n}(S,ro),so=function(e,t,n,r){function s(e,t){var n={},r;if(!t)return e;t+=".";for(r in e)e.hasOwnProperty(r)&&(n[t+r]=e[r]);return n}function o(e){var t;return i[e]||(t=e?e+".":"",i[e]=function(n,r){var i;if(typeof n=="string")return i={},i[t+n]=r,i;if(typeof n=="object")return t?s(n,e):n}),i[e]}var i={};return function(s,u){var a=this.ractive,f,l,c,h;f=a.adapt.length;for(l=0;l<f;l+=1){c=a.adapt[l];if(typeof c=="string"){var p=e.registries.adaptors.find(a,c);if(!p)throw new Error('Missing adaptor "'+c+'"');c=a.adapt[l]=p}if(c.filter(u,s,a))return h=this.wrapped[s]=c.wrap(a,u,s,o(s)),h.value=u,u}return a.magic?r.filter(u,s,a)?this.wrapped[s]=r.wrap(a,u,s):n.filter(u,s,a)&&(this.wrapped[s]=n.wrap(a,u,s)):a.modifyArrays&&t.filter(u,s,a)&&(this.wrapped[s]=t.wrap(a,u,s)),u}}(et,ro,S,io),oo=function(t){var n=[""],r,i,s,o;r=t.length;while(r--){i=t[r],s=i.split(".");while(s.length>1)s.pop(),o=s.join("."),n.indexOf(o)===-1&&n.push(o)}return n},uo=function(){function t(t){var n="",r,i,s,o,u;if(!e[t]){s=[];while(n.length<t)n+=1;r=parseInt(n,2),o=function(e){return e==="1"};for(u=0;u<=r;u+=1){i=u.toString(2);while(i.length<t)i="0"+i;s[u]=Array.prototype.map.call(i,o)}e[t]=s}return e[t]}var e={};return function(n){var r,i,s,o;return r=n.split("."),i=t(r.length),s=function(e,t){return e?"*":r[t]},o=i.map(function(e){return e.map(s).join(".")}),o}}(),ao=function(e){function n(t,n,s){var o;i(t,n);if(s)return;o=e(n),o.forEach(function(e){r(t,e,n)})}function r(e,n,s){var o,u,a;o=e.depsMap.patternObservers,u=o[n],u&&u.forEach(function(n){var o=t.exec(n)[0];a=s?s+"."+o:o,i(e,a),r(e,n,a)})}function i(e,t){e.patternObservers.forEach(function(e){e.regex.test(t)&&e.update(t)})}var t=/[^\.]+$/;return n}(uo),fo=function(e,t){function r(e){e.update()}function i(e,t,n){var r,i;if(r=o(e,t,n))i=e.get(t),r.forEach(function(e){return e.setValue(i)})}function s(e,t,n){function i(e){e.forEach(s),e.forEach(u)}function s(t){var i=o(e,t,n);i&&r.push({keypath:t,deps:i})}function u(t){var r;(r=e.depsMap[n][t])&&i(r)}function a(t){var n=e.get(t.keypath);t.deps.forEach(function(e){return e.setValue(n)})}var r=[];i(t),r.forEach(a)}function o(e,t,n){var r=e.deps[n];return r?r[t]:null}function u(e,t){t.forEach(function(t){e.indexOf(t)===-1&&e.push(t)})}var n=["observers","default"];return function(){var a=this,f=this,l,c,h=[],p,d,v,m={};if(!this.changes.length)return;d=function(e){var t;(t=f.deps.computed[e])&&u(p,t)},v=function(e){var t;d(e),(t=f.depsMap.computed[e])&&t.forEach(v)};do l=this.changes,u(h,l),this.changes=[],p=[],c=e(l),c.forEach(d),l.forEach(v),p.forEach(r);while(this.changes.length);return c=e(h),this.patternObservers.length&&(c.forEach(function(e){return t(a,e,!0)}),h.forEach(function(e){return t(a,e)})),n.forEach(function(e){if(!a.deps[e])return;c.forEach(function(t){return i(a,t,e)}),s(a,h,e)}),h.forEach(function(e){m[e]=a.get(e)}),this.implicitChanges={},m}}(oo,ao),lo=function(){this.capturing=!0,this.captured=[]},co=function(t,n){var r,i,s;n||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),(s=this.computations[t])&&s.compute(),this.cache[t]=undefined;if(r=this.cacheMap[t])while(r.length)this.clearCache(r.pop())},ho={FAILED_LOOKUP:!0},po=function(e,t){var n={},r=function(e,r){this.viewmodel=e,this.root=e.ractive,this.ref=r,this.parentFragment=n,e.unresolvedImplicitDependencies[r]=!0,e.unresolvedImplicitDependencies.push(this),t.addUnresolved(this)};return r.prototype={resolve:function(){this.viewmodel.mark(this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,e(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){t.removeUnresolved(this)}},r}(h,w),vo=function(e,t){function r(t,n){var r,i,s,o,u,a,f;r=n.split("."),i=r.pop(),s=r.join("."),o=t.get(s);if(f=t.wrapped[s])o=f.get();if(o===null||o===undefined)return;return(u=t.cacheMap[s])?u.indexOf(n)===-1&&u.push(n):t.cacheMap[s]=[n],typeof o!="object"||i in o?(a=o[i],t.adapt(n,a,!1),t.cache[n]=a,a):t.cache[n]=e}var n={};return function(s){var o=arguments[1];o===void 0&&(o=n);var u=this.ractive,a=this.cache,f,l,c,h;return a[s]===undefined?((l=this.computations[s])?f=l.value:(c=this.wrapped[s])?f=c.value:s?(h=this.evaluators[s])?f=h.value:f=r(this,s):(this.adapt("",u.data),f=u.data),a[s]=f):f=a[s],o.evaluateWrapped&&(c=this.wrapped[s])&&(f=c.get()),o.capture&&this.capturing&&this.captured.indexOf(s)===-1&&(this.captured.push(s),f===e&&this.unresolvedImplicitDependencies[s]!==!0&&new t(this,s)),f===e?void 0:f}}(ho,po),mo=function(t,n){n&&(this.implicitChanges[t]=!0),this.changes.indexOf(t)===-1&&(this.changes.push(t),this.clearCache(t))},go=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{o=t.indexOf(e,u);if(o===-1)return s=!0,-1;u=o+1}while(n[o]&&u<a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},yo=function(e,t,n){function i(t){return typeof t.merge=="function"&&(!t.subtype||t.subtype===e.SECTION_EACH)}function s(e){return JSON.stringify(e)}function o(e){if(e===!0)return s;if(typeof e=="string")return r[e]||(r[e]=function(t){return t[e]}),r[e];if(typeof e=="function")return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var r={};return function(r,s,u,a){var f=this,l,c,h,p,d;this.mark(r);if(a&&a.compare){h=o(a.compare);try{l=s.map(h),c=u.map(h)}catch(v){if(this.debug)throw v;t("Merge operation: comparison failed. Falling back to identity checking"),l=s,c=u}}else l=s,c=u;p=n(l,c),p.forEach(function(e,t){e===-1&&f.mark(r+"."+t)}),this.set(r,u,!0),(d=this.deps["default"][r])&&d.filter(i).forEach(function(e){return e.merge(p)}),s.length!==u.length&&this.mark(r+".length",!0)}}(Kt,B,go),bo=function(){function e(e,t,n){var r,i,s,o;r=t.split(".");while(r.length)r.pop(),i=r.join("."),s=e.depsMap[n]||(e.depsMap[n]={}),o=s[i]||(s[i]=[]),o[t]===undefined&&(o[t]=0,o.push(t)),o[t]+=1,t=i}return function(n,r){var i=arguments[2];i===void 0&&(i="default");var s,o,u;if(r.isStatic)return;s=this.deps[i]||(this.deps[i]={}),o=s[n]||(s[n]=[]),o.push(r);if(!n)return;if(u=this.evaluators[n])u.dependants||u.wake(),u.dependants+=1;e(this,n,i)}}(),wo=function(){return this.capturing=!1,this.captured},Eo=function(e,t){return function(r,i,s){var o,u,a,f,l,c,h,p;if(e(this.cache[r],i))return;l=this.computations[r],c=this.wrapped[r],h=this.evaluators[r],l&&!l.setting&&l.set(i),c&&c.reset&&(p=c.reset(i)!==!1,p&&(i=c.get())),h&&(h.value=i),!l&&!h&&!p&&(o=r.split("."),u=o.pop(),a=o.join("."),c=this.wrapped[a],c&&c.set?c.set(u,i):(f=c?c.get():this.get(a),f||(f=t(u),this.set(a,f,!0)),f[u]=i)),s?this.clearCache(r):this.mark(r)}}(m,E),So=function(e){function t(t){return t.type===e.SECTION&&(!t.subtype||t.subtype===e.SECTION_EACH)&&t.rendered}return function(n,r){var i=this,s,o;for(s=r.rangeStart;s<r.rangeEnd;s+=1)i.mark(n+"."+s);r.balance&&i.mark(n+".length",!0),(o=i.deps["default"][n])&&o.filter(t).forEach(function(e){return e.splice(r)})}}(Kt),xo=function(){var t=this,n;Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});while(n=this.unresolvedImplicitDependencies.pop())n.teardown()},To=function(){function e(e,t,n){var r,i,s,o;r=t.split(".");while(r.length)r.pop(),i=r.join("."),s=e.depsMap[n],o=s[i],o[t]-=1,o[t]||(o.splice(o.indexOf(t),1),o[t]=undefined),t=i}return function(n,r){var i=arguments[2];i===void 0&&(i="default");var s,o,u;if(r.isStatic)return;s=this.deps[i][n],o=s.indexOf(r);if(o===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");s.splice(o,1);if(!n)return;if(u=this.evaluators[n])u.dependants-=1,u.dependants||u.sleep();e(this,n,i)}}(),No=function(){function t(t){var n="var __ractive=this;return("+t.replace(e,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var e=/\$\{([^\}]+)\}/g;return function(e){return typeof e=="function"?{get:e}:typeof e=="string"?{get:t(e)}:(typeof e=="object"&&typeof e.get=="string"&&(e={get:t(e.get),set:e.set}),e)}}(),Co=function(e,t,n){var r=function(e,t,n){this.ractive=e,this.viewmodel=e.viewmodel,this.key=t,this.getter=n.get,this.setter=n.set,this.dependencies=[],this.update()};return r.prototype={set:function(e){if(this.setting){this.value=e;return}if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,e)},compute:function(){var t,r,i;t=this.ractive,t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(s){e.warn({debug:t.debug,message:"failedComputation",args:{key:this.key,err:s.message||s}}),r=!0}return i=t.viewmodel.release(),n(this,this.dependencies,i),r?!1:!0},update:function(){var e=this.value;this.compute()&&!t(this.value,e)&&this.ractive.viewmodel.mark(this.key)}},r}(Dn,m,Pn),ko=function(e,t){return function(r,i){var s,o;for(s in i)o=e(i[s]),r.viewmodel.computations[s]=new t(r,s,o)}}(No,Co),Lo=function(){function t(e){return typeof e=="string"&&(e=[e]),e}var e={lookup:function(e,t){var n,r=e.adapt;if(!r||!r.length)return r;if(t&&Object.keys(t).length&&(n=r.length))while(n--){var i=r[n];typeof i=="string"&&(r[n]=t[i]||i)}return r},combine:function(e,n){return e=t(e),n=t(n),!e||!e.length?n:!n||!n.length?e.slice():(e.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),n)}};return e}(),Ao=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m;try{Object.defineProperty({},"test",{value:0})}catch(g){m=!0}var y=function(t){this.ractive=t,y.extend(t.constructor,t),this.cache={},this.cacheMap=e(null),this.deps={computed:{},"default":{}},this.depsMap={computed:{},"default":{}},this.patternObservers=[],this.wrapped=e(null),this.evaluators=e(null),this.computations=e(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={}};return y.extend=function(e,t){if(t.magic&&m)throw new Error("Getters and setters (magic mode) are not supported in this browser");t.adapt=v.combine(e.prototype.adapt,t.adapt)||[],t.adapt=v.lookup(t,t.adaptors)},y.prototype={adapt:t,applyChanges:n,capture:r,clearCache:i,get:s,mark:o,merge:u,register:a,release:f,set:l,splice:c,teardown:h,unregister:p,compute:function(){d(this.ractive,this.ractive.computed)}},y}(z,so,fo,lo,co,vo,mo,yo,bo,wo,Eo,So,xo,To,ko,Lo),Oo=function(e,t,n,r,i,s){function o(e){var t;if(t=n(e.el)){var r=e.transitionsEnabled;e.noIntro&&(e.transitionsEnabled=!1);if(t&&!e.append){if(t.__ractive_instances__)try{t.__ractive_instances__.splice(0,t.__ractive_instances__.length).forEach(function(e){return e.teardown()})}catch(i){}t.innerHTML=""}e.render(t,e.append),e.transitionsEnabled=r}}function u(e,n){e._guid=r(),e._subs=t(null),e._config={},e._twowayBindings=t(null),e._animations=[],e.nodes={},e._liveQueries=[],e._liveComponentQueries=[],n._parent&&n._component&&(e._parent=n._parent,e.component=n._component,n._component.instance=e)}return function(n){var r=arguments[1];r===void 0&&(r={}),u(n,r),e.init(n.constructor,n,r),n.viewmodel=new i(n),n.viewmodel.compute(),n.template&&(n.fragment=new s({template:n.template,root:n,owner:n})),n.viewmodel.applyChanges(),o(n)}}(et,z,wt,eo,Ao,Bs),Mo=function(e){return function(n,r,i){n.beforeInit&&n.beforeInit(i),e(n,i)}}(Oo),_o=function(e,t,n,r){function a(t,n,r){for(var i in r)if(!(i in s)&&r.hasOwnProperty(i)){var o=r[i];typeof o=="function"&&(o=e(t,i,o)),n[i]=o}}function f(e){if(e.prototype instanceof i){var n={};while(e)u.forEach(function(t){l(t.useDefaults?e.prototype:e,n,t.name)}),Object.keys(e.prototype).forEach(function(r){if(r==="computed")return;var i=e.prototype[r];if(r in n){if(typeof n[r]=="function"&&typeof i=="function"&&n[r]._method){var s,o=i._method;o&&(i=i._method),s=t(n[r]._method,i),o&&(s._method=s),n[r]=s}}else n[r]=i._method?i._method:i}),e._parent!==i?e=e._parent:e=!1;return n}return e}function l(e,t,n){var r,i=Object.keys(e[n]);if(!i.length)return;(r=t[n])||(r=t[n]={}),i.filter(function(e){return!(e in r)}).forEach(function(t){return r[t]=e[n][t]})}var i,s={_parent:!0,_component:!0},o={toPrototype:a,toOptions:f},u=n.registries;return n.keys.forEach(function(e){return s[e]=!0}),r.push(function(){i=r.Ractive}),o}(Y,I,et,s),Do=function(e,t,n,r,i,s,o){return function u(){var a=arguments[0];a===void 0&&(a={});var f=this,l,c,h;return a=o.toOptions(a),l=function(e){i(this,l,e)},c=e(f.prototype),c.constructor=l,h={_guid:{value:n()},defaults:{value:c},extend:{value:u,writable:!0,configurable:!0},_parent:{value:f}},t(l,h),r.extend(f,c,a),s.extend(f,c),o.toPrototype(f.prototype,c,a),l.prototype=c,l}}(z,L,Zs,et,Mo,Ao,_o),Po=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d;p=function(e){c(this,e)},d={extend:{value:f},parse:{value:l},Promise:{value:u},svg:{value:r},magic:{value:i},VERSION:{value:"0.5.5"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:t},events:{writable:!0,value:{}},interpolators:{writable:!0,value:n},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},s(p,d),p.prototype=a(o,e),p.prototype.constructor=p,p.defaults=p.prototype,h.Ractive=p;while(h.length)h.pop()();var v="function";if(typeof Date.now!==v||typeof String.prototype.trim!==v||typeof Object.keys!==v||typeof Array.prototype.indexOf!==v||typeof Array.prototype.forEach!==v||typeof Array.prototype.map!==v||typeof Array.prototype.filter!==v||typeof window!="undefined"&&typeof window.addEventListener!==v)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return p}(r,i,l,c,x,L,Ys,p,ei,Do,U,Oo,s);typeof module!="undefined"&&module.exports?module.exports=Po:typeof n=="function"&&n.amd&&n("ractivejs",[],function(){return Po}),e.Ractive=Po,Po.noConflict=function(){return e.Ractive=t,Po}}(typeof window!="undefined"?window:this),function(e){var t=e.Ractive,r=function(){var e={el:void 0,append:!1,template:{v:1,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,noCssTransform:!1,debug:!1};return e}(),i={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)}},s=[],o=Object.prototype.hasOwnProperty,u=function(){var e=Object.prototype.toString;return function(t){return e.call(t)==="[object Array]"}}(),a=function(){var e=Object.prototype.toString;return function(t){return t&&e.call(t)==="[object Object]"}}(),f=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},l=function(e,t,n,r,i){var s,o,u;return e.push(function(){o=e.interpolate}),u=/^([+-]?[0-9]+\.?(?:[0-9]+)?)(px|em|ex|%|in|cm|mm|pt|pc)$/,s={number:function(e,t){var n;return!i(e)||!i(t)?null:(e=+e,t=+t,n=t-e,n?function(t){return e+t*n}:function(){return e})},array:function(e,t){var r,i,s,u;if(!n(e)||!n(t))return null;r=[],i=[],u=s=Math.min(e.length,t.length);while(u--)i[u]=o(e[u],t[u]);for(u=s;u<e.length;u+=1)r[u]=e[u];for(u=s;u<t.length;u+=1)r[u]=t[u];return function(e){var t=s;while(t--)r[t]=i[t](e);return r}},object:function(e,n){var i,s,u,a,f;if(!r(e)||!r(n))return null;i=[],a={},u={};for(f in e)t.call(e,f)&&(t.call(n,f)?(i.push(f),u[f]=o(e[f],n[f])):a[f]=e[f]);for(f in n)t.call(n,f)&&!t.call(e,f)&&(a[f]=n[f]);return s=i.length,function(e){var t=s,n;while(t--)n=i[t],a[n]=u[n](e);return a}},cssLength:function(e,t){var n,r,i,s,o,a,f,l;return e!==0&&typeof e!="string"||t!==0&&typeof t!="string"?null:(n=u.exec(e),r=u.exec(t),i=n?n[2]:"",s=r?r[2]:"",i&&s&&i!==s?null:(f=i||s,o=n?+n[1]:0,a=r?+r[1]:0,l=a-o,l?function(e){return o+e*l+f}:function(){return o+f}))}},s}(s,o,u,a,f),c=function(){var e;return typeof document=="undefined"?e=!1:e=document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),e}(),h=function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},p=function(){function i(e){setTimeout(e,0)}function s(e,t){return function(){var n;while(n=e.shift())n(t)}}function o(t,n,r,i){var s;if(n===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(n instanceof e)n.then(r,i);else if(!n||typeof n!="object"&&typeof n!="function")r(n);else{try{s=n.then}catch(u){i(u);return}if(typeof s=="function"){var a,f,l;f=function(e){if(a)return;a=!0,o(t,e,r,i)},l=function(e){if(a)return;a=!0,i(e)};try{s.call(n,f,l)}catch(u){if(!a){i(u),a=!0;return}}}else r(n)}}var e,t={},n={},r={};return typeof p=="function"?e=p:(e=function(u){var a=[],f=[],l=t,c,h,p,d,v,m;p=function(e){return function(r){if(l!==t)return;c=r,l=e,h=s(l===n?a:f,c),i(h)}},d=p(n),v=p(r);try{u(d,v)}catch(g){v(g)}return m={then:function(n,r){var s=new e(function(e,u){var c=function(t,n,r){typeof t=="function"?n.push(function(n){var r;try{r=t(n),o(s,r,e,u)}catch(i){u(i)}}):n.push(r)};c(n,a,e),c(r,f,u),l!==t&&i(h)});return s}},m["catch"]=function(e){return this.then(null,e)},m},e.all=function(t){return new e(function(e,n){var r=[],i,s,o;if(!t.length){e(r);return}o=function(s){t[s].then(function(t){r[s]=t,--i||e(r)},n)},i=s=t.length;while(s--)o(s)})},e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})}),e}(),d=function(){var e=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g;return function(n){return(n||"").replace(e,".$1")}}(),v=function(e){do if(e.context)return e.context;while(e=e.parent);return""},m=function(e,t){return e===null&&t===null?!0:typeof e=="object"||typeof t=="object"?!1:e===t},g=function(e,t,n){var r;e.push(function(){return r=e.runloop});var i=function(e,t,n,r,i){this.root=e,this.keypath=t,this.priority=i,this.otherInstance=n,this.otherKeypath=r,this.bind(),this.value=this.root.viewmodel.get(this.keypath)};return i.prototype={setValue:function(e){var i=this;if(this.updating||this.counterpart&&this.counterpart.updating){this.value=e;return}if(t(e)&&e._ractive&&e._ractive.setting)return;n(e,this.value)||(this.updating=!0,r.addViewmodel(this.otherInstance.viewmodel),this.otherInstance.viewmodel.set(this.otherKeypath,e),this.value=e,r.scheduleTask(function(){return i.updating=!1}))},bind:function(){this.root.viewmodel.register(this.keypath,this)},rebind:function(e){this.unbind(),this.keypath=e,this.counterpart.otherKeypath=e,this.bind()},unbind:function(){this.root.viewmodel.unregister(this.keypath,this)}},function(t,n,r,s){var o,u,a,f,l,c;o=r+"="+s,a=t.bindings;if(a[o])return;a[o]=!0,u=t.instance,f=t.parentFragment.priority,l=new i(n,r,u,s,f),a.push(l),u.twoway&&(c=new i(u,s,n,r,1),a.push(c),l.counterpart=c,c.counterpart=l)}}(s,u,m),y=function(e,t,n){function s(e,t){var n;if(t===".")return e;n=e?e.split("."):[];if(t.substr(0,3)==="../"){while(t.substr(0,3)==="../"){if(!n.length)throw new Error(r);n.pop(),t=t.substring(3)}return n.push(t),n.join(".")}return e?e+t.replace(/^\.\//,"."):t.replace(/^\.\/?/,"")}var r,i;return r='Could not resolve reference - too many "../" prefixes',i={evaluateWrapped:!0},function o(r,u,a){var f,l,c,h,p,d,v,m,g,y;u=e(u);if(u.substr(0,2)==="~/")return u.substring(2);if(u.charAt(0)===".")return s(t(a),u);l=u.split(".")[0];do{f=a.context;if(!f)continue;d=!0,p=r.viewmodel.get(f,i);if(p&&(typeof p=="object"||typeof p=="function")&&l in p)return f+"."+u}while(a=a.parent);if(l in r.data||l in r.viewmodel.computations)return u;if(r._parent&&!r.isolated){a=r.component.parentFragment;if(a.indexRefs&&(c=a.indexRefs[u])!==undefined){r.component.indexRefBindings[u]=u,r.viewmodel.set(u,c,!0);return}h=o(r._parent,u,a);if(h){v=h.split("."),m=u.split(".");while(v.length>1&&m.length>1&&v[v.length-1]===m[m.length-1])v.pop(),m.pop();return g=v.join("."),y=m.join("."),r.viewmodel.set(y,r._parent.viewmodel.get(g),!0),n(r.component,r._parent,g,y),u}}if(!d)return u;if(r.viewmodel.get(u)!==undefined)return u}}(d,v,g),b=function(e){function n(e){e.detach()}function r(e){e.detachNodes()}function i(e){if(!e.ready||e.outros.length||e.outroChildren)return;e.outrosComplete||(e.parent?e.parent.decrementOutros(e):e.detachNodes(),e.outrosComplete=!0),!e.intros.length&&!e.totalChildren&&(typeof e.callback=="function"&&e.callback(),e.parent&&e.parent.decrementTotal())}var t=function(e,t){this.callback=e,this.parent=t,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,t&&t.addChild(this)};return t.prototype={addChild:function(e){this.children.push(e),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,i(this)},decrementTotal:function(){this.totalChildren-=1,i(this)},add:function(e){var t=e.isIntro?this.intros:this.outros;t.push(e)},remove:function(t){var n=t.isIntro?this.intros:this.outros;e(n,t),i(this)},init:function(){this.ready=!0,i(this)},detachNodes:function(){this.detachQueue.forEach(n),this.children.forEach(r)}},t}(h),w=function(e,t,n,r,i){function a(){var e,t,n;for(e=0;e<s.viewmodels.length;e+=1)t=s.viewmodels[e],n=t.applyChanges(),n&&t.ractive.fire("change",n);s.viewmodels.length=0,f();for(e=0;e<s.views.length;e+=1)s.views[e].update();s.views.length=0;for(e=0;e<s.tasks.length;e+=1)s.tasks[e]();s.tasks.length=0;if(s.viewmodels.length)return a()}function f(){var e,t,n;if(!u.length)return;e=u.splice(0,u.length);while(t=e.pop()){if(t.keypath)continue;n=r(t.root,t.ref,t.parentFragment),n!==undefined?t.resolve(n):u.push(t)}}var s,o,u=[];return o={start:function(e,t){var r,o;return t&&(r=new n(function(e){return o=e})),s={previousBatch:s,transitionManager:new i(o,s&&s.transitionManager),views:[],tasks:[],viewmodels:[]},e&&s.viewmodels.push(e.viewmodel),r},end:function(){a(),s.transitionManager.init(),s=s.previousBatch},addViewmodel:function(e){s?s.viewmodels.indexOf(e)===-1&&s.viewmodels.push(e):e.applyChanges()},registerTransition:function(e){e._manager=s.transitionManager,s.transitionManager.add(e)},addView:function(e){s.views.push(e)},addUnresolved:function(e){u.push(e)},removeUnresolved:function(e){t(u,e)},detachWhenReady:function(e){s.transitionManager.detachQueue.push(e)},scheduleTask:function(e){s?s.tasks.push(e):e()}},e.runloop=o,o}(s,h,p,y,b),E=function(){var e=/^\s*[0-9]+\s*$/;return function(t){return e.test(t)?[]:{}}}(),S=function(e,t,n){function o(t,n,r){function l(t){var r,i;t.value=n;if(t.updating)return;i=t.ractive,r=t.keypath,t.updating=!0,e.start(i),i.viewmodel.mark(r),e.end(),t.updating=!1}var i,s,o,u,a,f;i=t.obj,s=t.prop;if(r&&!r.configurable){if(s==="length")return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}r&&(o=r.get,u=r.set),a=o||function(){return n},f=function(e){u&&u(e),n=o?o():e,f._ractiveWrappers.forEach(l)},f._ractiveWrappers=[t],Object.defineProperty(i,s,{get:a,set:f,enumerable:!0,configurable:!0})}var r,i;try{Object.defineProperty({},"test",{value:0}),r={filter:function(e,t,r){var i,s,o,u,a;return t?(i=t.split("."),s=i.pop(),o=i.join("."),(u=r.viewmodel.wrapped[o])&&!u.magic?!1:(a=r.get(o),n(a)&&/^[0-9]+$/.test(s)?!1:a&&(typeof a=="object"||typeof a=="function"))):!1},wrap:function(e,t,n){return new i(e,t,n)}},i=function(e,t,n){var r,i,s,u;this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,r=n.split("."),this.prop=r.pop(),i=r.join("."),this.obj=i?e.get(i):e.data,s=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop);if(s&&s.set&&(u=s.set._ractiveWrappers)){u.indexOf(this)===-1&&u.push(this);return}o(this,t,s)},i.prototype={get:function(){return this.value},reset:function(t){if(this.updating)return;this.updating=!0,this.obj[this.prop]=t,e.addViewmodel(this.ractive.viewmodel),this.ractive.viewmodel.mark(this.keypath),this.updating=!1},set:function(e,n){if(this.updating)return;this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=t(e),this.updating=!1),this.obj[this.prop][e]=n},teardown:function(){var e,t,n,r,i;if(this.updating)return!1;e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set;if(!t)return;r=t._ractiveWrappers,i=r.indexOf(this),i!==-1&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n)}}}catch(s){r=!1}return r}(w,E,u),x=function(e){return!!e}(S),T={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=function(e,t){var n;return e?n=function(e,n){return!n||n===t.html?document.createElement(e):document.createElementNS(n,e)}:n=function(e,n){if(n&&n!==t.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)},n}(c,T),C=function(){var e=typeof document=="object";return e}(),k=function(e){var t;try{Object.defineProperty({},"test",{value:0}),e&&Object.defineProperty(document.createElement("div"),"test",{value:0}),t=Object.defineProperty}catch(n){t=function(e,t,n){e[t]=n.value}}return t}(C),L=function(e,t,n){var r;try{try{Object.defineProperties({},{test:{value:0}})}catch(i){throw i}n&&Object.defineProperties(e("div"),{test:{value:0}}),r=Object.defineProperties}catch(i){r=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e,r,n[r])}}return r}(N,k,C),A=function(e){return function(n,r,i){var s;if(typeof r!="string"||!e(i))throw new Error("Bad arguments");s=+n.get(r)||0;if(!e(s))throw new Error("Cannot add to a non-numeric value");return n.set(r,s+i)}}(f),O=function(e){return function(n,r){return e(this,n,r===undefined?1:+r)}}(A),M=function(e){var t=/^\.+/;return function(r){return e(r).replace(t,"")}}(d),_=["o","ms","moz","webkit"],D=function(e){var t;return typeof window=="undefined"?t=null:(function(e,t,n){var r,i;if(n.requestAnimationFrame)return;for(r=0;r<e.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[e[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(e){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-t)),s=i(function(){e(n+r)},r),t=n+r,s})}(e,0,window),t=window.requestAnimationFrame),t}(_),P=function(){var e;return typeof window!="undefined"&&window.performance&&typeof window.performance.now=="function"?e=function(){return window.performance.now()}:e=function(){return Date.now()},e}(),H=function(e,t,n){var r=[],i={tick:function(){var s,o,u;u=t(),n.start();for(s=0;s<r.length;s+=1)o=r[s],o.tick(u)||r.splice(s--,1);n.end(),r.length?e(i.tick):i.running=!1},add:function(t){r.push(t),i.running||(i.running=!0,e(i.tick))},abort:function(e,t){var n=r.length,i;while(n--)i=r[n],i.root===t&&i.keypath===e&&i.stop()}};return i}(D,P,w),B=function(){var e,t={};return typeof console!="undefined"&&typeof console.warn=="function"&&typeof console.warn.apply=="function"?e=function(e,n){if(!n){if(t[e])return;t[e]=!0}console.warn(e)}:e=function(){},e}(),j=function(){function s(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function o(e){return e.str}var e=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,t=/\/\*.*?\*\//g,n=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~]+)?\s*[\s\+\>\~]?)\s*/g,r=/^@media/,i=/\[data-rvcguid="[a-z0-9-]+"]/g;return function(a,f){var l,c;return c=function(e){var t,r,i,s,u,a,l,c,h=[];t=[];while(r=n.exec(e))t.push({str:r[0],base:r[1],modifiers:r[2]});s='[data-rvcguid="'+f+'"]',u=t.map(o),c=t.length;while(c--)l=u.slice(),i=t[c],l[c]=i.base+s+i.modifiers||"",a=u.slice(),a[c]=s+" "+a[c],h.push(l.join(" "),a.join(" "));return h.join(", ")},i.test(a)?l=a.replace(i,'[data-rvcguid="'+f+'"]'):l=a.replace(t,"").replace(e,function(e,t){var n,i;return r.test(t)?e:(n=t.split(",").map(s),i=n.map(c).join(", ")+" ",e.replace(t,i))}),l}}(),F=function(e){function n(e,t,n){var i=t.constructor._guid,s;if(s=r(n.css,n,i)||r(e.css,e,i))t.constructor.css=s}function r(t,n,r){if(!t)return;return n.noCssTransform?t:e(t,r)}var t={name:"css",extend:n,init:function(){}};return t}(j),I=function(){function e(e,t){return typeof t=="function"&&/_super/.test(e)}return function(t,n,r){return r||e(t,n)?function(){var e="_super"in this,r=this._super,i;return this._super=n,i=t.apply(this,arguments),e&&(this._super=r),i}:t}}(),q=function(e){function n(e,t,n){var r=n.data||{},i=o(e.prototype.data);return u(i,r)}function r(e,t,r){t.data=n(e,t,r)}function i(e,t,r){var i=r.data,s=n(e,t,r);return typeof s=="function"&&(s=s.call(t,i)||i),t.data=s||{}}function s(e){var t=this.init(e.constructor,e,e);if(t)return e.data=t,!0}function o(e){if(typeof e!="function"||!Object.keys(e).length)return e;var t={};return a(e,t),u(e,t)}function u(e,t){return typeof t=="function"?c(t,e):typeof e=="function"?l(t,e):f(t,e)}function a(e,t,n){for(var r in e){if(n&&r in t)continue;t[r]=e[r]}}function f(e,t){return e=e||{},t?(a(t,e,!0),e):e}function l(e,t){return function(n){var r;if(e){r=[];for(var i in e)(!n||!(i in n))&&r.push(i)}return n=t.call(this,n)||n,r&&r.length&&(n=n||{},r.forEach(function(t){n[t]=e[t]})),n}}function c(t,n){var r;return typeof n!="function"?r=function(e){f(e,n)}:r=function(t){return n=e(n,function(){},!0),n.call(this,t)||t},e(t,r)}var t={name:"data",extend:r,init:i,reset:s};return t}(I),R={missingParser:"Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser",mergeComparisonFail:"Merge operation: comparison failed. Falling back to identity checking",noComponentEventArguments:"Components currently only support simple events - you cannot include arguments. Sorry!",noTemplateForPartial:'Could not find template for partial "{name}"',noNestedPartials:"Partials ({{>{name}}}) cannot contain nested inline partials",evaluationError:'Error evaluating "{uniqueString}": {err}',badArguments:"Bad arguments \"{arguments}\". I'm not allowed to argue unless you've paid.",failedComputation:'Failed to compute "{key}": {err}',missingPlugin:'Missing "{name}" {plugin} plugin. You may need to download a {plugin} via http://docs.ractivejs.org/latest/plugins#{plugin}s',badRadioInputBinding:"A radio input can have two-way binding on its name attribute, or its checked attribute - not both",noRegistryFunctionReturn:'A function was specified for "{name}" {registry}, but no {registry} was returned'},U={TEXT:1,INTERPOLATOR:2,TRIPLE:3,SECTION:4,INVERTED:5,CLOSING:6,ELEMENT:7,PARTIAL:8,COMMENT:9,DELIMCHANGE:10,MUSTACHE:11,TAG:12,ATTRIBUTE:13,CLOSING_TAG:14,COMPONENT:15,NUMBER_LITERAL:20,STRING_LITERAL:21,ARRAY_LITERAL:22,OBJECT_LITERAL:23,BOOLEAN_LITERAL:24,GLOBAL:26,KEY_VALUE_PAIR:27,REFERENCE:30,REFINEMENT:31,MEMBER:32,PREFIX_OPERATOR:33,BRACKETED:34,CONDITIONAL:35,INFIX_OPERATOR:36,INVOCATION:40,SECTION_IF:50,SECTION_UNLESS:51,SECTION_EACH:52,SECTION_WITH:53},z=function(){var e;try{Object.create(null),e=Object.create}catch(t){e=function(){var e=function(){};return function(t,n){var r;return t===null?{}:(e.prototype=t,r=new e,n&&Object.defineProperties(r,n),r)}}()}return e}(),W={expectedExpression:"Expected a JavaScript expression",expectedParen:"Expected closing paren"},X=function(e){var t=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;return function(n){var r;return(r=n.matchPattern(t))?{t:e.NUMBER_LITERAL,v:r}:null}}(U),V=function(e){return function(t){var n=t.remaining();return n.substr(0,4)==="true"?(t.pos+=4,{t:e.BOOLEAN_LITERAL,v:"true"}):n.substr(0,5)==="false"?(t.pos+=5,{t:e.BOOLEAN_LITERAL,v:"false"}):null}}(U),$=function(){var e,t,n;return e=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,t=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,n=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,function(r){return function(i){var s,o,u,a;s=i.pos,o='"',u=!1;while(!u)a=i.matchPattern(e)||i.matchPattern(t)||i.matchString(r),a?a==='"'?o+='\\"':a==="\\'"?o+="'":o+=a:(a=i.matchPattern(n),a?o+="\\u"+("000"+a.charCodeAt(1).toString(16)).slice(-4):u=!0);return o+='"',JSON.parse(o)}}}(),J=function(e){return e('"')}($),K=function(e){return e("'")}($),Q=function(e,t,n){return function(r){var i,s;return i=r.pos,r.matchString('"')?(s=n(r),r.matchString('"')?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):r.matchString("'")?(s=t(r),r.matchString("'")?{t:e.STRING_LITERAL,v:s}:(r.pos=i,null)):null}}(U,J,K),G={name:/^[a-zA-Z_$][a-zA-Z_$0-9]*/},Y=function(e,t,n){var r=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;return function(i){var s;if(s=e(i))return r.test(s.v)?s.v:'"'+s.v.replace(/"/g,'\\"')+'"';if(s=t(i))return s.v;if(s=i.matchPattern(n.name))return s}}(Q,X,G),Z=function(e,t){return function(n){var r,i,s;return r=n.pos,n.allowWhitespace(),i=t(n),i===null?(n.pos=r,null):(n.allowWhitespace(),n.matchString(":")?(n.allowWhitespace(),s=n.readExpression(),s===null?(n.pos=r,null):{t:e.KEY_VALUE_PAIR,k:i,v:s}):(n.pos=r,null))}}(U,Y),et=function(e){return function t(n){var r,i,s,o;return r=n.pos,s=e(n),s===null?null:(i=[s],n.matchString(",")?(o=t(n),o?i.concat(o):(n.pos=r,null)):i)}}(Z),tt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("{")?(i=t(n),n.allowWhitespace(),n.matchString("}")?{t:e.OBJECT_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(U,et),nt=function(e){return function t(n){function u(e){i.push(e)}var r,i,s,o;return r=n.pos,n.allowWhitespace(),s=n.readExpression(),s===null?null:(i=[s],n.allowWhitespace(),n.matchString(",")&&(o=t(n),o===null&&n.error(e.expectedExpression),o.forEach(u)),i)}}(W),rt=function(e,t){return function(n){var r,i;return r=n.pos,n.allowWhitespace(),n.matchString("[")?(i=t(n),n.matchString("]")?{t:e.ARRAY_LITERAL,m:i}:(n.pos=r,null)):(n.pos=r,null)}}(U,nt),it=function(e,t,n,r,i){return function(s){var o=e(s)||t(s)||n(s)||r(s)||i(s);return o}}(X,V,Q,tt,rt),st=function(e,t){var n,r,i,s,o;return n=/^\.[a-zA-Z_$0-9]+/,i=function(e){var t=e.matchPattern(r);return t?"."+t:null},r=/^\[(0|[1-9][0-9]*)\]/,s=/^(?:Array|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)$/,o=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,function(r){var u,a,f,l,c,h,p;u=r.pos;if(r.matchString("~/"))a="~/";else{a="";while(r.matchString("../"))a+="../"}a||(l=r.matchString(".")||""),f=r.matchPattern(/^@(?:index|key)/)||r.matchPattern(t.name)||"";if(o.test(f))return r.pos=u,null;if(!a&&!l&&s.test(f))return{t:e.GLOBAL,v:f};c=(a||l)+f;if(!c)return null;while(h=r.matchPattern(n)||i(r))c+=h;return r.matchString("(")&&(p=c.lastIndexOf("."),p!==-1?(c=c.substr(0,p),r.pos=u+c.length):r.pos-=1),{t:e.REFERENCE,n:c.replace(/^this\./,"./").replace(/^this$/,".")}}}(U,G),ot=function(e,t){return function(n){var r,i;return r=n.pos,n.matchString("(")?(n.allowWhitespace(),i=n.readExpression(),i||n.error(t.expectedExpression),n.allowWhitespace(),n.matchString(")")||n.error(t.expectedParen),{t:e.BRACKETED,x:i}):null}}(U,W),ut=function(e,t,n){return function(r){return e(r)||t(r)||n(r)}}(it,st,ot),at=function(e,t,n){return function(i){var s,o,u;s=i.pos,i.allowWhitespace();if(i.matchString(".")){i.allowWhitespace();if(o=i.matchPattern(n.name))return{t:e.REFINEMENT,n:o};i.error("Expected a property name")}return i.matchString("[")?(i.allowWhitespace(),u=i.readExpression(),u||i.error(t.expectedExpression),i.allowWhitespace(),i.matchString("]")||i.error("Expected ']'"),{t:e.REFINEMENT,x:u}):null}}(U,W,G),ft=function(e,t,n,r,i){return function(s){var o,u,a,f;u=t(s);if(!u)return null;while(u){o=s.pos;if(a=r(s))u={t:e.MEMBER,x:u,r:a};else{if(!s.matchString("("))break;s.allowWhitespace(),f=n(s),s.allowWhitespace(),s.matchString(")")||s.error(i.expectedParen),u={t:e.INVOCATION,x:u},f&&(u.o=f)}}return u}}(U,ut,nt,at,W),lt=function(e,t,n){var r,i;return i=function(n,r){return function(i){var s;return(s=r(i))?s:i.matchString(n)?(i.allowWhitespace(),s=i.readExpression(),s||i.error(t.expectedExpression),{s:n,o:s,t:e.PREFIX_OPERATOR}):null}},function(){var e,t,s,o,u;o="! ~ + - typeof".split(" "),u=n;for(e=0,t=o.length;e<t;e+=1)s=i(o[e],u),u=s;r=u}(),r}(U,W,ft),ct=function(e,t){var n,r;return r=function(t,n){return function(r){var i,s,o;s=n(r);if(!s)return null;for(;;){i=r.pos,r.allowWhitespace();if(!r.matchString(t))return r.pos=i,s;if(t==="in"&&/[a-zA-Z_$0-9]/.test(r.remaining().charAt(0)))return r.pos=i,s;r.allowWhitespace(),o=n(r);if(!o)return r.pos=i,s;s={t:e.INFIX_OPERATOR,s:t,o:[s,o]}}}},function(){var e,i,s,o,u;o="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),u=t;for(e=0,i=o.length;e<i;e+=1)s=r(o[e],u),u=s;n=u}(),n}(U,lt),ht=function(e,t,n){return function(r){var i,s,o,u;return s=t(r),s?(i=r.pos,r.allowWhitespace(),r.matchString("?")?(r.allowWhitespace(),o=r.readExpression(),o||r.error(n.expectedExpression),r.allowWhitespace(),r.matchString(":")||r.error('Expected ":"'),r.allowWhitespace(),u=r.readExpression(),u||r.error(n.expectedExpression),{t:e.CONDITIONAL,o:[s,o,u]}):(r.pos=i,s)):null}}(U,ct,W),pt=function(e,t){function n(e){return JSON.stringify(String(e))}function r(n,i){var s,o;n.t===e.REFERENCE&&i.indexOf(n.n)===-1&&i.unshift(n.n),o=n.o||n.m;if(o)if(t(o))r(o,i);else{s=o.length;while(s--)r(o[s],i)}n.x&&r(n.x,i),n.r&&r(n.r,i),n.v&&r(n.v,i)}function i(t,r,s){var o=function(e){return i(t,e,s)};switch(r.t){case e.BOOLEAN_LITERAL:case e.GLOBAL:case e.NUMBER_LITERAL:return r.v;case e.STRING_LITERAL:return n(r.v);case e.ARRAY_LITERAL:return"["+(r.m?r.m.map(o).join(","):"")+"]";case e.OBJECT_LITERAL:return"{"+(r.m?r.m.map(o).join(","):"")+"}";case e.KEY_VALUE_PAIR:return r.k+":"+i(t,r.v,s);case e.PREFIX_OPERATOR:return(r.s==="typeof"?"typeof ":r.s)+i(t,r.o,s);case e.INFIX_OPERATOR:return i(t,r.o[0],s)+(r.s.substr(0,2)==="in"?" "+r.s+" ":r.s)+i(t,r.o[1],s);case e.INVOCATION:return i(t,r.x,s)+"("+(r.o?r.o.map(o).join(","):"")+")";case e.BRACKETED:return"("+i(t,r.x,s)+")";case e.MEMBER:return i(t,r.x,s)+i(t,r.r,s);case e.REFINEMENT:return r.n?"."+r.n:"["+i(t,r.x,s)+"]";case e.CONDITIONAL:return i(t,r.o[0],s)+"?"+i(t,r.o[1],s)+":"+i(t,r.o[2],s);case e.REFERENCE:return"${"+s.indexOf(r.n)+"}";default:t.error("Expected legal JavaScript")}}return function(e){var t=[],n;return r(e,t),n={r:t,s:i(this,e,t)},n}}(U,a),dt=function(e,t,n,r,i){var s,o,u=/^\s+/;return o=function(e){this.name="ParseError",this.message=e;try{throw new Error(e)}catch(t){this.stack=t.stack}},o.prototype=Error.prototype,s=function(e,t){var n,r;this.str=e,this.options=t||{},this.pos=0,this.init&&this.init(e,t),n=[];while(this.pos<this.str.length&&(r=this.read()))n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},s.prototype={read:function(e){var t,n,r,i;e||(e=this.converters),t=this.pos,r=e.length;for(n=0;n<r;n+=1){this.pos=t;if(i=e[n](this))return i}return null},readExpression:function(){return r(this)},flattenExpression:i,getLinePos:function(){var e,t,n,r,i,s;e=this.str.split("\n"),i=-1,r=0;do n=r,i++,t=e[i],r+=t.length+1;while(r<=this.pos);return s=this.pos-n,{line:i+1,ch:s+1,text:t,toJSON:function(){return[this.line,this.ch]},toString:function(){return"line "+this.line+" character "+this.ch+":\n"+this.text+"\n"+this.text.substr(0,this.ch-1).replace(/[\S]/g," ")+"^----"}}},error:function(e){var t,n;throw t=this.getLinePos(),n=e+" at "+t,new o(n)},matchString:function(e){if(this.str.substr(this.pos,e.length)===e)return this.pos+=e.length,e},matchPattern:function(e){var t;if(t=e.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0]},allowWhitespace:function(){this.matchPattern(u)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},s.extend=function(e){var r=this,i,o;i=function(e,t){s.call(this,e,t)},i.prototype=t(r.prototype);for(o in e)n.call(e,o)&&(i.prototype[o]=e[o]);return i.extend=s.extend,i},e.Parser=s,s}(s,z,o,ht,pt),vt=function(){var e=/^[^\s=]+/,t=/^\s+/;return function(n){var r,i,s;return n.matchString("=")?(r=n.pos,n.allowWhitespace(),i=n.matchPattern(e),i?n.matchPattern(t)?(s=n.matchPattern(e),s?(n.allowWhitespace(),n.matchString("=")?[i,s]:(n.pos=r,null)):(n.pos=r,null)):null:(n.pos=r,null)):null}}(),mt=[{delimiters:"delimiters",isTriple:!1,isStatic:!1},{delimiters:"tripleDelimiters",isTriple:!0,isStatic:!1},{delimiters:"staticDelimiters",isTriple:!1,isStatic:!0},{delimiters:"staticTripleDelimiters",isTriple:!0,isStatic:!0}],gt=function(e){var t={"#":e.SECTION,"^":e.INVERTED,"/":e.CLOSING,">":e.PARTIAL,"!":e.COMMENT,"&":e.TRIPLE};return function(e){var n=t[e.str.charAt(e.pos)];return n?(e.pos+=1,n):null}}(U),yt=function(e){return{"if":e.SECTION_IF,unless:e.SECTION_UNLESS,"with":e.SECTION_WITH,each:e.SECTION_EACH}}(U),bt=null,wt=function(e,t,n){function u(t,n){var r=[],i;while(n.t===e.MEMBER&&n.r.t===e.REFINEMENT)i=n.r,i.x?i.x.t===e.REFERENCE?r.unshift(i.x):r.unshift(t.flattenExpression(i.x)):r.unshift(i.n),n=n.x;return n.t!==e.REFERENCE?null:{r:n.n,m:r}}var r=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,i=/^[0-9][1-9]*$/,s=new RegExp("^("+Object.keys(n).join("|")+")\\b"),o;return o=/^[a-zA-Z$_0-9]+(?:(\.[a-zA-Z$_0-9]+)|(\[[a-zA-Z$_0-9]+\]))*$/,function(n,a){var f,l,c,h,p,d,v,m,g,y,b;f=n.pos,c={},y=n[a.delimiters],a.isStatic&&(c.s=!0);if(a.isTriple)c.t=e.TRIPLE;else{n.remaining()[0]==="!"&&(d=n.readExpression())&&(c.t=e.INTERPOLATOR,n.allowWhitespace(),n.matchString(y[1])?n.pos-=y[1].length:(n.pos=f,d=null));if(!d){h=t(n),c.t=h||e.INTERPOLATOR;if(h===e.SECTION){if(p=n.matchPattern(s))c.n=p;n.allowWhitespace()}else if(h===e.COMMENT||h===e.CLOSING){m=n.remaining(),g=m.indexOf(y[1]);if(g!==-1)return c.r=m.substr(0,g),n.pos+=g,c}}}if(!d){n.allowWhitespace(),d=n.readExpression(),m=n.remaining();if(m.substr(0,y[1].length)!==y[1]&&m.charAt(0)!==":"){l=n.pos,n.pos=f,m=n.remaining(),g=m.indexOf(y[1]);if(g!==-1)return c.r=m.substr(0,g).trim(),o.test(c.r)||n.error("Expected a legal Mustache reference"),n.pos+=g,c;n.pos=l}}if(d){while(d.t===e.BRACKETED&&d.x)d=d.x;d.t===e.REFERENCE?c.r=d.n:d.t===e.NUMBER_LITERAL&&i.test(d.v)?c.r=d.v:(b=u(n,d))?c.rx=b:c.x=n.flattenExpression(d)}if(v=n.matchPattern(r))c.i=v;return c}}(U,gt,yt,bt),Et=function(e,t,n,r,i){function u(e){var t;return t=n.slice().sort(function(n,r){return e[r.delimiters][0].length-e[n.delimiters][0].length}),function r(n){return n?a(e,n)||r(t.shift()):null}(t.shift())}function a(n,o){var u,a,l,c,p,d,v,m,g,y;u=n.pos,a=n.getLinePos(),c=n[o.delimiters];if(!n.matchString(c[0]))return null;if(l=t(n))return n.matchString(c[1])?(n[o.delimiters]=l,s):null;n.allowWhitespace(),l=r(n,o);if(l===null)return n.pos=u,null;n.allowWhitespace(),n.matchString(c[1])||n.error("Expected closing delimiter '"+c[1]+"' after reference"),l.t===e.COMMENT&&(l.exclude=!0),l.t===e.CLOSING&&(n.sectionDepth-=1,n.sectionDepth<0&&(n.pos=u,n.error("Attempted to close a section that wasn't open")));if(h(l)){n.sectionDepth+=1,p=[],m=p,d=l.n;while(g=n.read()){if(g.t===e.CLOSING){d&&g.r!==d&&n.error("Expected {{/"+d+"}}");break}if(g.t===e.INTERPOLATOR&&g.r==="else")switch(l.n){case"unless":n.error("{{else}} not allowed in {{#unless}}");break;case"with":n.error("{{else}} not allowed in {{#with}}");break;default:m=v=[];continue}m.push(g)}p.length&&(l.f=p,!l.i&&l.n==="each"&&(y=f(l.f))&&(l.i=y)),v&&v.length&&(l.l=v)}return n.includeLinePositions&&(l.p=a.toJSON()),l.n?l.n=i[l.n]:l.t===e.INVERTED&&(l.t=e.SECTION,l.n=e.SECTION_UNLESS),l}function f(t){var n,r,i;n=t.length;while(n--){r=t[n];if(r.t===e.ELEMENT&&r.f&&(i=f(r.f)))return i;if(r.t===e.INTERPOLATOR||r.t===e.TRIPLE||r.t===e.SECTION){if(r.r&&o.test(r.r))return r.r;if(r.x&&(i=l(r.x)))return i;if(r.rx&&(i=c(r.rx)))return i}}}function l(e){var t;t=e.r.length;while(t--)if(o.test(e.r[t]))return e.r[t]}function c(t){var n,r,i;n=t.m.length;while(n--){i=t.m[n];if(i.r&&(r=l(i)))return r;if(i.t===e.REFERENCE&&o.test(i.n))return i.n}}function h(t){return t.t===e.SECTION||t.t===e.INVERTED}var s={t:e.DELIMCHANGE,exclude:!0},o=/^@(?:index|key)$/;return u}(U,vt,mt,wt,yt),St=function(e){var t="<!--",n="-->";return function(r){var i,s,o,u,a;return i=r.getLinePos(),r.matchString(t)?(o=r.remaining(),u=o.indexOf(n),u===-1&&r.error("Illegal HTML - expected closing comment sequence ('-->')"),s=o.substr(0,u),r.pos+=u+3,a={t:e.COMMENT,c:s},r.includeLinePositions&&(a.p=i.toJSON()),a):null}}(U),xt=function(){var e=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;return e}(),Tt=function(e,t){var n,r,i;n=t.length;while(n--){r=e.indexOf(t[n]);if(!r)return 0;if(r===-1)continue;if(!i||r<i)i=r}return i||-1},Nt=function(){function s(e){return e?e===10?32:e<128?e:e<=159?t[e-128]:e<55296?e:e<=57343?65533:e<=65535?e:65533:65533}var e,t,n,r,i;return e={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},t=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],n=new RegExp("&("+Object.keys(e).join("|")+");?","g"),r=/&#x([0-9]+);?/g,i=/&#([0-9]+);?/g,function(o){var u;return u=o.replace(n,function(t,n){return e[n]?String.fromCharCode(e[n]):t}),u=u.replace(r,function(e,t){return String.fromCharCode(s(parseInt(t,16)))}),u=u.replace(i,function(e,t){return String.fromCharCode(s(t))}),u}}(bt),Ct=function(e,t){return function(n){var r,i,s,o;return i=n.remaining(),o=n.inside?"</"+n.inside:"<",n.inside&&!n.interpolate[n.inside]?r=i.indexOf(o):(s=[o,n.delimiters[0],n.tripleDelimiters[0],n.staticDelimiters[0],n.staticTripleDelimiters[0]],n.inAttribute===!0?s.push('"',"'","=",">","`"):n.inAttribute&&s.push(n.inAttribute),r=e(i,s)),r?(r===-1&&(r=i.length),n.pos+=r,t(i.substr(0,r))):null}}(Tt,Nt),kt=function(e){var t=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/;return function(n){var r;if(!n.matchString("</"))return null;if(r=n.matchPattern(t))return{t:e.CLOSING_TAG,e:r};n.pos-=2,n.error("Illegal closing tag")}}(U),Lt=function(e,t){function i(e){var t,r,i;return e.allowWhitespace(),r=e.matchPattern(n),r?(t={name:r},i=s(e),i&&(t.value=i),t):null}function s(e){var t,n,r,i;return t=e.pos,e.allowWhitespace(),e.matchString("=")?(e.allowWhitespace(),n=e.pos,r=e.sectionDepth,i=a(e,"'")||a(e,'"')||u(e),e.sectionDepth!==r&&(e.pos=n,e.error("An attribute value must contain as many opening section tags as closing section tags")),i===null?(e.pos=t,null):i.length===1&&typeof i[0]=="string"?i[0]:i):(e.pos=t,null)}function o(e){var t,n,i;return t=e.pos,n=e.matchPattern(r),n?((i=n.indexOf(e.delimiters[0]))!==-1&&(n=n.substr(0,i),e.pos=t+n.length),n):null}function u(e){var n,r;e.inAttribute=!0,n=[],r=t(e)||o(e);while(r!==null)n.push(r),r=t(e)||o(e);return n.length?(e.inAttribute=!1,n):null}function a(e,n){var r,i,s;r=e.pos;if(!e.matchString(n))return null;e.inAttribute=n,i=[],s=t(e)||f(e,n);while(s!==null)i.push(s),s=t(e)||f(e,n);return e.matchString(n)?(e.inAttribute=!1,i):(e.pos=r,null)}function f(t,n){var r,i,s;return r=t.pos,s=t.remaining(),i=e(s,[n,t.delimiters[0],t.delimiters[1]]),i===-1&&t.error("Quoted attribute value must have a closing quote"),i?(t.pos+=i,s.substr(0,i)):null}var n=/^[^\s"'>\/=]+/,r=/^[^\s"'=<>`]+/;return i}(Tt,Et),At=function(e,t,n){function l(e){var t,r,i;return e.allowWhitespace(),t=n(e),t?(i={key:t},e.allowWhitespace(),e.matchString(":")?(e.allowWhitespace(),r=e.read(),r?(i.value=r.v,i):null):null):null}var r,i,s,o,u,a,f;return i={"true":!0,"false":!1,"undefined":undefined,"null":null},s=new RegExp("^(?:"+Object.keys(i).join("|")+")"),o=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,u=/\$\{([^\}]+)\}/g,a=/^\$\{([^\}]+)\}/,f=/^\s*$/,r=e.extend({init:function(e,t){this.values=t.values},postProcess:function(e){return e.length!==1||!f.test(this.leftover)?null:{value:e[0].v}},converters:[function(t){var n;if(!t.values)return null;n=t.matchPattern(a);if(n&&t.values.hasOwnProperty(n))return{v:t.values[n]}},function(t){var n;if(n=t.matchPattern(s))return{v:i[n]}},function(t){var n;if(n=t.matchPattern(o))return{v:+n}},function(n){var r=t(n),i;return r&&(i=n.values)?{v:r.v.replace(u,function(e,t){return t in i?i[t]:t})}:r},function(t){var n,r;if(!t.matchString("{"))return null;n={},t.allowWhitespace();if(t.matchString("}"))return{v:n};while(r=l(t)){n[r.key]=r.value,t.allowWhitespace();if(t.matchString("}"))return{v:n};if(!t.matchString(","))return null}return null},function(t){var n,r;if(!t.matchString("["))return null;n=[],t.allowWhitespace();if(t.matchString("]"))return{v:n};while(r=t.read()){n.push(r.v),t.allowWhitespace();if(t.matchString("]"))return{v:n};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),function(e,t){var n=new r(e,{values:t});return n.result}}(dt,Q,Y),Ot=function(e){return function(t){var n,r,i,s,o,u;if(typeof t=="string"){if(t.indexOf(":")===-1)return t.trim();t=[t]}n={},s=[],o=[];while(t.length){r=t.shift();if(typeof r=="string"){i=r.indexOf(":");if(i!==-1){i&&s.push(r.substr(0,i)),r.length>i+1&&(o[0]=r.substring(i+1));break}s.push(r)}else s.push(r)}return o=o.concat(t),o.length||typeof s!="string"?(n={n:s.length===1&&typeof s[0]=="string"?s[0]:s},o.length===1&&typeof o[0]=="string"?(u=e("["+o[0]+"]"),n.a=u?u.value:o[0].trim()):n.d=o):n=s,n}}(At),Mt=function(e,t,n,r,i,s,o,u){function m(n){var r,i,s,m,g,y,b,w,E,S,x,T;r=n.pos,i=n.getLinePos();if(n.inside)return null;if(!n.matchString("<"))return null;if(n.nextChar()==="/")return null;s={t:e.ELEMENT},n.includeLinePositions&&(s.p=i.toJSON()),n.matchString("!")&&(s.y=1),s.e=n.matchPattern(a);if(!s.e)return null;f.test(n.nextChar())||n.error("Illegal tag name"),b=function(e,t){var r=t.n||t;h.test(r)&&(n.pos-=r.length,n.error("Cannot use reserved event names (change, reset, teardown, update)")),s.v[e]=t};while(w=o(n))if(g=p[w.name])s[g]=u(w.value);else if(y=c.exec(w.name))s.v||(s.v={}),E=u(w.value),b(y[1],E);else if(!n.sanitizeEventAttributes||!l.test(w.name))s.a||(s.a={}),s.a[w.name]=w.value||0;n.allowWhitespace(),n.matchString("/")&&(S=!0);if(!n.matchString(">"))return null;m=s.e.toLowerCase();if(!S&&!t.test(s.e)){if(m==="script"||m==="style")n.inside=m;x=[];while(T=n.read(v)){if(T.t===e.CLOSING)break;if(T.t===e.CLOSING_TAG)break;x.push(T)}x.length&&(s.f=x)}return n.inside=null,n.sanitizeElements&&n.sanitizeElements.indexOf(m)!==-1?d:s}var a=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,f=/^[\s\n\/>]/,l=/^on/,c=/^on-([a-zA-Z$_][a-zA-Z$_0-9\-]+)$/,h=/^(?:change|reset|teardown|update)$/,p={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},d={exclude:!0},v;return v=[n,r,m,i,s],m}(U,xt,Et,St,Ct,kt,Lt,Ot),_t=function(){var e=/^[ \t\f\r\n]+/,t=/[ \t\f\r\n]+$/;return function(n,r,i){var s;r&&(s=n[0],typeof s=="string"&&(s=s.replace(e,""),s?n[0]=s:n.shift())),i&&(s=n[n.length-1],typeof s=="string"&&(s=s.replace(t,""),s?n[n.length-1]=s:n.pop()))}}(),Dt=function(e){function r(e){return typeof e=="string"}function i(t){return t.t===e.COMMENT||t.t===e.DELIMCHANGE}function s(t){return(t.t===e.SECTION||t.t===e.INVERTED)&&t.f}var t=/^\s*\r?\n/,n=/\r?\n\s*$/;return function(e){var o,u,a,f,l;for(o=1;o<e.length;o+=1)u=e[o],a=e[o-1],f=e[o-2],r(u)&&i(a)&&r(f)&&n.test(f)&&t.test(u)&&(e[o-2]=f.replace(n,"\n"),e[o]=u.replace(t,"")),s(u)&&r(a)&&n.test(a)&&r(u.f[0])&&t.test(u.f[0])&&(e[o-1]=a.replace(n,"\n"),u.f[0]=u.f[0].replace(t,"")),r(u)&&s(a)&&(l=a.f[a.f.length-1],r(l)&&n.test(l)&&t.test(u)&&(a.f[a.f.length-1]=l.replace(n,"\n"),e[o]=u.replace(t,"")));return e}}(U),Pt=function(e,t,n,r,i,s,o,u){function m(t,n,r,i,s,a){var f,c,h,g,y,b,w,E,S;u(t),f=t.length;while(f--)c=t[f],c.exclude?t.splice(f,1):n&&c.t===e.COMMENT&&t.splice(f,1);o(t,i,s),f=t.length;while(f--){c=t[f];if(c.f){y=r||c.t===e.ELEMENT&&p.test(c.e);if(!y){h=t[f-1],g=t[f+1];if(!h||typeof h=="string"&&v.test(h))b=!0;if(!g||typeof g=="string"&&d.test(g))w=!0}m(c.f,n,y,b,w,a),c.l&&(m(c.l,n,r,b,w,a),a&&(E={t:4,n:e.SECTION_UNLESS,f:c.l},c.r&&(E.r=c.r),c.x&&(E.x=c.x),c.rx&&(E.rx=c.rx),t.splice(f+1,0,E),delete c.l))}if(c.a)for(S in c.a)c.a.hasOwnProperty(S)&&typeof c.a[S]!="string"&&m(c.a[S],n,r,a)}f=t.length;while(f--)typeof t[f]=="string"&&(typeof t[f+1]=="string"&&(t[f]=t[f]+t[f+1],t.splice(f+1,1)),r||(t[f]=t[f].replace(l," ")),t[f]===""&&t.splice(f,1))}var a,f,l=/[ \t\f\r\n]+/g,c=/<!--\s*\{\{\s*>\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,h=/<!--\s*\{\{\s*\/\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*}\}\s*-->/,p=/^(?:pre|script|style|textarea)$/i,d=/^\s+/,v=/\s+$/;return a=t.extend({init:function(e,t){this.delimiters=t.delimiters||["{{","}}"],this.tripleDelimiters=t.tripleDelimiters||["{{{","}}}"],this.staticDelimiters=t.staticDelimiters||["[[","]]"],this.staticTripleDelimiters=t.staticTripleDelimiters||["[[[","]]]"],this.sectionDepth=0,this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1},t.sanitize===!0&&(t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.sanitizeElements=t.sanitize&&t.sanitize.elements,this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes,this.includeLinePositions=t.includeLinePositions},postProcess:function(e,t){return this.sectionDepth>0&&this.error("A section was left open"),m(e,t.stripComments!==!1,t.preserveWhitespace,!t.preserveWhitespace,!t.preserveWhitespace,t.rewriteElse!==!1),e},converters:[n,r,i,s]}),f=function(e){var t=arguments[1];t===void 0&&(t={});var n,r,i,s,o,u;n={v:1};if(c.test(e)){r=e,e="";while(o=c.exec(r)){s=o[1],e+=r.substr(0,o.index),r=r.substring(o.index+o[0].length),u=h.exec(r);if(!u||u[1]!==s)throw new Error("Inline partials must have a closing delimiter, and cannot be nested");(i||(i={}))[s]=(new a(r.substr(0,u.index),t)).result,r=r.substring(u.index+u[0].length)}n.p=i}return n.t=(new a(e,t)).result,n},f}(U,dt,Et,St,Mt,Ct,_t,Dt),Ht=function(){return function(t,n){var r=t.map(n);return t.forEach(function(e,t){r[e]=r[t]}),r}}(bt),Bt=function(e){var t,n;return t=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters"],n=e(t,function(e){return e}),n}(Ht),jt=function(e,t,n,r,i){function o(e){var t=r(s);return t.parse=function(t,n){return u(t,n||e)},t}function u(t,r){if(!n)throw new Error(e.missingParser);return n(t,r||this.options)}function a(e,n){var r;if(!t){if(n&&n.noThrow)return;throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}f(e)&&(e=e.substring(1));if(!(r=document.getElementById(e))){if(n&&n.noThrow)return;throw new Error("Could not find template element with id #"+e)}return r.innerHTML}function f(e){return e.charAt(0)==="#"}function l(e){return typeof e!="string"}function c(e){return e.defaults&&(e=e.defaults),i.reduce(function(t,n){return t[n]=e[n],t},{})}var s={parse:u,fromId:a,isHashedId:f,isParsed:l,getParseOptions:c,createHelper:o};return s}(R,C,Pt,z,Bt),Ft=function(e,t){function r(e){var t=e._config.template,n;if(!t||!t.fn)return;n=i(e,t.fn);if(n!==t.result)return t.result=n,n=s(n,e),n}function i(t,n){var r=e.createHelper(e.getParseOptions(t));return n.call(t,t.data,r)}function s(n,r){if(typeof n=="string")n[0]==="#"&&(n=e.fromId(n)),n=t(n,e.getParseOptions(r));else if(n.v!==1)throw new Error("Mismatched template version! Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return n}function o(e,t,n){if(!t)return;for(var r in t)if(n||!e.hasOwnProperty(r))e[r]=t[r]}var n={name:"template",extend:function(t,n,r){var i;"template"in r&&(i=r.template,typeof i=="function"?n.template=i:n.template=s(i,n))},init:function(t,n,r){var u,a;u="template"in r?r.template:t.prototype.template,typeof u=="function"&&(a=u,u=i(n,a),n._config.template={fn:a,result:u}),u=s(u,n),n.template=u.t,u.p&&o(n.partials,u.p)},reset:function(e){var t=r(e),n;if(t)return n=s(t,e),e.template=n.t,o(e.partials,n.p,!0),!0}};return n}(jt,Pt),It=function(e){function t(e,t){this.name=e,this.useDefaults=t}function n(e,t){var r,i;if(r=t(e))return r;if(!e.isolated&&(i=e._parent))return n(i,t)}return t.prototype={constructor:t,extend:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,this.useDefaults?t:t.constructor,n)},init:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,t,n)},configure:function(t,n,r){var i=this.name,s=r[i],o;o=e(t[i]);for(var u in s)o[u]=s[u];n[i]=o},reset:function(e){var t=e[this.name],n=!1;return Object.keys(t).forEach(function(e){var r=t[e];r._fn&&(r._fn.isOwner?t[e]=r._fn:delete t[e],n=!0)}),n},findOwner:function(e,t){return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e.constructor,t)},findConstructor:function(e,t){if(!e)return;return e[this.name].hasOwnProperty(t)?e:this.findConstructor(e._parent,t)},find:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]})},findInstance:function(e,t){var r=this;return n(e,function(e){return e[r.name][t]?e:void 0})}},t}(z,bt),qt=function(e,t){var n=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],r=e(n,function(e){return new t(e,e==="computed")});return r}(Ht,It),Rt=function(){},Ut=function(e){function t(t,n){var r;if(n in t){var i=t[n];typeof i=="function"?r=i:r=function(){return i}}else r=e;return r}return function(n,r,i){if(!/_super/.test(i))return i;var s=function(){var n=t(s._parent,r),o="_super"in this,u=this._super,a;return this._super=n,a=i.apply(this,arguments),o?this._super=u:delete this._super,a};return s._parent=n,s._method=i,s}}(Rt),zt=function(e,t){function n(t,n,i){if(n in t){if(i in t)throw new Error(r(n,i,!0));e(r(n,i)),t[i]=t[n]}}function r(e,t,n){return"options."+e+" has been deprecated in favour of options."+t+"."+(n?" You cannot specify both options, please use options."+t+".":"")}function i(e){n(e,"eventDefinitions","events")}function s(e){t(e.adaptors)&&n(e,"adaptors","adapt")}return function(t){i(t),s(t)}}(B,u),Wt=function(e,t,n,r,i,s,o,u){function h(e,t,n,r,i){a[t][e](n,r,i)}function p(e,t,r,i){u(i),h(e,"data",t,r,i),l.parseOptions.forEach(function(e){e in i&&(r[e]=i[e])});for(var s in i)if(s in n&&!(s in l.parseOptions)&&!(s in a)){var f=i[s];r[s]=typeof f=="function"?o(t.prototype,s,f):f}l.registries.forEach(function(n){n[e](t,r,i)}),h(e,"template",t,r,i),h(e,"css",t,r,i)}var a,f,l;a={data:t,template:r,css:e},f=Object.keys(n).filter(function(e){return!s[e]&&!a[e]&&!i[e]}),l=[].concat(a.data,i,f,s,a.template,a.css);for(var c in a)l[c]=a[c];return l.keys=Object.keys(n).concat(s.map(function(e){return e.name})).concat(["css"]),l.parseOptions=i,l.registries=s,l.extend=function(e,t,n){p("extend",e,t,n)},l.init=function(e,t,n){p("init",e,t,n),t._config&&(t._config.options=n)},l.reset=function(e){return l.filter(function(t){return t.reset&&t.reset(e)}).map(function(e){return e.name})},l}(F,q,r,Ft,Bt,qt,Ut,zt),Xt=function(e,t,n,r){function s(e){return function(){return e}}var i=function(e,i,o,u){if(e===i)return s(i);if(u){var a=r.registries.interpolators.find(o,u);if(a)return a(e,i)||s(i);t('Missing "'+u+'" interpolator. You may need to download a plugin from [TODO]')}return n.number(e,i)||n.array(e,i)||n.object(e,i)||n.cssLength(e,i)||s(i)};return e.interpolate=i,i}(s,B,l,Wt),Vt=function(e,t,n){var r=function(e){var t;this.startTime=Date.now();for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.interpolator=n(this.from,this.to,this.root,this.interpolator),this.running=!0};return r.prototype={tick:function(){var n,r,i,s,o,u;return u=this.keypath,this.running?(s=Date.now(),n=s-this.startTime,n>=this.duration?(u!==null&&(t.start(this.root),this.root.viewmodel.set(u,this.to),t.end()),this.step&&this.step(1,this.to),this.complete(this.to),o=this.root._animations.indexOf(this),o===-1&&e("Animation was not found"),this.root._animations.splice(o,1),this.running=!1,!1):(r=this.easing?this.easing(n/this.duration):n/this.duration,u!==null&&(i=this.interpolator(r),t.start(this.root),this.root.viewmodel.set(u,i),t.end()),this.step&&this.step(r,i),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),t===-1&&e("Animation was not found"),this.root._animations.splice(t,1)}},r}(B,w,Xt),$t=function(e,t,n,r,i){function u(t,s,u,a){var f,l,c,h;return s&&(s=n(s)),s!==null&&(h=t.viewmodel.get(s)),r.abort(s,t),e(h,u)?(a.complete&&a.complete(a.to),o):(a.easing&&(typeof a.easing=="function"?f=a.easing:f=t.easing[a.easing],typeof f!="function"&&(f=null)),l=a.duration===undefined?400:a.duration,c=new i({keypath:s,from:h,to:u,root:t,duration:l,easing:f,interpolator:a.interpolator,step:a.step,complete:a.complete}),r.add(c),t._animations.push(c),c)}var s=function(){},o={stop:s};return function(n,r,i){var o,a,f,l,c,h,p,d,v,m,g,y,b,w;o=new t(function(e){a=e});if(typeof n=="object"){i=r||{},h=i.easing,p=i.duration,c=[],d=i.step,v=i.complete;if(d||v)g={},i.step=null,i.complete=null,m=function(e){return function(t,n){g[e]=n}};for(f in n)if(n.hasOwnProperty(f)){if(d||v)y=m(f),i={easing:h,duration:p},d&&(i.step=y);i.complete=v?y:s,c.push(u(this,f,n[f],i))}if(d||v)w={easing:h,duration:p},d&&(w.step=function(e){d(e,g)}),v&&o.then(function(e){v(e,g)}),w.complete=a,b=u(this,null,null,w),c.push(b);return{stop:function(){var e;while(e=c.pop())e.stop();b&&b.stop()}}}return i=i||{},i.complete&&o.then(i.complete),i.complete=a,l=u(this,n,r,i),o.stop=function(){l.stop()},o}}(m,p,M,H,Vt),Jt=function(e){return function(){return this.el&&e(this.el.__ractive_instances__,this),this.fragment.detach()}}(h),Kt=function(t){return this.el?this.fragment.find(t):null},Qt=function(e,t,n){var r,i,s,o,u,a,f,l;if(!e)r=null;else{i=n("div"),s=["matches","matchesSelector"],l=function(e){return function(t,n){return t[e](n)}},a=s.length;while(a--&&!r){o=s[a];if(i[o])r=l(o);else{f=t.length;while(f--){u=t[a]+o.substr(0,1).toUpperCase()+o.substring(1);if(i[u]){r=l(u);break}}}}r||(r=function(e,t){var n,r,s;r=e.parentNode,r||(i.innerHTML="",r=i,e=e.cloneNode(),i.appendChild(e)),n=r.querySelectorAll(t),s=n.length;while(s--)if(n[s]===e)return!0;return!1})}return r}(C,_,N),Gt=function(e){return function(t,n){var r=this._isComponentQuery?!this.selector||t.name===this.selector:e(t.node,this.selector);if(r)return this.push(t.node||t.instance),n||this._makeDirty(),!0}}(Qt),Yt=function(){var e,t,n;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),n!==-1&&(e.splice(n,1),e[t]=null)},Zt=function(){function e(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner}function t(t){var n,r;n=[t],r=e(t);while(r)n.push(r),r=e(r);return n}return function(e,n){var r,i,s,o,u,a,f,l,c,h;r=t(e.component||e._ractive.proxy),i=t(n.component||n._ractive.proxy),s=r[r.length-1],o=i[i.length-1];while(s&&s===o)r.pop(),i.pop(),u=s,s=r[r.length-1],o=i[i.length-1];s=s.component||s,o=o.component||o,c=s.parentFragment,h=o.parentFragment;if(c===h)return a=c.items.indexOf(s),f=h.items.indexOf(o),a-f||r.length-i.length;if(l=u.fragments)return a=l.indexOf(c),f=l.indexOf(h),a-f||r.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")}}(),en=function(e){return function(t,n){var r;return t.compareDocumentPosition?(r=t.compareDocumentPosition(n),r&2?1:-1):e(t,n)}}(Zt),tn=function(e,t){return function(){this.sort(this._isComponentQuery?t:e),this._dirty=!1}}(en,Zt),nn=function(e){return function(){var t=this;this._dirty||(this._dirty=!0,e.scheduleTask(function(){t._sort()}))}}(w),rn=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);t!==-1&&this.splice(t,1)},sn=function(e,t,n,r,i,s){return function(u,a,f,l){var c=[];return e(c,{selector:{value:a},live:{value:f},_isComponentQuery:{value:l},_test:{value:t}}),f?(e(c,{cancel:{value:n},_root:{value:u},_sort:{value:r},_makeDirty:{value:i},_remove:{value:s},_dirty:{value:!1,writable:!0}}),c):c}}(L,Gt,Yt,tn,nn,rn),on=function(e){return function(n,r){var i,s;return this.el?(r=r||{},i=this._liveQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!1),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAll(n,s),s)):[]}}(sn),un=function(e){return function(n,r){var i,s;return r=r||{},i=this._liveComponentQueries,(s=i[n])?r&&r.live?s:s.slice():(s=e(this,n,!!r.live,!0),s.live&&(i.push(n),i["_"+n]=s),this.fragment.findAllComponents(n,s),s)}}(sn),an=function(t){return this.fragment.findComponent(t)},fn=function(t){var n,r,i,s=this._subs[t];if(!s)return;n=Array.prototype.slice.call(arguments,1);for(r=0,i=s.length;r<i;r+=1)s[r].apply(this,n)},ln=function(e){var t={capture:!0};return function(r){return r=e(r),this.viewmodel.get(r,t)}}(M),cn=function(t){var n;if(!t||typeof t=="boolean")return;if(typeof window=="undefined"||!document||!t)return null;if(t.nodeType)return t;if(typeof t=="string"){n=document.getElementById(t),!n&&document.querySelector&&(n=document.querySelector(t));if(n&&n.nodeType)return n}return t[0]&&t[0].nodeType?t[0]:null},hn=function(e){return function(n,r){if(!this.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");n=e(n),r=e(r)||null;if(!n)throw new Error("You must specify a valid target to insert into");n.insertBefore(this.detach(),r),this.el=n,(n.__ractive_instances__||(n.__ractive_instances__=[])).push(this)}}(cn),pn=function(e,t,n){return function(i,s,o){var u,a;return i=n(i),u=this.viewmodel.get(i),!t(u)||!t(s)?this.set(i,s,o&&o.complete):(a=e.start(this,!0),this.viewmodel.merge(i,u,s,o),e.end(),o&&o.complete&&a.then(o.complete),a)}}(w,u,M),dn=function(e,t){var n=function(e,t,n,r){this.root=e,this.keypath=t,this.callback=n,this.defer=r.defer,this.priority=0,this.context=r&&r.context?r.context:e};return n.prototype={init:function(e){this.value=this.root.viewmodel.get(this.keypath),e!==!1&&this.update()},setValue:function(n){var r=this;t(n,this.value)||(this.value=n,this.defer&&this.ready?e.scheduleTask(function(){return r.update()}):this.update())},update:function(){if(this.updating)return;this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath),this.oldValue=this.value,this.updating=!1}},n}(w,m),vn=function(e){return function(n,r){function u(t,r){var i,s,o;i=n.viewmodel.wrapped[r]?n.viewmodel.wrapped[r].get():n.get(r);for(s in i)i.hasOwnProperty(s)&&(s!=="_ractive"||!e(i))&&(o=r?r+"."+s:s,t.push(o));return t}function a(e){return function(t){return t?t+"."+e:e}}var i,s,o;i=r.split("."),o=[""];while(s=i.shift())s==="*"?o=o.reduce(u,[]):o[0]===""?o[0]=s:o=o.map(a(s));return o}}(u),mn=function(e){return function(n,r){var i,s;return i=e(n,r),s={},i.forEach(function(e){s[e]=n.get(e)}),s}}(vn),gn=function(e,t,n){var r,i=/\*/,s=Array.prototype.slice;return r=function(e,t,n,r){this.root=e,this.callback=n,this.defer=r.defer,this.keypath=t,this.regex=new RegExp("^"+t.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.priority="pattern",this.context=r&&r.context?r.context:e},r.prototype={init:function(e){var t,r;t=n(this.root,this.keypath);if(e!==!1)for(r in t)t.hasOwnProperty(r)&&this.update(r);else this.values=t},update:function(t){var r;if(i.test(t)){r=n(this.root,t);for(t in r)r.hasOwnProperty(t)&&this.update(t);return}if(this.root.viewmodel.implicitChanges[t])return;if(this.defer&&this.ready){e.addObserver(this.getProxy(t));return}this.reallyUpdate(t)},reallyUpdate:function(e){var n,r,i;n=this.root.viewmodel.get(e);if(this.updating){this.values[e]=n;return}this.updating=!0;if(!t(n,this.values[e])||!this.ready)r=s.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r),this.callback.apply(this.context,i),this.values[e]=n;this.updating=!1},getProxy:function(e){var t=this;return this.proxies[e]||(this.proxies[e]={update:function(){t.reallyUpdate(e)}}),this.proxies[e]}},r}(w,m,mn),yn=function(e,t,n){var r=/\*/,i={};return function(o,u,a,f){var l,c,h;return u=e(u),f=f||i,r.test(u)?(l=new n(o,u,a,f),o.viewmodel.patternObservers.push(l),c=!0):l=new t(o,u,a,f),o.viewmodel.register(u,l,c?"patternObservers":"observers"),l.init(f.init),l.ready=!0,{cancel:function(){var e;if(h)return;c&&(e=o.viewmodel.patternObservers.indexOf(l),o.viewmodel.patternObservers.splice(e,1),o.viewmodel.unregister(u,l,"patternObservers")),o.viewmodel.unregister(u,l,"observers"),h=!0}}}}(M,dn,gn),bn=function(e,t){return function(r,i,s){var o,u,a,f;if(e(r)){s=i,u=r,o=[];for(r in u)u.hasOwnProperty(r)&&(i=u[r],o.push(this.observe(r,i,s)));return{cancel:function(){while(o.length)o.pop().cancel()}}}if(typeof r=="function")return s=i,i=r,r="",t(this,r,i,s);a=r.split(" ");if(a.length===1)return t(this,r,i,s);o=[],f=a.length;while(f--)r=a[f],r&&o.push(t(this,r,i,s));return{cancel:function(){while(o.length)o.pop().cancel()}}}}(a,yn),wn=function(e){return e.trim()},En=function(e){return e!==""},Sn=function(e,t){return function(r,i){var s=this,o;if(!r)for(r in this._subs)delete this._subs[r];else o=r.split(" ").map(e).filter(t),o.forEach(function(e){var t,n;if(t=s._subs[e])i?(n=t.indexOf(i),n!==-1&&t.splice(n,1)):s._subs[e]=[]});return this}}(wn,En),xn=function(e,t){return function(r,i){var s=this,o=this,u,a,f;if(typeof r=="object"){u=[];for(a in r)r.hasOwnProperty(a)&&u.push(this.on(a,r[a]));return{cancel:function(){var e;while(e=u.pop())e.cancel()}}}return f=r.split(" ").map(e).filter(t),f.forEach(function(e){(s._subs[e]||(s._subs[e]=[])).push(i)}),{cancel:function(){o.off(r,i)}}}}(wn,En),Tn=function(e,t,n){switch(t){case"splice":return n;case"sort":case"reverse":return null;case"pop":if(e.length)return[-1];return null;case"push":return[e.length,0].concat(n);case"shift":return[0,1];case"unshift":return[0,0].concat(n)}},Nn=function(e,t){var n,r,i,s,o,u;return t?(n=+(t[0]<0?e.length+t[0]:t[0]),s=Math.max(0,t.length-2),o=t[1]!==undefined?t[1]:e.length-n,o=Math.min(o,e.length-n),u=s-o,i=e.length+u,u?r=Math.max(e.length,i):r=n+s,{rangeStart:n,rangeEnd:r,balance:u,added:s,removed:o}):null},Cn=function(e,t,n,r){var i=Array.prototype;return function(s){return function(o){var u=Array.prototype.slice,a=u.call(arguments,1),f,l,c,h;f=this.get(o);if(!e(f))throw new Error("Called ractive."+s+"('"+o+"'), but '"+o+"' does not refer to an array");return l=n(f,s,a),c=r(f,l),i[s].apply(f,a),h=t.start(this,!0),c?this.viewmodel.splice(o,c):this.viewmodel.mark(o),t.end(),h}}}(u,w,Tn,Nn),kn=function(e){return e("pop")}(Cn),Ln=function(e){return e("push")}(Cn),An=function(e,t,n){var r,i,s,o,u,a,f,l="/* Ractive.js component styles */\n",c={},h=[];return t?(e.push(function(){s=e.runloop}),o=document.createElement("style"),o.type="text/css",u=document.getElementsByTagName("head")[0],f=!1,a=o.styleSheet,i=function(){var e;h.length?(e=l+h.join(" "),a?a.cssText=e:o.innerHTML=e,f||(u.appendChild(o),f=!0)):f&&(u.removeChild(o),f=!1)},r={add:function(e){if(!e.css)return;c[e._guid]||(c[e._guid]=0,h.push(e.css),s.scheduleTask(i)),c[e._guid]+=1},remove:function(e){if(!e.css)return;c[e._guid]-=1,c[e._guid]||(n(h,e.css),s.scheduleTask(i))}}):r=null,r}(s,C,h),On=function(e,t,n){function s(e){e.init&&e.init(e._config.options),o(e).forEach(s),r[e._guid]=null}function o(e){return r[e._guid]||(r[e._guid]=[])}var r={},i={};return function(u,a){var f=this,l,c;i[this._guid]=!0,l=e.start(this,!0);if(this.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");return u=n(u)||this.el,a=n(a)||this.anchor,this.el=u,this.anchor=a,this.constructor.css&&t.add(this.constructor),u&&((c=u.__ractive_instances__)?c.push(this):u.__ractive_instances__=[this],a?u.insertBefore(this.fragment.render(),a):u.appendChild(this.fragment.render())),this._hasInited||(this._hasInited=!0,!this._parent||!i[this._parent._guid]?s(this):o(this._parent).push(this)),i[this._guid]=!1,e.end(),this.rendered=!0,this.complete&&l.then(function(){return f.complete()}),l}}(w,An,cn),Mn=function(){this.dirtyValue=this.dirtyArgs=!0,this.inited&&this.owner.bubble&&this.owner.bubble()},_n=function(){var t;return this.items.length===1?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.detach())}),t)},Dn=function(t){var n,r,i,s;if(this.items){r=this.items.length;for(n=0;n<r;n+=1){i=this.items[n];if(i.find&&(s=i.find(t)))return s}return null}},Pn=function(t,n){var r,i,s;if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAll&&s.findAll(t,n)}return n},Hn=function(t,n){var r,i,s;if(this.items){i=this.items.length;for(r=0;r<i;r+=1)s=this.items[r],s.findAllComponents&&s.findAllComponents(t,n)}return n},Bn=function(t){var n,r,i,s;if(this.items){n=this.items.length;for(r=0;r<n;r+=1){i=this.items[r];if(i.findComponent&&(s=i.findComponent(t)))return s}return null}},jn=function(t){var n=t.index,r;return this.items[n+1]?r=this.items[n+1].firstNode():this.owner===this.root?this.owner.component?r=this.owner.component.findNextNode():r=null:r=this.owner.findNextNode(this),r},Fn=function(){return this.items&&this.items[0]?this.items[0].firstNode():null},In=function(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.el},qn=function(e){function n(e,t,r,i){return i=i||0,e.map(function(e){var s,o,u;return e.text?e.text:e.fragments?e.fragments.map(function(e){return n(e.items,t,r,i)}).join(""):(s=r+"-"+i++,(o=e.root.viewmodel.wrapped[e.keypath])?u=o.value:u=e.getValue(),t[s]=u,"${"+s+"}")}).join("")}var t={};return function(){var i=arguments[0];i===void 0&&(i=t);var s,o,u,a,f,l,c;return s=i.args,f=s?"argsList":"value",l=s?"dirtyArgs":"dirtyValue",this[l]&&(u=n(this.items,o={},this.root._guid),a=e(s?"["+u+"]":u,o),a?c=a.value:c=s?[this.toString()]:this.toString(),this[f]=c,this[l]=!1),this[f]}}(At),Rn=function(){var e=/</g,t=/>/g;return function(r){return r.replace(e,"&lt;").replace(t,"&gt;")}}(),Un=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t},zn=function(e){return function(){return e(this.node)}}(Un),Wn=function(e,t,n){var r=function(t){this.type=e.TEXT,this.text=t.template};return r.prototype={detach:n,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(e){return e?t(this.text):this.text},unrender:function(e){if(e)return this.detach()}},r}(U,Rn,zn),Xn=function(e){return function(){this.keypath?this.root.viewmodel.unregister(this.keypath,this):e.removeUnresolved(this),this.resolver&&this.resolver.teardown()}}(w),Vn=function(){return this.value},$n=function(e){var t=function(t,n,r,i){this.root=t,this.ref=n,this.parentFragment=r,this.resolve=i,e.addUnresolved(this)};return t.prototype={teardown:function(){e.removeUnresolved(this)}},t}(w),Jn=function(t,n){return t.substr(0,n.length+1)===n+"."},Kn=function(e){return function(n,r,i){if(n===r)return i;if(e(n,r))return n.replace(r+".",i+".")}}(Jn),Qn=function(e,t){function r(e){var n=t[e.message]||e.message||"";return i(n,e.args)}function i(e,t){return e.replace(/{([^{}]*)}/g,function(e,n){return t[n]})}var n={warn:function(e,t){if(!e.debug&&!t)return;this.logger(r(e),e.allowDuplicates)},error:function(e){this.errorOnly(e),e.debug||this.warn(e,!0)},errorOnly:function(e){e.debug&&this.critical(e)},critical:function(e){var t=e.err||new Error(r(e));this.thrower(t)},logger:e,thrower:function(e){throw e}};return n}(B,R),Gn=function(t,n,r){var i,s;i=n.length;while(i--)s=n[i],r.indexOf(s)===-1&&t.viewmodel.unregister(s,t,"computed");i=r.length;while(i--)s=r[i],n.indexOf(s)===-1&&t.viewmodel.register(s,t,"computed");t.dependencies=r.slice()},Yn=function(e,t,n,r){function o(e,t){var n,r;e=e.replace(/\$\{([0-9]+)\}/g,"_$1");if(s[e])return s[e];r=[];while(t--)r[t]="_"+t;return n=new Function(r.join(","),"return("+e+")"),s[e]=n,n}function u(e,t){var r,i;return e._noWrap?e:(i="__ractive_"+t._guid,r=e[i],r?r:/this/.test(e.toString())?(n(e,i,{value:e.bind(t)}),e[i]):(n(e,"__ractive_nowrap",{value:e}),e.__ractive_nowrap))}function a(e){return typeof e=="function"?e():e}var i,s={};return i=function(e,t,n,r,i,s){var a=this,f=e.viewmodel;a.root=e,a.viewmodel=f,a.uniqueString=n,a.keypath=t,a.priority=s,a.fn=o(r,i.length),a.explicitDependencies=[],a.dependencies=[],a.argumentGetters=i.map(function(t){var n,r;return t?t.indexRef?(r=t.value,r):(n=t.keypath,a.explicitDependencies.push(n),f.register(n,a,"computed"),function(){var t=f.get(n);return typeof t=="function"?u(t,e):t}):void 0})},i.prototype={wake:function(){this.awake=!0},sleep:function(){this.awake=!1},getValue:function(){var t,n,i;t=this.argumentGetters.map(a);if(this.updating)return;this.updating=!0,this.viewmodel.capture();try{n=this.fn.apply(null,t)}catch(s){this.root.debug&&e.warn({debug:this.root.debug,message:"evaluationError",args:{uniqueString:this.uniqueString,err:s.message||s}}),n=undefined}return i=this.viewmodel.release(),r(this,this.dependencies,i),this.updating=!1,n},update:function(){var e=this.getValue();return t(e,this.value)||(this.value=e,this.root.viewmodel.mark(this.keypath)),this},teardown:function(){var e=this;this.explicitDependencies.concat(this.dependencies).forEach(function(t){return e.viewmodel.unregister(t,e,"computed")}),this.root.viewmodel.evaluators[this.keypath]=null}},i}(Qn,m,k,Gn),Zn=function(e,t,n,r,i){function o(e,t){return e.replace(/\$\{([0-9]+)\}/g,function(e,n){var r=t[n];return r?r.indexRef?r.value:r.keypath:"undefined"})}function u(e){return"${"+e.replace(/[\.\[\]]/g,"-")+"}"}var s=function(r,i,s,o){var u=this,a,f,l;a=r.root,this.root=a,this.callback=o,this.owner=r,this.str=s.s,this.args=l=[],this.unresolved=[],this.pending=0,f=i.indexRefs;if(!s.r||!s.r.length){this.resolved=this.ready=!0,this.bubble();return}s.r.forEach(function(r,s){var o,c,h;if(f&&(o=f[r])!==undefined){l[s]={indexRef:r,value:o};return}if(c=t(a,r,i)){l[s]={keypath:c};return}l[s]=null,u.pending+=1,h=new n(a,r,i,function(t){u.resolve(s,t),e(u.unresolved,h)}),u.unresolved.push(h)}),this.ready=!0,this.bubble()};return s.prototype={bubble:function(){if(!this.ready)return;this.uniqueString=o(this.str,this.args),this.keypath=u(this.uniqueString),this.createEvaluator(),this.callback(this.keypath)},teardown:function(){var e;while(e=this.unresolved.pop())e.teardown()},resolve:function(e,t){this.args[e]={keypath:t},this.bubble(),this.resolved=!--this.pending},createEvaluator:function(){var e=this.root.viewmodel.evaluators[this.keypath];e||(e=new r(this.root,this.keypath,this.uniqueString,this.str,this.args,this.owner.priority),this.root.viewmodel.evaluators[this.keypath]=e),e.update()},rebind:function(e,t,n,r){var s;this.args.forEach(function(o){var u;if(!o)return;o.keypath&&(u=i(o.keypath,n,r))?(o.keypath=u,s=!0):o.indexRef&&o.indexRef===e&&(o.value=t,s=!0)}),s&&this.bubble()}},s}(h,y,$n,Yn,Kn),er=function(e,t,n,r,i){var s=function(r,s,o){var u=this,a,f,l,c,h;u.resolver=s,u.root=s.root,u.viewmodel=s.root.viewmodel,typeof r=="string"?u.value=r:r.t===e.REFERENCE?(a=u.ref=r.n,(f=o.indexRefs)&&(l=f[a])!==undefined?(u.indexRef=a,u.value=l):(c=s.root,(h=t(c,a,o))?u.resolve(h):u.unresolved=new n(c,a,o,function(e){u.unresolved=null,u.resolve(e)}))):new i(s,o,r,function(e){u.resolve(e)})};return s.prototype={resolve:function(e){this.keypath=e,this.value=this.viewmodel.get(e),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(e,t,n,i){var s;if(e&&this.indexRef===e){if(t!==this.value)return this.value=t,!0}else if(this.keypath&&(s=r(this.keypath,n,i)))return this.unbind(),this.keypath=s,this.value=this.root.viewmodel.get(s),this.bind(),!0},setValue:function(e){this.value=e,this.resolver.bubble()},unbind:function(){this.keypath&&this.root.viewmodel.unregister(this.keypath,this)},teardown:function(){this.unbind(),this.unresolved&&this.unresolved.teardown()},forceResolution:function(){this.unresolved&&(this.unresolved.teardown(),this.unresolved=null,this.keypath=this.ref,this.value=this.viewmodel.get(this.ref),this.bind())}},s}(U,y,$n,Kn,Zn),tr=function(e,t,n){function i(e){return e.value}function s(e){return e!=undefined}function o(e){e.unbind()}var r=function(r,i,s){var o=this,u=this,a,f,l,c;c=r.parentFragment,u.root=a=r.root,u.mustache=r,u.priority=r.priority,u.ref=f=i.r,u.callback=s,u.unresolved=[],(l=e(a,f,c))?u.base=l:u.baseResolver=new t(a,f,c,function(e){u.base=e,u.baseResolver=null,u.bubble()}),u.members=i.m.map(function(e){return new n(e,o,c)}),u.ready=!0,u.bubble()};return r.prototype={getKeypath:function(){var e=this.members.map(i);if(!e.every(s)||this.baseResolver)return;return this.base+"."+e.join(".")},bubble:function(){if(!this.ready||this.baseResolver)return;this.callback(this.getKeypath())},teardown:function(){this.members.forEach(o)},rebind:function(e,t,n,r){var i;this.members.forEach(function(s){s.rebind(e,t,n,r)&&(i=!0)}),i&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=this.ref,this.baseResolver.teardown(),this.baseResolver=null),this.members.forEach(function(e){return e.forceResolution()}),this.bubble()}},r}(y,$n,er),nr=function(e,t,n,r,i){return function(o,u){function d(e){var t=o.keypath;e!==t&&(o.resolve(e),t!==undefined&&o.fragments&&o.fragments.forEach(function(n){n.rebind(null,null,t,e)}))}var a,f,l,c,h,p;h=u.parentFragment,p=u.template,o.root=h.root,o.parentFragment=h,o.pElement=h.pElement,o.template=u.template,o.index=u.index||0,o.priority=h.priority,o.isStatic=u.template.s,o.type=u.template.t;if(a=p.r){l=h.indexRefs;if(l&&(c=l[a])!==undefined){o.indexRef=a,o.setValue(c);return}f=n(o.root,a,o.parentFragment),f!==undefined?o.resolve(f):(o.ref=a,t.addUnresolved(o))}u.template.x&&(o.resolver=new i(o,h,u.template.x,d)),u.template.rx&&(o.resolver=new r(o,u.template.rx,d)),o.template.n===e.SECTION_UNLESS&&!o.hasOwnProperty("value")&&o.setValue(undefined)}}(U,w,y,tr,Zn),rr=function(t){var n,r,i;this.keypath!==undefined&&(this.root.viewmodel.unregister(this.keypath,this),n=!0),this.keypath=t,t!==undefined&&(r=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this)),this.setValue(r),n&&(i=this.twowayBinding)&&i.rebound()},ir=function(e){return function(n,r,i,s){var o;this.fragments&&this.fragments.forEach(function(e){return e.rebind(n,r,i,s)}),this.resolver&&this.resolver.rebind(n,r,i,s),this.keypath?(o=e(this.keypath,i,s))&&this.resolve(o):n!==undefined&&this.indexRef===n&&this.setValue(r)}}(Kn),sr=function(e,t,n,r){return{getValue:e,init:t,resolve:n,rebind:r}}(Vn,nr,rr,ir),or=function(e,t,n,r,i,s,o){var u=function(t){this.type=e.INTERPOLATOR,s.init(this,t)};return u.prototype={update:function(){this.node.data=this.value==undefined?"":this.value},resolve:s.resolve,rebind:s.rebind,detach:o,unbind:i,render:function(){return this.node||(this.node=document.createTextNode(this.value!=undefined?this.value:"")),this.node},unrender:function(e){e&&r(this.node)},getValue:s.getValue,setValue:function(e){var n;if(n=this.root.viewmodel.wrapped[this.keypath])e=n.get();e!==this.value&&(this.value=e,this.parentFragment.bubble(),this.node&&t.addView(this))},firstNode:function(){return this.node},toString:function(e){var t=this.value!=undefined?""+this.value:"";return e?n(t):t}},u}(U,w,Rn,Un,Xn,sr,zn),ur=function(){this.parentFragment.bubble()},ar=function(){var t;return this.fragments.length===1?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)},fr=function(t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].find(t))return i;return null},lr=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAll(t,n)},cr=function(t,n){var r,i;i=this.fragments.length;for(r=0;r<i;r+=1)this.fragments[r].findAllComponents(t,n)},hr=function(t){var n,r,i;r=this.fragments.length;for(n=0;n<r;n+=1)if(i=this.fragments[n].findComponent(t))return i;return null},pr=function(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)},dr=function(){var t,n,r;if(t=this.fragments.length)for(n=0;n<t;n+=1)if(r=this.fragments[n].firstNode())return r;return this.parentFragment.findNextNode(this)},vr=function(e,t){var n;return t.push(function(){n=t.Fragment}),function(n){var r=this,i,s,o,u,a,f,l,c;if(this.unbound)return;i=this.parentFragment,a=[],n.forEach(function(t,n){var i,o,u,f;if(t===n){a[t]=r.fragments[n];return}i=r.fragments[n],s===undefined&&(s=n);if(t===-1){r.fragmentsToUnrender.push(i),i.unbind();return}o=t-n,u=r.keypath+"."+n,f=r.keypath+"."+t,i.rebind(r.template.i,t,u,f),a[t]=i}),u=this.root.get(this.keypath).length;if(s===undefined){if(this.length===u)return;s=this.length}this.length=this.fragments.length=u,e.addView(this),f={template:this.template.f,root:this.root,owner:this},this.template.i&&(f.indexRef=this.template.i);for(o=s;o<u;o+=1)(l=a[o])?this.docFrag.appendChild(l.detach(!1)):this.fragmentsToCreate.push(o),this.fragments[o]=l;c=i.findNextNode(this),this.parentFragment.getNode().insertBefore(this.docFrag,c)}}(w,s),mr=function(){var t;return t=this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,t},gr=function(e,t,n,r,i){function o(r,i){var s={template:r.template.f,root:r.root,pElement:r.parentFragment.pElement,owner:r};if(r.subtype)switch(r.subtype){case e.SECTION_IF:return l(r,i,!1,s);case e.SECTION_UNLESS:return l(r,i,!0,s);case e.SECTION_WITH:return f(r,s);case e.SECTION_EACH:if(n(i))return a(r,i,s)}return r.ordered=!!t(i),r.ordered?u(r,i,s):n(i)||typeof i=="function"?r.template.i?a(r,i,s):f(r,s):l(r,i,!1,s)}function u(e,t,n){var r,i,o;i=t.length;if(i===e.length)return!1;if(i<e.length)e.fragmentsToUnrender=e.fragments.splice(i,e.length-i),e.fragmentsToUnrender.forEach(c);else if(i>e.length)for(r=e.length;r<i;r+=1)n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),o=new s(n),e.fragmentsToRender.push(e.fragments[r]=o);return e.length=i,!0}function a(e,t,n){var r,i,o,u,a;o=e.hasKey||(e.hasKey={}),i=e.fragments.length;while(i--)u=e.fragments[i],u.index in t||(a=!0,u.unbind(),e.fragmentsToUnrender.push(u),e.fragments.splice(i,1),o[u.index]=!1);for(r in t)o[r]||(a=!0,n.context=e.keypath+"."+r,n.index=r,e.template.i&&(n.indexRef=e.template.i),u=new s(n),e.fragmentsToRender.push(u),e.fragments.push(u),o[r]=!0);return e.length=e.fragments.length,a}function f(e,t){var n;if(!e.length)return t.context=e.keypath,t.index=0,n=new s(t),e.fragmentsToRender.push(e.fragments[0]=n),e.length=1,!0}function l(e,n,r,i){var o,u,a;u=t(n)&&n.length===0,r?o=u||!n:o=n&&!u;if(o){if(!e.length)return i.index=0,a=new s(i),e.fragmentsToRender.push(e.fragments[0]=a),e.length=1,!0;if(e.length>1)return e.fragmentsToUnrender=e.fragments.splice(1),e.fragmentsToUnrender.forEach(c),!0}else if(e.length)return e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length),e.fragmentsToUnrender.forEach(c),e.length=0,!0}function c(e){e.unbind()}var s;return i.push(function(){s=i.Fragment}),function(t){var n=this,i,u;if(this.updating)return;this.updating=!0;if(i=this.root.viewmodel.wrapped[this.keypath])t=i.get();this.fragmentsToCreate.length?(u={template:this.template.f,root:this.root,pElement:this.pElement,owner:this,indexRef:this.template.i},this.fragmentsToCreate.forEach(function(e){var t;u.context=n.keypath+"."+e,u.index=e,t=new s(u),n.fragmentsToRender.push(n.fragments[e]=t)}),this.fragmentsToCreate.length=0):o(this,t)&&(this.bubble(),this.rendered&&r.addView(this)),this.value=t,this.updating=!1}}(U,u,a,w,s),yr=function(e,t){function r(e){e.unbind()}function i(e,t){var n=[],r;for(r=e;r<t;r+=1)n.push(r);return n}function s(e,t,n,r){var i,s,o,u,a;o=e.template.i;for(i=t;i<n;i+=1)s=e.fragments[i],u=e.keypath+"."+(i-r),a=e.keypath+"."+i,s.index=i,s.rebind(o,i,u,a)}var n;return t.push(function(){n=t.Fragment}),function(n){var o=this,u,a,f,l,c;if(this.unbound)return;u=n.balance;if(!u)return;e.addView(o),a=n.rangeStart,o.length+=u;if(u<0){o.fragmentsToUnrender=o.fragments.splice(a,-u),o.fragmentsToUnrender.forEach(r),s(o,a,o.length,u);return}f=a+n.removed,l=a+n.added,c=[f,0],c.length+=u,o.fragments.splice.apply(o.fragments,c),s(o,l,o.length,u),o.fragmentsToCreate=i(f,l)}}(w,s),br=function(t){var n,r,i;n="",r=0,i=this.length;for(r=0;r<i;r+=1)n+=this.fragments[r].toString(t);return n},wr=function(e){function t(e){e.unbind()}return function(){this.fragments.forEach(t),e.call(this),this.length=0,this.unbound=!0}}(Xn),Er=function(){function e(e){e.unrender(!0)}function t(e){e.unrender(!1)}return function(r){this.fragments.forEach(r?e:t)}}(),Sr=function(){var t,n,r,i,s;while(t=this.fragmentsToUnrender.pop())t.unrender(!0);if(!this.fragmentsToRender.length)return;this.rendered&&(s=this.parentFragment.getNode());while(t=this.fragmentsToRender.shift())n=t.render(),this.docFrag.appendChild(n),this.rendered&&this.ordered&&(r=this.fragments[t.index+1],r&&r.rendered&&s.insertBefore(this.docFrag,r.firstNode()||null));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),s.insertBefore(this.docFrag,i))},xr=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=function(n){this.type=e.SECTION,this.subtype=n.template.n,this.inverted=this.subtype===e.SECTION_UNLESS,this.pElement=n.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],this.length=0,t.init(this,n)};return y.prototype={bubble:n,detach:r,find:i,findAll:s,findAllComponents:o,findComponent:u,findNextNode:a,firstNode:f,getValue:t.getValue,merge:l,rebind:t.rebind,render:c,resolve:t.resolve,setValue:h,splice:p,toString:d,unbind:v,unrender:m,update:g},y}(U,sr,ur,ar,fr,lr,cr,hr,pr,dr,vr,mr,gr,yr,br,wr,Er,Sr),Tr=function(){var t,n;if(this.docFrag){t=this.nodes.length;for(n=0;n<t;n+=1)this.docFrag.appendChild(this.nodes[n]);return this.docFrag}},Nr=function(e){return function(n){var r,i,s,o;i=this.nodes.length;for(r=0;r<i;r+=1){s=this.nodes[r];if(s.nodeType!==1)continue;if(e(s,n))return s;if(o=s.querySelector(n))return o}return null}}(Qt),Cr=function(e){return function(n,r){var i,s,o,u,a,f;s=this.nodes.length;for(i=0;i<s;i+=1){o=this.nodes[i];if(o.nodeType!==1)continue;e(o,n)&&r.push(o);if(u=o.querySelectorAll(n)){a=u.length;for(f=0;f<a;f+=1)r.push(u[f])}}}}(Qt),kr=function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},Lr=function(e,t){function o(e){return n[e]||(n[e]=t(e))}var n={},r,i;try{t("table").innerHTML="foo"}catch(s){r=!0,i={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}return function(t,n,s){var u,a=[],f,l,c,h;if(t){r&&(f=i[n.tagName])?(u=o("DIV"),u.innerHTML=f[0]+t+f[1],u=u.querySelector(".x"),u.tagName==="SELECT"&&(l=u.options[u.selectedIndex])):n.namespaceURI===e.svg?(u=o("DIV"),u.innerHTML='<svg class="x">'+t+"</svg>",u=u.querySelector(".x")):(u=o(n.tagName),u.innerHTML=t);while(c=u.firstChild)a.push(c),s.appendChild(c);if(r&&n.tagName==="SELECT"){h=a.length;while(h--)a[h]!==l&&(a[h].selected=!1)}}return a}}(T,N),Ar=function(t){var n=[],r=t.length;while(r--)n[r]=t[r];return n},Or=function(e){function t(e){return e.selected}return function(r){var i,s,o;if(!r||r.name!=="select"||!r.binding)return;i=e(r.node.options).filter(t);if(r.getAttribute("multiple"))o=i.map(function(e){return e.value});else if(s=i[0])o=s.value;o!==undefined&&r.binding.setValue(o),r.bubble()}}(Ar),Mr=function(e,t){return function(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=e(this.value,this.parentFragment.getNode(),this.docFrag),t(this.pElement),this.rendered=!0,this.docFrag}}(Lr,Or),_r=function(e){return function(n){var r;if(r=this.root.viewmodel.wrapped[this.keypath])n=r.get();n!==this.value&&(this.value=n,this.parentFragment.bubble(),this.rendered&&e.addView(this))}}(w),Dr=function(){return this.value!=undefined?this.value:""},Pr=function(e){return function(n){this.rendered&&n&&(this.nodes.forEach(e),this.rendered=!1)}}(Un),Hr=function(e,t){return function(){var r,i;if(!this.rendered)return;while(this.nodes&&this.nodes.length)r=this.nodes.pop(),r.parentNode.removeChild(r);i=this.parentFragment.getNode(),this.nodes=e(this.value,i,this.docFrag),i.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),t(this.pElement)}}(Lr,Or),Br=function(e,t,n,r,i,s,o,u,a,f,l,c){var h=function(n){this.type=e.TRIPLE,t.init(this,n)};return h.prototype={detach:n,find:r,findAll:i,firstNode:s,getValue:t.getValue,rebind:t.rebind,render:o,resolve:t.resolve,setValue:u,toString:a,unbind:c,unrender:f,update:l},h}(U,sr,Tr,Nr,Cr,kr,Mr,_r,Dr,Pr,Hr,Xn),jr=function(){this.parentFragment.bubble()},Fr=function(){var t=this.node,n;if(t)return(n=t.parentNode)&&n.removeChild(t),t},Ir=function(e){return function(t){if(e(this.node,t))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(t)}}(Qt),qr=function(e,t){t._test(this,!0)&&t.live&&(this.liveQueries||(this.liveQueries=[])).push(t),this.fragment&&this.fragment.findAll(e,t)},Rr=function(e,t){this.fragment&&this.fragment.findAllComponents(e,t)},Ur=function(e){if(this.fragment)return this.fragment.findComponent(e)},zr=function(){return null},Wr=function(){return this.node},Xr=function(t){if(!this.attributes||!this.attributes[t])return;return this.attributes[t].value},Vr=function(){var e,t,n,r;return e="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),t="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),n=function(e){var t={},n=e.length;while(n--)t[e[n].toLowerCase()]=e[n];return t},r=n(e.concat(t)),function(e){var t=e.toLowerCase();return r[t]||t}}(),$r=function(e){return function(){var n=this.fragment.getValue();n!==this.value&&(this.value=n,this.name==="value"&&this.node&&(this.node._ractive.value=n),this.rendered&&e.addView(this))}}(w),Jr=function(e,t){return function(n,r){var i,s;i=r.indexOf(":");if(i!==-1){s=r.substr(0,i);if(s!=="xmlns"){r=r.substring(i+1),n.name=t(r),n.namespace=e[s.toLowerCase()];if(!n.namespace)throw'Unknown namespace ("'+s+'")';return}}n.name=n.element.namespace!==e.html?t(r):r}}(T,Vr),Kr=function(e){return function(n){var r=n.fragment.items;if(r.length!==1)return;if(r[0].type===e.INTERPOLATOR)return r[0]}}(U),Qr=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(n,r){var i;if(n.pNode&&!n.namespace&&(!r.pNode.namespaceURI||r.pNode.namespaceURI===e.html)){i=t[n.name]||n.name,r.pNode[i]!==undefined&&(n.propertyName=i);if(typeof r.pNode[i]=="boolean"||i==="value")n.useProperty=!0}}}(T),Gr=function(e,t,n,r,i){var s;return i.push(function(){s=i.Fragment}),function(o){this.type=e.ATTRIBUTE,this.element=o.element,this.root=o.root,t(this,o.name);if(!o.value||typeof o.value=="string"){this.value=o.value||!0;return}this.parentFragment=this.element.parentFragment,this.fragment=new s({template:o.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=n(this),this.isBindable=!!this.interpolator,r(this,o),this.ready=!0}}(U,Jr,Kr,Qr,s),Yr=function(t,n,r,i){this.fragment&&this.fragment.rebind(t,n,r,i)},Zr=function(e){var t={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return function(r){var i;this.node=r;if(!r.namespaceURI||r.namespaceURI===e.html){i=t[this.name]||this.name,r[i]!==undefined&&(this.propertyName=i);if(typeof r[i]=="boolean"||i==="value")this.useProperty=!0;i==="value"&&(this.useProperty=!0,r._ractive.value=this.value)}this.rendered=!0,this.update()}}(T),ei=function(){function e(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return function(){var n,r,i;n=this.name,r=this.value;if(n==="value"&&this.element.name==="select")return;return n==="name"&&this.element.name==="input"&&(i=this.interpolator)?"name={{"+(i.keypath||i.ref)+"}}":typeof r=="number"?n+'="'+r+'"':typeof r=="string"?n+'="'+e(r)+'"':r?n:""}}(),ti=function(){this.fragment&&this.fragment.unbind()},ni=function(){var t=this.value,n,r,i,s;if(!this.locked){this.node._ractive.value=t,n=this.node.options,s=n.length;while(s--){r=n[s],i=r._ractive?r._ractive.value:r.value;if(i==t){r.selected=!0;break}}}},ri=function(e){return function(){var n=this.value,r,i,s,o;e(n)||(n=[n]),r=this.node.options,i=r.length;while(i--)s=r[i],o=s._ractive?s._ractive.value:s.value,s.selected=n.indexOf(o)!==-1}}(u),ii=function(){var t=(n=this).node,n=n.value;t.checked=n==t._ractive.value},si=function(e){return function(){var n,r=this.node,i,s,o;n=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name");if(n&&!r.checked&&this.element.binding){s=this.element.binding.siblings;if(o=s.length){while(o--){i=s[o];if(!i.element.node)return;if(i.element.node.checked)return e.addViewmodel(i.root.viewmodel),i.handleChange()}e.addViewmodel(i.root.viewmodel),this.root.viewmodel.set(i.keypath,undefined)}}}}(w),oi=function(e){return function(){var n,r;n=this.node,r=this.value,e(r)?n.checked=r.indexOf(n._ractive.value)!==-1:n.checked=r==n._ractive.value}}(u),ui=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.className=n},ai=function(){var t,n;t=this.node,n=this.value,n!==undefined&&(this.root.nodes[n]=undefined),this.root.nodes[n]=t,t.id=n},fi=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),t.style.setAttribute("cssText",n)},li=function(){var t,n;t=this.node,n=this.value,n===undefined&&(n=""),this.locked||(t.innerHTML=n)},ci=function(){var t,n;t=this.node,n=this.value,t._ractive.value=n,this.locked||(t.value=n==undefined?"":n)},hi=function(){this.locked||(this.node[this.propertyName]=this.value)},pi=function(){var t,n,r;t=this.node,n=this.name,r=this.value,this.namespace?t.setAttributeNS(this.namespace,n,r):typeof r=="string"||typeof r=="number"?t.setAttribute(n,r):r?t.setAttribute(n,""):t.removeAttribute(n)},di=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return function(){var v,m,g,y,b;v=this.name,m=this.element,g=this.node,v==="id"?b=a:v==="value"?m.name==="select"&&v==="value"?b=g.multiple?r:n:m.name==="textarea"?b=c:g.getAttribute("contenteditable")?b=l:m.name==="input"&&(y=m.getAttribute("type"),y==="file"?b=t:y==="radio"&&m.binding&&m.binding.name==="name"?b=s:b=c):this.twoway&&v==="name"?g.type==="radio"?b=i:g.type==="checkbox"&&(b=o):v==="style"&&g.style.setAttribute?b=f:v!=="class"||!!g.namespaceURI&&g.namespaceURI!==e.html?this.useProperty&&(b=h):b=u,b||(b=p),this.update=b,this.update()}}(T,Rt,ni,ri,ii,si,oi,ui,ai,fi,li,ci,hi,pi),vi=function(e,t,n,r,i,s,o){var u=function(e){this.init(e)};return u.prototype={bubble:e,init:t,rebind:n,render:r,toString:i,unbind:s,update:o},u}($r,Gr,Yr,Zr,ei,ti,di),mi=function(e){return function(t,n){var r,i,s=[];for(r in n)n.hasOwnProperty(r)&&(i=new e({element:t,name:r,value:n[r],root:t.root}),s.push(s[r]=i));return s}}(vi),gi=function(e){var t=Array.prototype.slice,n=t.call(arguments,1),r,i;while(i=n.shift())for(r in i)i.hasOwnProperty(r)&&(e[r]=i[r]);return e},yi=function(e,t,n,r,i){var s=function(e){var n,r,i;this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],n=this.attribute.interpolator,n.twowayBinding=this;if(n.keypath&&n.keypath.substr==="${")return t("Two-way binding does not work with expressions: "+n.keypath),!1;n.keypath||(n.ref&&n.resolve(n.ref),n.resolver&&n.resolver.forceResolution()),this.keypath=r=n.keypath,this.root.viewmodel.get(r)===undefined&&this.getInitialValue&&(i=this.getInitialValue(),i!==undefined&&this.root.viewmodel.set(r,i))};return s.prototype={handleChange:function(){var t=this;e.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),e.scheduleTask(function(){return t.attribute.locked=!1}),e.end()},rebound:function(){var e,t,n;t=this.keypath,n=this.attribute.interpolator.keypath;if(t===n)return;i(this.root._twowayBindings[t],this),this.keypath=n,e=this.root._twowayBindings[n]||(this.root._twowayBindings[n]=[]),e.push(this)},unbind:function(){}},s.extend=function(e){var t=this,i;return i=function(e){s.call(this,e),this.init&&this.init()},i.prototype=n(t.prototype),r(i.prototype,e),i.extend=s.extend,i},s}(w,B,z,gi,h),bi=function(){this._ractive.binding.handleChange()},wi=function(e,t){var n=e.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1))},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1)},getValue:function(){return this.element.node.innerHTML}});return n}(yi,bi),Ei=function(){var e={};return function(n,r,i){var s=n+r+i;return e[s]||(e[s]=[])}}(),Si=function(e,t,n,r,i){var s=n.extend({name:"checked",init:function(){this.siblings=r(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var e=this.element.node;e.addEventListener("change",i,!1),e.attachEvent&&e.addEventListener("click",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,!1),e.removeEventListener("click",i,!1)},handleChange:function(){e.start(this.root),this.siblings.forEach(function(e){e.root.viewmodel.set(e.keypath,e.getValue())}),e.end()},getValue:function(){return this.element.node.checked},unbind:function(){t(this.siblings,this)}});return s}(w,h,yi,Ei,bi),xi=function(e,t,n,r){var i=t.extend({name:"name",init:function(){this.siblings=r(this.root._guid,"radioname",this.keypath),this.siblings.push(this),this.radioName=!0,this.attribute.twoway=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}",e.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),e.addEventListener("change",n,!1),e.attachEvent&&e.addEventListener("click",n,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",n,!1),e.removeEventListener("click",n,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){this.element.node.checked&&t.prototype.handleChange.call(this)},rebound:function(e,n,r,i){var s;t.prototype.rebound.call(this,e,n,r,i);if(s=this.element.node)s.name="{{"+this.keypath+"}}"},unbind:function(){e(this.siblings,this)}});return i}(h,yi,bi,Ei),Ti=function(e,t,n,r,i){function o(e){return e.isChecked}function u(e){return e.element.getAttribute("value")}var s=n.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,n,i;this.checkboxName=!0,this.siblings=r(this.root._guid,"checkboxes",this.keypath),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),i=this.siblings.noInitialValue,t=this.root.viewmodel.get(this.keypath),n=this.element.getAttribute("value"),i?(this.isChecked=this.element.getAttribute("checked"),this.isChecked&&t.push(n)):this.isChecked=e(t)?t.indexOf(n)!==-1:t===n},unbind:function(){t(this.siblings,this)},render:function(){var e=this.element.node;e.name="{{"+this.keypath+"}}",e.checked=this.isChecked,e.addEventListener("change",i,!1),e.attachEvent&&e.addEventListener("click",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",i,!1),e.removeEventListener("click",i,!1)},changed:function(){var e=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===e},handleChange:function(){this.isChecked=this.element.node.checked,n.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(o).map(u)}});return s}(u,h,yi,Ei,bi),Ni=function(e,t){var n=e.extend({name:"checked",render:function(){var e=this.element.node;e.addEventListener("change",t,!1),e.attachEvent&&e.addEventListener("click",t,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("click",t,!1)},getValue:function(){return this.element.node.checked}});return n}(yi,bi),Ci=function(e,t,n){var r=t.extend({getInitialValue:function(){var e=this.element.options,t,n;n=t=e.length;if(!t)return;while(n--)if(e[n].getAttribute("selected"))return e[n].getAttribute("value");while(++n<t)if(!e[n].getAttribute("disabled"))return e[n].getAttribute("value")},render:function(){this.element.node.addEventListener("change",n,!1)},unrender:function(){this.element.node.removeEventListener("change",n,!1)},setValue:function(t){e.addViewmodel(this.root.viewmodel),this.root.viewmodel.set(this.keypath,t)},getValue:function(){var e,t,n,r,i;e=this.element.node.options,n=e.length;for(t=0;t<n;t+=1){r=e[t];if(e[t].selected)return i=r._ractive?r._ractive.value:r.value,i}},forceUpdate:function(){var t=this,n=this.getValue();n!==undefined&&(this.attribute.locked=!0,e.addViewmodel(this.root.viewmodel),e.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))}});return r}(w,yi,bi),ki=function(e){return function(t,n){var r;if(!e(t)||!e(n))return!1;if(t.length!==n.length)return!1;r=t.length;while(r--)if(t[r]!==n[r])return!1;return!0}}(u),Li=function(e,t,n,r){var i=n.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;this.element.node.addEventListener("change",r,!1),e=this.root.viewmodel.get(this.keypath),e===undefined&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",r,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,r,i,s;e=[],t=this.element.node.options,r=t.length;for(n=0;n<r;n+=1)i=t[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,e.push(s));return e},handleChange:function(){var e,r,i;return e=this.attribute,r=e.value,i=this.getValue(),(r===undefined||!t(i,r))&&n.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,n=this.getValue();n!==undefined&&(this.attribute.locked=!0,e.addViewmodel(this.root.viewmodel),e.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,n))},updateModel:function(){(this.attribute.value===undefined||!this.attribute.value.length)&&this.root.viewmodel.set(this.keypath,this.initialValue)}});return i}(w,ki,Ci,bi),Ai=function(e,t){var n=e.extend({render:function(){this.element.node.addEventListener("change",t,!1)},unrender:function(){this.element.node.removeEventListener("change",t,!1)},getValue:function(){return this.element.node.files}});return n}(yi,bi),Oi=function(e,t){function i(){var e;t.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath,r),this.value=e==undefined?"":e}var n,r;return r={evaluateWrapped:!0},n=e.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var e=this.element.node;e.addEventListener("change",t,!1),this.root.lazy||(e.addEventListener("input",t,!1),e.attachEvent&&e.addEventListener("keyup",t,!1)),e.addEventListener("blur",i,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",t,!1),e.removeEventListener("input",t,!1),e.removeEventListener("keyup",t,!1),e.removeEventListener("blur",i,!1)}}),n}(yi,bi),Mi=function(e){return e.extend({getInitialValue:function(){return undefined},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?undefined:e}})}(Oi),_i=function(e,t,n,r,i,s,o,u,a,f,l){function c(e){return e&&e.isBindable}return function(p){var d=p.attributes,v,m,g,y;p.binding&&(p.binding.teardown(),p.binding=null),p.getAttribute("contenteditable")&&c(d.value)?m=t:p.name==="input"?(v=p.getAttribute("type"),v==="radio"||v==="checkbox"?(g=c(d.name),y=c(d.checked),g&&y&&e.error({message:"badRadioInputBinding"}),g?m=v==="radio"?r:i:y&&(m=v==="radio"?n:s)):v==="file"&&c(d.value)?m=a:c(d.value)&&(m=v==="number"||v==="range"?f:l)):p.name==="select"&&c(d.value)?m=p.getAttribute("multiple")?u:o:p.name==="textarea"&&c(d.value)&&(m=l);if(m)return new m(p)}}(Qn,wi,Si,xi,Ti,Ni,Ci,Li,Ai,Mi,Oi),Di=function(t){this.root.fire(this.action.toString().trim(),t)},Pi=function(e){function r(e){this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(this.params))}function i(e){var t=this.dynamicParams.getValue(n);typeof t=="string"&&(t=t.substr(1,t.length-2)),this.root.fire.apply(this.root,[this.action.toString().trim(),e].concat(t))}var t,n={args:!0};return e.push(function(){t=e.Fragment}),function(n,s,o){var u;this.element=n,this.root=n.root,this.name=s,this.proxies=[],u=o.n||o,typeof u!="string"&&(u=new t({template:u,root:this.root,owner:this.element})),this.action=u,o.d?(this.dynamicParams=new t({template:o.d,root:this.root,owner:this.element}),this.fire=i):o.a&&(this.params=o.a,this.fire=r)}}(s),Hi=function(t,n,r,i){typeof this.action!="string"&&this.action.rebind(t,n,r,i),this.dynamicParams&&this.dynamicParams.rebind(t,n,r,i)},Bi=function(t){var n,r;n=this._ractive,r=n.events[t.type],r.fire({node:this,original:t,index:n.index,keypath:n.keypath,context:n.root.get(n.keypath)})},ji=function(e,t,n){function i(e){return r[e]||(r[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath,t.context=n.root.get(n.keypath),n.events[e].fire(t)}),r[e]}var r={};return function(){var s=this.name,o;this.node=this.element.node,(o=t.registries.events.find(this.root,s))?this.custom=o(this.node,i(s)):(!("on"+s in this.node)&&!(window&&"on"+s in window)&&e('Missing "'+this.name+'" event. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#events'),this.node.addEventListener(s,n,!1)),this.node._ractive.events[s]=this}}(B,Wt,Bi),Fi=function(){typeof this.action!="string"&&this.action.teardown(),this.dynamicParams&&this.dynamicParams.teardown()},Ii=function(e){return function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,e,!1)}}(Bi),qi=function(e,t,n,r,i,s){var o=function(e,t,n){this.init(e,t,n)};return o.prototype={fire:e,init:t,rebind:n,render:r,teardown:i,unrender:s},o}(Di,Pi,Hi,ji,Fi,Ii),Ri=function(e){return function(t,n){var r,i,s,o,u=[];for(i in n)if(n.hasOwnProperty(i)){s=i.split("-"),r=s.length;while(r--)o=new e(t,s[r],n[i]),u.push(o)}return u}}(qi),Ui=function(e,t,n){var r,i,s;return t.push(function(){r=t.Fragment}),i={args:!0},s=function(t,s){var o=this,u,a,f;o.element=t,o.root=u=t.root,a=s.n||s,typeof a!="string"&&(f=new r({template:a,root:u,owner:t}),a=f.toString(),f.unbind()),s.a?o.params=s.a:s.d&&(o.fragment=new r({template:s.d,root:u,owner:t}),o.params=o.fragment.getValue(i),o.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getValue(i),o.ready&&o.update()}),o.fn=n.registries.decorators.find(u,a),o.fn||e.error({debug:u.debug,message:"missingPlugin",args:{plugin:"decorator",name:a}})},s.prototype={init:function(){var e=this,t,n,r;t=e.element.node,e.params?(r=[t].concat(e.params),n=e.fn.apply(e.root,r)):n=e.fn.call(e.root,t);if(!n||!n.teardown)throw new Error("Decorator definition must return an object with a teardown method");e.actual=n,e.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},teardown:function(e){this.actual.teardown(),!e&&this.fragment&&this.fragment.unbind()}},s}(Qn,s,Wt),zi=function(e){function t(e,t){var n=e.length;while(n--)if(e[n]==t)return!0}return function(r){var i,s,o,u,a;i=r.node;if(!i)return;u=e(i.options),s=r.getAttribute("value"),o=r.getAttribute("multiple"),s!==undefined?(u.forEach(function(e){var n,r;n=e._ractive?e._ractive.value:e.value,r=o?t(s,n):s==n,r&&(a=!0),e.selected=r}),a||(u[0]&&(u[0].selected=!0),r.binding&&r.binding.forceUpdate())):r.binding&&r.binding.forceUpdate()}}(Ar),Wi=function(e,t){return function(){var r=this;this.dirty||(this.dirty=!0,e.scheduleTask(function(){t(r),r.dirty=!1})),this.parentFragment.bubble()}}(w,zi),Xi=function(t){do if(t.name==="select")return t;while(t=t.parent)},Vi=function(e){return function(n,r){n.select=e(n.parent),n.select.options.push(n),r.a||(r.a={}),!r.a.value&&!r.a.hasOwnProperty("disabled")&&(r.a.value=r.f),"selected"in r.a&&n.select.getAttribute("value")!==undefined&&delete r.a.selected}}(Xi),$i=function(e,t,n,r,i,s,o,u,a){var f;return a.push(function(){f=a.Fragment}),function(l){var c,h,p,d,v;this.type=e.ELEMENT,c=this.parentFragment=l.parentFragment,h=this.template=l.template,this.parent=l.pElement||c.pElement,this.root=p=c.root,this.index=l.index,this.name=t(h.e),this.name==="option"&&u(this,h),this.name==="select"&&(this.options=[],this.bubble=o),this.attributes=n(this,h.a),h.f&&(this.fragment=new f({template:h.f,root:p,owner:this,pElement:this})),p.twoway&&(d=r(this,h.a))&&(this.binding=d,v=this.root._twowayBindings[d.keypath]||(this.root._twowayBindings[d.keypath]=[]),v.push(d)),h.v&&(this.eventHandlers=i(this,h.v)),h.o&&(this.decorator=new s(this,h.o)),this.intro=h.t0||h.t1,this.outro=h.t0||h.t2}}(U,Vr,mi,_i,Ri,Ui,Wi,Vi,s),Ji=function(e){return function(n,r){return n===r||e(n,r)}}(Jn),Ki=function(e,t){return function(r,i,s,o){var u=r[i];if(!u||e(u,o)||!e(u,s))return;r[i]=t(u,s,o)}}(Ji,Kn),Qi=function(e){return function(n,r,i,s){function l(e){e.rebind(n,r,i,s)}var o,u,a,f;this.attributes&&this.attributes.forEach(l),this.eventHandlers&&this.eventHandlers.forEach(l),this.fragment&&l(this.fragment);if(a=this.liveQueries){f=this.root,o=a.length;while(o--)a[o]._makeDirty()}this.node&&(u=this.node._ractive)&&(e(u,"keypath",i,s),n!=undefined&&(u.index[n]=r))}}(Ki),Gi=function(t){var n,r,i;((n=t.getAttribute("width"))||(r=t.getAttribute("height")))&&t.node.addEventListener("load",i=function(){n&&(t.node.width=n.value),r&&(t.node.height=r.value),t.node.removeEventListener("load",i,!1)},!1)},Yi=function(e,t,n){var r,i={};return n.push(function(){r=n.Fragment}),function(s,o,u){var a=this,f,l,c;a.element=s,a.root=f=s.root,a.isIntro=u,l=o.n||o,typeof l!="string"&&(c=new r({template:l,root:f,owner:s}),l=c.toString(),c.unbind()),a.name=l,o.a?a.params=o.a:o.d&&(c=new r({template:o.d,root:f,owner:s}),a.params=c.getValue(i),c.unbind()),a._fn=t.registries.transitions.find(f,l);if(!a._fn){e.error({debug:f.debug,message:"missingPlugin",args:{plugin:"transition",name:l}});return}}}(Qn,Wt,s),Zi=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},es=function(e,t,n,r){var i,s,o;return e?(s={},o=n("div").style,i=function(e){var n,i,u;e=r(e);if(!s[e])if(o[e]!==undefined)s[e]=e;else{u=e.charAt(0).toUpperCase()+e.substring(1),n=t.length;while(n--){i=t[n];if(o[i+u]!==undefined){s[e]=i+u;break}}}return s[e]}):i=null,i}(C,_,N,Zi),ts=function(e,t,n,r){var i,s;return t?(s=window.getComputedStyle||e.getComputedStyle,i=function(e){var t,i,o,u,a;t=s(this.node);if(typeof e=="string")return a=t[r(e)],a==="0px"&&(a=0),a;if(!n(e))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");i={},o=e.length;while(o--)u=e[o],a=t[r(u)],a==="0px"&&(a=0),i[u]=a;return i}):i=null,i}(bt,C,u,es),ns=function(e){return function(t,n){var r;if(typeof t=="string")this.node.style[e(t)]=n;else for(r in t)t.hasOwnProperty(r)&&(this.node.style[e(r)]=t[r]);return this}}(es),rs=function(e,t,n){function i(e){return e}var r=function(r){var s;this.duration=r.duration,this.step=r.step,this.complete=r.complete,typeof r.easing=="string"?(s=r.root.easing[r.easing],s||(e('Missing easing function ("'+r.easing+'"). You may need to download a plugin from [TODO]'),s=i)):typeof r.easing=="function"?s=r.easing:s=i,this.easing=s,this.start=t(),this.end=this.start+this.duration,this.running=!0,n.add(this)};return r.prototype={tick:function(e){var t,n;return this.running?e>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(t=e-this.start,n=this.easing(t/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}},r}(B,P,H),is=function(e){var t=new RegExp("^-(?:"+e.join("|")+")-");return function(e){return e.replace(t,"")}}(_),ss=function(e){var t=new RegExp("^(?:"+e.join("|")+")([A-Z])");return function(e){var n;return e?(t.test(e)&&(e="-"+e),n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),n):""}}(_),os=function(e,t,n,r,i,s,o,u,a){var f,l,c,h,p,d,v,m,g={},y={};return e?(l=n("div").style,function(){l.transition!==undefined?(c="transition",h="transitionend",p=!0):l.webkitTransition!==undefined?(c="webkitTransition",h="webkitTransitionEnd",p=!0):p=!1}(),c&&(d=c+"Duration",v=c+"Property",m=c+"TimingFunction"),f=function(e,n,f,l,c){setTimeout(function(){var b,w,E,S,x;S=function(){w&&E&&(e.root.fire(e.name+":end",e.node,e.isIntro),c())},b=(e.node.namespaceURI||"")+e.node.tagName,e.node.style[v]=l.map(o).map(a).join(","),e.node.style[m]=a(f.easing||"linear"),e.node.style[d]=f.duration/1e3+"s",x=function(t){var n;n=l.indexOf(r(u(t.propertyName))),n!==-1&&l.splice(n,1);if(l.length)return;e.node.removeEventListener(h,x,!1),E=!0,S()},e.node.addEventListener(h,x,!1),setTimeout(function(){var u=l.length,a,c,d,v=[],m,T;while(u--){m=l[u],a=b+m,p&&!y[a]&&(e.node.style[o(m)]=n[m],g[a]||(c=e.getStyle(m),g[a]=e.getStyle(m)!=n[m],y[a]=!g[a],y[a]&&(e.node.style[o(m)]=c)));if(!p||y[a])c===undefined&&(c=e.getStyle(m)),d=l.indexOf(m),d===-1?t("Something very strange happened with transitions. If you see this message, please let @RactiveJS know. Thanks!"):l.splice(d,1),T=/[^\d]*$/.exec(n[m])[0],v.push({name:o(m),interpolator:i(parseFloat(c),parseFloat(n[m])),suffix:T})}v.length?new s({root:e.root,duration:f.duration,easing:r(f.easing||""),step:function(t){var n,r;r=v.length;while(r--)n=v[r],e.node.style[n.name]=n.interpolator(t)+n.suffix},complete:function(){w=!0,S()}}):w=!0,l.length||(e.node.removeEventListener(h,x,!1),E=!0,S())},0)},f.delay||0)}):f=null,f}(C,B,N,Zi,Xt,rs,es,is,ss),us=function(e){function o(){s.hidden=document[t]}function u(){s.hidden=!0}function a(){s.hidden=!1}var t,n,r,i,s;if(typeof document!="undefined"){t="hidden",s={};if(t in document)r="";else{i=e.length;while(i--)n=e[i],t=n+"Hidden",t in document&&(r=n)}r!==undefined?(document.addEventListener(r+"visibilitychange",o),o()):("onfocusout"in document?(document.addEventListener("focusout",u),document.addEventListener("focusin",a)):(window.addEventListener("pagehide",u),window.addEventListener("blur",u),window.addEventListener("pageshow",a),window.addEventListener("focus",a)),s.hidden=!1)}return s}(_),as=function(e,t,n,r,i,s,o){var u,a,f;return t?(a=window.getComputedStyle||e.getComputedStyle,u=function(e,t,u,l){var c=this,h;if(o.hidden)return this.setStyle(e,t),f||(f=r.resolve());typeof e=="string"?(h={},h[e]=t):(h=e,l=u,u=t),u||(n('The "'+c.name+'" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340'),u=c,l=c.complete);var p=new r(function(e){var t,n,r,o,f,l,p;if(!u.duration){c.setStyle(h),e();return}t=Object.keys(h),n=[],r=a(c.node),f={},l=t.length;while(l--)p=t[l],o=r[i(p)],o==="0px"&&(o=0),o!=h[p]&&(n.push(p),c.node.style[i(p)]=o);if(!n.length){e();return}s(c,h,u,n,e)});return l&&(n("t.animateStyle returns a Promise as of 0.4.0. Transition authors should do t.animateStyle(...).then(callback)"),p.then(l)),p}):u=null,u}(bt,C,B,p,es,os,us),fs=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&!(n in e)&&(e[n]=t[n]);return e},ls=function(e){return function(t,n){return typeof t=="number"?t={duration:t}:typeof t=="string"?t==="slow"?t={duration:600}:t==="fast"?t={duration:200}:t={duration:400}:t||(t={}),e(t,n)}}(fs),cs=function(){function e(e,t){t?e.setAttribute("style",t):(e.getAttribute("style"),e.removeAttribute("style"))}return function(){var n=this,r,i;r=n.node=n.element.node,i=r.getAttribute("style"),n.complete=function(t){!t&&n.isIntro&&e(r,i),r._ractive.transition=null,n._manager.remove(n)};if(!n._fn){n.complete();return}n._fn.apply(n.root,[n].concat(n.params))}}(),hs=function(e,t,n,r,i,s,o){var u,a;return o.push(function(){u=o.Fragment}),a=function(e,t,n){this.init(e,t,n)},a.prototype={init:e,start:s,getStyle:t,setStyle:n,animateStyle:r,processParams:i},a}(Yi,ts,ns,as,ls,cs,s),ps=function(e,t,n,r,i,s,o,u,a,f,l){function p(t){var n,r,i;return(r=t.getAttribute("xmlns"))?n=r:t.name==="svg"?n=e.svg:(i=t.parent)?i.name==="foreignObject"?n=e.html:n=i.node.namespaceURI:n=t.root.el.namespaceURI,n}function d(e){var n,r,i;r=e.select.getAttribute("value");if(r===undefined)return;n=e.getAttribute("value");if(e.select.node.multiple&&t(r)){i=r.length;while(i--)if(n==r[i]){e.node.selected=!0;break}}else e.node.selected=n==r}function v(e){var t,n,r,i,s;t=e.root;do{n=t._liveQueries,r=n.length;while(r--)i=n[r],s=n["_"+i],s._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(s)}while(t=t._parent)}var c,h;return c=function(){var e=this.node,t=this.fragment.toString(!1);if(e.styleSheet)e.styleSheet.cssText=t;else{while(e.hasChildNodes())e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},h=function(){(!this.node.type||this.node.type==="text/javascript")&&n("Script tag was updated. This does not cause the code to be re-evaluated!"),this.node.text=this.fragment.toString(!1)},function(){var t=this,n=this.root,m,g;m=p(this),g=this.node=i(this.name,m),n.constructor.css&&this.parentFragment.getNode()===n.el&&this.node.setAttribute("data-rvcguid",n.constructor._guid),s(this.node,"_ractive",{value:{proxy:this,keypath:a(this.parentFragment),index:this.parentFragment.indexRefs,events:r(null),root:n}}),this.attributes.forEach(function(e){return e.render(g)}),this.fragment&&(this.name==="script"?(this.bubble=h,this.node.text=this.fragment.toString(!1),this.fragment.unrender=o):this.name==="style"?(this.bubble=c,this.bubble(),this.fragment.unrender=o):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=o:this.node.appendChild(this.fragment.render())),this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.render()}),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.name==="img"&&f(this),this.decorator&&this.decorator.fn&&u.scheduleTask(function(){t.decorator.init()});if(n.transitionsEnabled&&this.intro){var y=new l(this,this.intro,!0);u.registerTransition(y),u.scheduleTask(function(){return y.start()})}return this.name==="option"&&d(this),this.node.autofocus&&u.scheduleTask(function(){return t.node.focus()}),v(this),this.node}}(T,u,B,z,N,k,Rt,w,v,Gi,hs),ds=function(e,t){function n(e){var n,r,i;n=e.getAttribute("value");if(n===undefined)return!1;r=e.select.getAttribute("value");if(r==n)return!0;if(e.select.getAttribute("multiple")&&t(r)){i=r.length;while(i--)if(r[i]==n)return!0}}function r(e){var t,n,r,i;t=e.attributes,n=t.type,r=t.value,i=t.name;if(!n||n.value!=="radio"||!r||!i.interpolator)return;if(r.value===i.interpolator.value)return!0}function i(e){var t=e.toString();return t?" "+t:""}return function(){var t,s;return t="<"+(this.template.y?"!DOCTYPE":this.template.e),t+=this.attributes.map(i).join(""),this.name==="option"&&n(this)&&(t+=" selected"),this.name==="input"&&r(this)&&(t+=" checked"),t+=">",this.fragment&&(s=this.name!=="script"&&this.name!=="style",t+=this.fragment.toString(s)),e.test(this.template.e)||(t+="</"+this.template.e+">"),t}}(xt,u),vs=function(e){return function(n){e(n.select.options,n)}}(h),ms=function(e){function t(e){e.unbind()}return function(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.name==="option"&&e(this),this.attributes.forEach(t)}}(vs),gs=function(e,t){function n(e){var t,n,r;r=e.liveQueries.length;while(r--)t=e.liveQueries[r],n=t.selector,t._remove(e.node)}return function(i){var s,o;this.name==="option"?this.detach():i&&e.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1);if(s=this.binding)this.binding.unrender(),this.node._ractive.binding=null,o=this.root._twowayBindings[s.keypath],o.splice(o.indexOf(s),1);this.eventHandlers&&this.eventHandlers.forEach(function(e){return e.unrender()}),this.decorator&&this.decorator.teardown();if(this.root.transitionsEnabled&&this.outro){var u=new t(this,this.outro,!1);e.registerTransition(u),e.scheduleTask(function(){return u.start()})}this.liveQueries&&n(this)}}(w,hs),ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){this.init(e)};return v.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getAttribute:a,init:f,rebind:l,render:c,toString:h,unbind:p,unrender:d},v}(jr,Fr,Ir,qr,Rr,Ur,zr,Wr,Xr,$i,Qi,ps,ds,ms,gs),bs=function(){function n(e,n){var r=t.exec(n)[0];return e===null||r.length<e.length?r:e}var e=/^\s*$/,t=/^\s*/;return function(t){var r,i,s,o;return r=t.split("\n"),i=r[0],i!==undefined&&e.test(i)&&r.shift(),s=r[r.length-1],s!==undefined&&e.test(s)&&r.pop(),o=r.reduce(n,null),o&&(t=r.map(function(e){return e.replace(o,"")}).join("\n")),t}}(),ws=function(e,t,n,r){function i(r,i){var s=t.registries.partials,o=s.findInstance(r,i);if(!o)return;var u=o.partials[i],a;typeof u=="function"&&(a=u.bind(o),a.isOwner=o.partials.hasOwnProperty(i),u=a(o.data,n));if(!u){e.warn({debug:r.debug,message:"noRegistryFunctionReturn",args:{registry:"partial",name:i}});return}if(!n.isParsed(u)){var f=n.parse(u,n.getParseOptions(o));f.p&&e.warn({debug:r.debug,message:"noNestedPartials",args:{rname:i}});var l=a?o:s.findOwner(o,i);l.partials[i]=u=f.t}return a&&(u._fn=a),u.v?u.t:u}return function(s,o){var u;if(u=i(s,o))return u;u=n.fromId(o,{noThrow:!0});if(u){u=r(u);var a=n.parse(u,n.getParseOptions(s));return s.partials[o]=a.t}return e.error({debug:s.debug,message:"noTemplateForPartial",args:{name:o}}),[]}}(Qn,Wt,jt,bs),Es=function(e,t){var n;return t?(n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n"),n):e},Ss=function(e,t,n,r){var i,s;return r.push(function(){s=r.Fragment}),i=function(n){var r=this.parentFragment=n.parentFragment,i;this.type=e.PARTIAL,this.name=n.template.r,this.index=n.index,this.root=r.root;if(!n.template.r)throw new Error("Partials must have a static reference (no expressions). This may change in a future version of Ractive.");i=t(r.root,n.template.r),this.fragment=new s({template:i,root:r.root,owner:this,pElement:r.pElement})},i.prototype={bubble:function(){this.parentFragment.bubble()},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},detach:function(){return this.fragment.detach()},render:function(){return this.fragment.render()},unrender:function(e){this.fragment.unrender(e)},rebind:function(e,t,n,r){return this.fragment.rebind(e,t,n,r)},unbind:function(){this.fragment.unbind()},toString:function(t){var r,i,s,o;return r=this.fragment.toString(t),i=this.parentFragment.items[this.index-1],!i||i.type!==e.TEXT?r:(s=i.template.split("\n").pop(),(o=/^\s+$/.exec(s))?n(r,o[0]):r)},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},getValue:function(){return this.fragment.getValue()}},i}(U,ws,Es,s),xs=function(e,t,n){var r;return n.push(function(){r=n.Ractive}),function i(n,r){var s,o=e.registries.components.findInstance(n,r);if(o){s=o.components[r];if(!s._parent){var u=s.bind(o);u.isOwner=o.components.hasOwnProperty(r),s=u(o.data);if(!s){t.warn({debug:n.debug,message:"noRegistryFunctionReturn",args:{registry:"component",name:r}});return}typeof s=="string"&&(s=i(n,s)),s._fn=u,o.components[r]=s}}return s}}(Wt,Qn,s),Ts=function(){return this.instance.fragment.detach()},Ns=function(t){return this.instance.fragment.find(t)},Cs=function(t,n){return this.instance.fragment.findAll(t,n)},ks=function(t,n){n._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,n)},Ls=function(t){return!t||t===this.name?this.instance:this.instance.fragment?this.instance.fragment.findComponent(t):null},As=function(){return this.parentFragment.findNextNode(this)},Os=function(){return this.rendered?this.instance.fragment.firstNode():null},Ms=function(e,t){var n,r;return t.push(function(){n=t.Fragment}),r=function(e,t,r){this.parentFragment=e.parentFragment,this.component=e,this.key=t,this.fragment=new n({template:r,root:e.root,owner:this}),this.value=this.fragment.getValue()},r.prototype={bubble:function(){this.dirty||(this.dirty=!0,e.addView(this))},update:function(){var t=this.fragment.getValue();this.component.instance.viewmodel.set(this.key,t),e.addViewmodel(this.component.instance.viewmodel),this.value=t,this.dirty=!1},rebind:function(e,t,n,r){this.fragment.rebind(e,t,n,r)},unbind:function(){this.fragment.unbind()}},r}(w,s),_s=function(e,t,n,r){function i(i,s,o,u){var a,f,l,c,h,p;return l=i.root,c=i.parentFragment,typeof o=="string"?(f=t(o),f?f.value:o):o===null?!0:o.length===1&&o[0].t===e.INTERPOLATOR&&o[0].r?c.indexRefs&&c.indexRefs[p=o[0].r]!==undefined?(i.indexRefBindings[p]=s,c.indexRefs[p]):(h=n(l,o[0].r,c)||o[0].r,u.push({childKeypath:s,parentKeypath:h}),l.viewmodel.get(h)):(a=new r(i,s,o),i.complexParameters.push(a),a.value)}return function(e,t,n,r){var s={},o,u;e.complexParameters=[];for(o in n)if(n.hasOwnProperty(o)){u=i(e,o,n[o],r);if(u!==undefined||t[o]===undefined)s[o]=u}return s}}(U,At,y,Ms),Ds=function(e,t,n,r){var i,s,o,u;return s=e.parentFragment,u=e.root,o={content:r||[]},i=new t({append:!0,data:n,partials:o,magic:u.magic||t.defaults.magic,modifyArrays:u.modifyArrays,_parent:u,_component:e,adapt:u.adapt}),i},Ps=function(e){return function(n,r){r.forEach(function(r){var i,s;e(n,n.root,r.parentKeypath,r.childKeypath),i=n.instance.viewmodel.get(r.childKeypath),s=n.root.viewmodel.get(r.parentKeypath),i!==undefined&&s===undefined&&n.root.viewmodel.set(r.parentKeypath,i)})}}(g),Hs=function(e){function t(t,n,r,i){typeof i!="string"&&e.error({debug:n.debug,message:"noComponentEventArguments"}),t.on(r,function(){var e=Array.prototype.slice.call(arguments);e.unshift(i),n.fire.apply(n,e)})}return function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&t(e.instance,e.root,r,n[r])}}(Qn),Bs=function(e){var t,n;t=e.root;while(t)(n=t._liveComponentQueries["_"+e.name])&&n.push(e.instance),t=t._parent},js=function(e,t,n,r,i,s,o){return function(a,f){var l,c,h,p;l=this.parentFragment=a.parentFragment,c=l.root,this.root=c,this.type=e.COMPONENT,this.name=a.template.e,this.index=a.index,this.indexRefBindings={},this.bindings=[];if(!f)throw new Error('Component "'+this.name+'" not found');p=[],h=n(this,f.defaults.data||{},a.template.a,p),r(this,f,h,a.template.f),i(this,p),s(this,a.template.v),(a.template.t1||a.template.t2||a.template.o)&&t('The "intro", "outro" and "decorator" directives have no effect on components'),o(this)}}(U,B,_s,Ds,Ps,Hs,Bs),Fs=function(e,t){return function(r,i,s,o){var u=this.instance,a=u._parent,f,l;this.bindings.forEach(function(e){var n;if(e.root!==a)return;(n=t(e.keypath,s,o))&&e.rebind(n)}),this.complexParameters.forEach(function(e){e.rebind(r,i,s,o)});if(f=this.indexRefBindings[r])e.addViewmodel(u.viewmodel),u.viewmodel.set(f,i);(l=this.root._liveComponentQueries["_"+this.name])&&l._makeDirty()}}(w,Kn),Is=function(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.detach()},qs=function(){return this.instance.fragment.toString()},Rs=function(){function e(e){e.unbind()}function t(e){var t,n;t=e.root;do(n=t._liveComponentQueries["_"+e.name])&&n._remove(e);while(t=t._parent)}return function(){this.complexParameters.forEach(e),this.bindings.forEach(e),t(this),this.instance.fragment.unbind()}}(),Us=function(t){this.instance.fire("teardown"),this.shouldDestroy=t,this.instance.unrender()},zs=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=function(e,t){this.init(e,t)};return p.prototype={detach:e,find:t,findAll:n,findAllComponents:r,findComponent:i,findNextNode:s,firstNode:o,init:u,rebind:a,render:f,toString:l,unbind:c,unrender:h},p}(Ts,Ns,Cs,ks,Ls,As,Os,js,Fs,Is,qs,Rs,Us),Ws=function(e,t){var n=function(t){this.type=e.COMMENT,this.value=t.template.c};return n.prototype={detach:t,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){e&&this.node.parentNode.removeChild(this.node)}},n}(U,zn),Xs=function(e,t,n,r,i,s,o,u,a,f){return function(c){if(typeof c.template=="string")return new t(c);switch(c.template.t){case e.INTERPOLATOR:return new n(c);case e.SECTION:return new r(c);case e.TRIPLE:return new i(c);case e.ELEMENT:var h;if(h=u(c.parentFragment.root,c.template.e))return new a(c,h);return new s(c);case e.PARTIAL:return new o(c);case e.COMMENT:return new f(c);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}}(U,Wn,or,xr,Br,ys,Ss,xs,zs,Ws),Vs=function(e,t,n){return function(i){var s=this,o,u,a;this.owner=i.owner,o=this.parent=this.owner.parentFragment,this.root=i.root,this.pElement=i.pElement,this.context=i.context,this.owner.type===e.SECTION&&(this.index=i.index);if(o){u=o.indexRefs;if(u){this.indexRefs=t(null);for(a in u)this.indexRefs[a]=u[a]}}this.priority=o?o.priority+1:1,i.indexRef&&(this.indexRefs||(this.indexRefs={}),this.indexRefs[i.indexRef]=i.index),typeof i.template=="string"?i.template=[i.template]:i.template||(i.template=[]),this.items=i.template.map(function(e,t){return n({parentFragment:s,pElement:i.pElement,template:e,index:t})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.inited=!0}}(U,z,Xs),$s=function(e){return function(n,r,i,s){e(this,"context",i,s),this.indexRefs&&this.indexRefs[n]!==undefined&&(this.indexRefs[n]=r),this.items.forEach(function(e){e.rebind&&e.rebind(n,r,i,s)})}}(Ki),Js=function(){var t;return this.items.length===1?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t},Ks=function(t){return this.items?this.items.map(function(e){return e.toString(t)}).join(""):""},Qs=function(){function e(e){e.unbind&&e.unbind()}return function(){this.items.forEach(e)}}(),Gs=function(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)})},Ys=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=function(e){this.init(e)};return g.prototype={bubble:e,detach:t,find:n,findAll:r,findAllComponents:i,findComponent:s,findNextNode:o,firstNode:u,getNode:a,getValue:f,init:l,rebind:c,render:h,toString:p,unbind:d,unrender:v},m.Fragment=g,g}(Mn,_n,Dn,Pn,Hn,Bn,jn,Fn,In,qn,Vs,$s,Js,Ks,Qs,Gs,s),Zs=function(e,t,n){var r=["template","partials","components","decorators","events"];return function(s,o){var u,a,f,l,c;typeof s=="function"&&!o?(o=s,s={}):s=s||{};if(typeof s!="object")throw new Error("The reset method takes either no arguments, or an object containing new data");(a=this.viewmodel.wrapped[""])&&a.reset?a.reset(s)===!1&&(this.data=s):this.data=s,f=n.reset(this),l=f.length;while(l--)if(r.indexOf(f[l])>-1){c=!0;break}if(c){var h;this.viewmodel.mark("");if(h=this.component)h.shouldDestroy=!0;this.unrender(),h&&(h.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new t({template:this.template,root:this,owner:this})),u=this.render(this.el,this.anchor)}else u=e.start(this,!0),this.viewmodel.mark(""),e.end();return this.fire("reset",s),o&&u.then(o),u}}(w,Ys,Wt),eo=function(e,t){return function(r){var i,s;e.template.init(null,this,{template:r}),i=this.transitionsEnabled,this.transitionsEnabled=!1;if(s=this.component)s.shouldDestroy=!0;this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new t({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=i}}(Wt,Ys),to=function(e){return e("reverse")}(Cn),no=function(e,t,n,r){var i=/\*/;return function(o,u,a){var f=this,l,c;c=e.start(this,!0);if(t(o)){l=o,a=u;for(o in l)l.hasOwnProperty(o)&&(u=l[o],o=n(o),this.viewmodel.set(o,u))}else o=n(o),i.test(o)?r(this,o).forEach(function(e){f.viewmodel.set(e,u)}):this.viewmodel.set(o,u);return e.end(),a&&c.then(a.bind(this)),c}}(w,a,M,vn),ro=function(e){return e("shift")}(Cn),io=function(e){return e("sort")}(Cn),so=function(e){return e("splice")}(Cn),oo=function(e){return function(n,r){return e(this,n,r===undefined?-1:-r)}}(A),uo=function(e){return function(n){var r;return this.fire("teardown"),this.fragment.unbind(),this.viewmodel.teardown(),r=this.rendered?this.unrender():e.resolve(),n&&r.then(n.bind(this)),r}}(p),ao=function(e){return function(n,r){var i;return typeof n!="string"&&e.errorOnly({debug:this.debug,messsage:"badArguments",arg:{arguments:n}}),i=this.get(n),this.set(n,!i,r)}}(Qn),fo=function(){return this.fragment.toString(!0)},lo=function(e,t,n){return function(){var i=this,s,o;if(!this.rendered)throw new Error("ractive.unrender() was called on a Ractive instance that was not rendered");s=t.start(this,!0),o=!this.component||this.component.shouldDestroy,o=o||this.shouldDestroy,this.constructor.css&&s.then(function(){n.remove(i.constructor)});while(this._animations[0])this._animations[0].stop();return this.fragment.unrender(o),this.rendered=!1,e(this.el.__ractive_instances__,this),t.end(),s}}(h,w,An),co=function(e){return e("unshift")}(Cn),ho=function(e){return function(n,r){var i;return typeof n=="function"?(r=n,n=""):n=n||"",i=e.start(this,!0),this.viewmodel.mark(n),e.end(),this.fire("update",n),r&&i.then(r.bind(this)),i}}(w),po=function(e,t){function n(r,i,s,o){var u,a,f,l,c,h,p=[];u=r._twowayBindings[i];if(u&&(f=u.length))while(f--){l=u[f];if(l.radioName&&!l.element.node.checked)continue;if(l.checkboxName){!p[l.keypath]&&!l.changed()&&(p.push(l.keypath),p[l.keypath]=l);continue}c=l.attribute.value,h=l.getValue();if(e(c,h))continue;t(c,h)||(s[i]=h)}p.length&&p.forEach(function(t){var n,r,i;n=p[t],r=n.attribute.value,i=n.getValue(),e(r,i)||(s[t]=i)});if(!o)return;a=r.viewmodel.depsMap["default"][i];if(a){f=a.length;while(f--)n(r,a[f],s,o)}}return function(t,r){var i;return typeof t!="string"&&(t="",r=!0),n(this,t,i={},r),this.set(i)}}(ki,m),vo=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M){return{add:e,animate:t,detach:n,find:r,findAll:i,findAllComponents:s,findComponent:o,fire:u,get:a,insert:f,merge:l,observe:c,off:h,on:p,pop:d,push:v,render:m,reset:g,resetTemplate:y,reverse:b,set:w,shift:E,sort:S,splice:x,subtract:T,teardown:N,toggle:C,toHTML:k,unrender:L,unshift:A,update:O,updateModel:M}}(O,$t,Jt,Kt,on,un,an,fn,ln,hn,pn,bn,Sn,xn,kn,Ln,On,Zs,eo,to,no,ro,io,so,oo,uo,ao,fo,lo,co,ho,po),mo=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t,n;return t=Math.random()*16|0,n=e=="x"?t:t&3|8,n.toString(16)})},go=function(){var e=0;return function(){return"r-"+e++}}(),yo=function(e,t,n,r){var i=e.root,s=e.keypath;if(n==="sort"||n==="reverse"){i.viewmodel.set(s,t);return}if(!r)return;i.viewmodel.splice(s,r)},bo=function(e,t,n,r,i){var s=[],o=["pop","push","reverse","shift","sort","splice","unshift"],u,a,f;return o.forEach(function(o){var u=function(){var t,s,u,a,f;t=n(this,o,Array.prototype.slice.call(arguments)),s=r(this,t),u=Array.prototype[o].apply(this,arguments),this._ractive.setting=!0,f=this._ractive.wrappers.length;while(f--)a=this._ractive.wrappers[f],e.start(a.root),i(a,this,o,s),e.end();return this._ractive.setting=!1,u};t(s,o,{value:u})}),u={},u.__proto__?(a=function(e){e.__proto__=s},f=function(e){e.__proto__=Array.prototype}):(a=function(e){var n,r;n=o.length;while(n--)r=o[n],t(e,r,{value:s[r],configurable:!0})},f=function(e){var t;t=o.length;while(t--)delete e[o[t]]}),a.unpatch=f,a}(w,k,Tn,Nn,yo),wo=function(e,t,n){var r,i,s;return r={filter:function(e){return t(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new i(e,t,n)}},i=function(t,r,i){this.root=t,this.value=r,this.keypath=i,r._ractive||(e(r,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),n(r)),r._ractive.instances[t._guid]||(r._ractive.instances[t._guid]=0,r._ractive.instances.push(t)),r._ractive.instances[t._guid]+=1,r._ractive.wrappers.push(this)},i.prototype={get:function(){return this.value},teardown:function(){var e,t,r,i,o;e=this.value,t=e._ractive,r=t.wrappers,i=t.instances;if(t.setting)return!1;o=r.indexOf(this);if(o===-1)throw new Error(s);r.splice(o,1);if(!r.length)delete e._ractive,n.unpatch(this.value);else{i[this.root._guid]-=1;if(!i[this.root._guid]){o=i.indexOf(this.root);if(o===-1)throw new Error(s);i.splice(o,1)}}}},s="Something went wrong in a rather interesting way",r}(k,u,bo),Eo=function(e,t){var n,r;return e&&(n={filter:function(n,r,i){return e.filter(n,r,i)&&t.filter(n)},wrap:function(e,t,n){return new r(e,t,n)}},r=function(n,r,i){this.value=r,this.magic=!0,this.magicWrapper=e.wrap(n,r,i),this.arrayWrapper=t.wrap(n,r,i)},r.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}}),n}(S,wo),So=function(e,t,n,r){function s(e,t){var n={},r;if(!t)return e;t+=".";for(r in e)e.hasOwnProperty(r)&&(n[t+r]=e[r]);return n}function o(e){var t;return i[e]||(t=e?e+".":"",i[e]=function(n,r){var i;if(typeof n=="string")return i={},i[t+n]=r,i;if(typeof n=="object")return t?s(n,e):n}),i[e]}var i={};return function(s,u){var a=this.ractive,f,l,c,h;f=a.adapt.length;for(l=0;l<f;l+=1){c=a.adapt[l];if(typeof c=="string"){var p=e.registries.adaptors.find(a,c);if(!p)throw new Error('Missing adaptor "'+c+'"');c=a.adapt[l]=p}if(c.filter(u,s,a))return h=this.wrapped[s]=c.wrap(a,u,s,o(s)),h.value=u,u}return a.magic?r.filter(u,s,a)?this.wrapped[s]=r.wrap(a,u,s):n.filter(u,s,a)&&(this.wrapped[s]=n.wrap(a,u,s)):a.modifyArrays&&t.filter(u,s,a)&&(this.wrapped[s]=t.wrap(a,u,s)),u}}(Wt,wo,S,Eo),xo=function(t){var n=[""],r,i,s,o;r=t.length;while(r--){i=t[r],s=i.split(".");while(s.length>1)s.pop(),o=s.join("."),n.indexOf(o)===-1&&n.push(o)}return n},To=function(){function t(t){var n="",r,i,s,o,u;if(!e[t]){s=[];while(n.length<t)n+=1;r=parseInt(n,2),o=function(e){return e==="1"};for(u=0;u<=r;u+=1){i=u.toString(2);while(i.length<t)i="0"+i;s[u]=Array.prototype.map.call(i,o)}e[t]=s}return e[t]}var e={};return function(n){var r,i,s,o;return r=n.split("."),i=t(r.length),s=function(e,t){return e?"*":r[t]},o=i.map(function(e){return e.map(s).join(".")}),o}}(),No=function(e){function n(t,n,s){var o;i(t,n);if(s)return;o=e(n),o.forEach(function(e){r(t,e,n)})}function r(e,n,s){var o,u,a;o=e.depsMap.patternObservers,u=o[n],u&&u.forEach(function(n){var o=t.exec(n)[0];a=s?s+"."+o:o,i(e,a),r(e,n,a)})}function i(e,t){e.patternObservers.forEach(function(e){e.regex.test(t)&&e.update(t)})}var t=/[^\.]+$/;return n}(To),Co=function(e,t){function r(e){e.update()}function i(e,t,n){var r,i;if(r=o(e,t,n))i=e.get(t),r.forEach(function(e){return e.setValue(i)})}function s(e,t,n){function i(e){e.forEach(s),e.forEach(u)}function s(t){var i=o(e,t,n);i&&r.push({keypath:t,deps:i})}function u(t){var r;(r=e.depsMap[n][t])&&i(r)}function a(t){var n=e.get(t.keypath);t.deps.forEach(function(e){return e.setValue(n)})}var r=[];i(t),r.forEach(a)}function o(e,t,n){var r=e.deps[n];return r?r[t]:null}function u(e,t){t.forEach(function(t){e.indexOf(t)===-1&&e.push(t)})}var n=["observers","default"];return function(){var a=this,f=this,l,c,h=[],p,d,v,m={};if(!this.changes.length)return;d=function(e){var t;(t=f.deps.computed[e])&&u(p,t)},v=function(e){var t;d(e),(t=f.depsMap.computed[e])&&t.forEach(v)};do l=this.changes,u(h,l),this.changes=[],p=[],c=e(l),c.forEach(d),l.forEach(v),p.forEach(r);while(this.changes.length);return c=e(h),this.patternObservers.length&&(c.forEach(function(e){return t(a,e,!0)}),h.forEach(function(e){return t(a,e)})),n.forEach(function(e){if(!a.deps[e])return;c.forEach(function(t){return i(a,t,e)}),s(a,h,e)}),h.forEach(function(e){m[e]=a.get(e)}),this.implicitChanges={},m}}(xo,No),ko=function(){this.capturing=!0,this.captured=[]},Lo=function(t,n){var r,i,s;n||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),(s=this.computations[t])&&s.compute(),this.cache[t]=undefined;if(r=this.cacheMap[t])while(r.length)this.clearCache(r.pop())},Ao={FAILED_LOOKUP:!0},Oo=function(e,t){var n={},r=function(e,r){this.viewmodel=e,this.root=e.ractive,this.ref=r,this.parentFragment=n,e.unresolvedImplicitDependencies[r]=!0,e.unresolvedImplicitDependencies.push(this),t.addUnresolved(this)};return r.prototype={resolve:function(){this.viewmodel.mark(this.ref),this.viewmodel.unresolvedImplicitDependencies[this.ref]=!1,e(this.viewmodel.unresolvedImplicitDependencies,this)},teardown:function(){t.removeUnresolved(this)}},r}(h,w),Mo=function(e,t){function r(t,n){var r,i,s,o,u,a,f;r=n.split("."),i=r.pop(),s=r.join("."),o=t.get(s);if(f=t.wrapped[s])o=f.get();if(o===null||o===undefined)return;return(u=t.cacheMap[s])?u.indexOf(n)===-1&&u.push(n):t.cacheMap[s]=[n],typeof o!="object"||i in o?(a=o[i],t.adapt(n,a,!1),t.cache[n]=a,a):t.cache[n]=e}var n={};return function(s){var o=arguments[1];o===void 0&&(o=n);var u=this.ractive,a=this.cache,f,l,c,h;return a[s]===undefined?((l=this.computations[s])?f=l.value:(c=this.wrapped[s])?f=c.value:s?(h=this.evaluators[s])?f=h.value:f=r(this,s):(this.adapt("",u.data),f=u.data),a[s]=f):f=a[s],o.evaluateWrapped&&(c=this.wrapped[s])&&(f=c.get()),o.capture&&this.capturing&&this.captured.indexOf(s)===-1&&(this.captured.push(s),f===e&&this.unresolvedImplicitDependencies[s]!==!0&&new t(this,s)),f===e?void 0:f}}(Ao,Oo),_o=function(t,n){n&&(this.implicitChanges[t]=!0),this.changes.indexOf(t)===-1&&(this.changes.push(t),this.clearCache(t))},Do=function(e,t){var n,r,i,s;return n={},r=0,i=e.map(function(e,i){var o,u,a;u=r,a=t.length;do{o=t.indexOf(e,u);if(o===-1)return s=!0,-1;u=o+1}while(n[o]&&u<a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o}),i.unchanged=!s,i},Po=function(e,t,n){function i(t){return typeof t.merge=="function"&&(!t.subtype||t.subtype===e.SECTION_EACH)}function s(e){return JSON.stringify(e)}function o(e){if(e===!0)return s;if(typeof e=="string")return r[e]||(r[e]=function(t){return t[e]}),r[e];if(typeof e=="function")return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}var r={};return function(r,s,u,a){var f=this,l,c,h,p,d;this.mark(r);if(a&&a.compare){h=o(a.compare);try{l=s.map(h),c=u.map(h)}catch(v){if(this.debug)throw v;t("Merge operation: comparison failed. Falling back to identity checking"),l=s,c=u}}else l=s,c=u;p=n(l,c),p.forEach(function(e,t){e===-1&&f.mark(r+"."+t)}),this.set(r,u,!0),(d=this.deps["default"][r])&&d.filter(i).forEach(function(e){return e.merge(p)}),s.length!==u.length&&this.mark(r+".length",!0)}}(U,B,Do),Ho=function(){function e(e,t,n){var r,i,s,o;r=t.split(".");while(r.length)r.pop(),i=r.join("."),s=e.depsMap[n]||(e.depsMap[n]={}),o=s[i]||(s[i]=[]),o[t]===undefined&&(o[t]=0,o.push(t)),o[t]+=1,t=i}return function(n,r){var i=arguments[2];i===void 0&&(i="default");var s,o,u;if(r.isStatic)return;s=this.deps[i]||(this.deps[i]={}),o=s[n]||(s[n]=[]),o.push(r);if(!n)return;if(u=this.evaluators[n])u.dependants||u.wake(),u.dependants+=1;e(this,n,i)}}(),Bo=function(){return this.capturing=!1,this.captured},jo=function(e,t){return function(r,i,s){var o,u,a,f,l,c,h,p;if(e(this.cache[r],i))return;l=this.computations[r],c=this.wrapped[r],h=this.evaluators[r],l&&!l.setting&&l.set(i),c&&c.reset&&(p=c.reset(i)!==!1,p&&(i=c.get())),h&&(h.value=i),!l&&!h&&!p&&(o=r.split("."),u=o.pop(),a=o.join("."),c=this.wrapped[a],c&&c.set?c.set(u,i):(f=c?c.get():this.get(a),f||(f=t(u),this.set(a,f,!0)),f[u]=i)),s?this.clearCache(r):this.mark(r)}}(m,E),Fo=function(e){function t(t){return t.type===e.SECTION&&(!t.subtype||t.subtype===e.SECTION_EACH)&&t.rendered}return function(n,r){var i=this,s,o;for(s=r.rangeStart;s<r.rangeEnd;s+=1)i.mark(n+"."+s);r.balance&&i.mark(n+".length",!0),(o=i.deps["default"][n])&&o.filter(t).forEach(function(e){return e.splice(r)})}}(U),Io=function(){var t=this,n;Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});while(n=this.unresolvedImplicitDependencies.pop())n.teardown()},qo=function(){function e(e,t,n){var r,i,s,o;r=t.split(".");while(r.length)r.pop(),i=r.join("."),s=e.depsMap[n],o=s[i],o[t]-=1,o[t]||(o.splice(o.indexOf(t),1),o[t]=undefined),t=i}return function(n,r){var i=arguments[2];i===void 0&&(i="default");var s,o,u;if(r.isStatic)return;s=this.deps[i][n],o=s.indexOf(r);if(o===-1)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");s.splice(o,1);if(!n)return;if(u=this.evaluators[n])u.dependants-=1,u.dependants||u.sleep();e(this,n,i)}}(),Ro=function(){function t(t){var n="var __ractive=this;return("+t.replace(e,function(e,t){return'__ractive.get("'+t+'")'})+")";return new Function(n)}var e=/\$\{([^\}]+)\}/g;return function(e){return typeof e=="function"?{get:e}:typeof e=="string"?{get:t(e)}:(typeof e=="object"&&typeof e.get=="string"&&(e={get:t(e.get),set:e.set}),e)}}(),Uo=function(e,t,n){var r=function(e,t,n){this.ractive=e,this.viewmodel=e.viewmodel,this.key=t,this.getter=n.get,this.setter=n.set,this.dependencies=[],this.update()};return r.prototype={set:function(e){if(this.setting){this.value=e;return}if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter.call(this.ractive,e)},compute:function(){var t,r,i;t=this.ractive,t.viewmodel.capture();try{this.value=this.getter.call(t)}catch(s){e.warn({debug:t.debug,message:"failedComputation",args:{key:this.key,err:s.message||s}}),r=!0}return i=t.viewmodel.release(),n(this,this.dependencies,i),r?!1:!0},update:function(){var e=this.value;this.compute()&&!t(this.value,e)&&this.ractive.viewmodel.mark(this.key)}},r}(Qn,m,Gn),zo=function(e,t){return function(r,i){var s,o;for(s in i)o=e(i[s]),r.viewmodel.computations[s]=new t(r,s,o)}}(Ro,Uo),Wo=function(){function t(e){return typeof e=="string"&&(e=[e]),e}var e={lookup:function(e,t){var n,r=e.adapt;if(!r||!r.length)return r;if(t&&Object.keys(t).length&&(n=r.length))while(n--){var i=r[n];typeof i=="string"&&(r[n]=t[i]||i)}return r},combine:function(e,n){return e=t(e),n=t(n),!e||!e.length?n:!n||!n.length?e.slice():(e.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),n)}};return e}(),Xo=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m;try{Object.defineProperty({},"test",{value:0})}catch(g){m=!0}var y=function(t){this.ractive=t,y.extend(t.constructor,t),this.cache={},this.cacheMap=e(null),this.deps={computed:{},"default":{}},this.depsMap={computed:{},"default":{}},this.patternObservers=[],this.wrapped=e(null),this.evaluators=e(null),this.computations=e(null),this.captured=null,this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={}};return y.extend=function(e,t){if(t.magic&&m)throw new Error("Getters and setters (magic mode) are not supported in this browser");t.adapt=v.combine(e.prototype.adapt,t.adapt)||[],t.adapt=v.lookup(t,t.adaptors)},y.prototype={adapt:t,applyChanges:n,capture:r,clearCache:i,get:s,mark:o,merge:u,register:a,release:f,set:l,splice:c,teardown:h,unregister:p,compute:function(){d(this.ractive,this.ractive.computed)}},y}(z,So,Co,ko,Lo,Mo,_o,Po,Ho,Bo,jo,Fo,Io,qo,zo,Wo),Vo=function(e,t,n,r,i,s){function o(e){var t;if(t=n(e.el)){var r=e.transitionsEnabled;e.noIntro&&(e.transitionsEnabled=!1);if(t&&!e.append){if(t.__ractive_instances__)try{t.__ractive_instances__.splice(0,t.__ractive_instances__.length).forEach(function(e){return e.teardown()})}catch(i){}t.innerHTML=""}e.render(t,e.append),e.transitionsEnabled=r}}function u(e,n){e._guid=r(),e._subs=t(null),e._config={},e._twowayBindings=t(null),e._animations=[],e.nodes={},e._liveQueries=[],e._liveComponentQueries=[],n._parent&&n._component&&(e._parent=n._parent,e.component=n._component,n._component.instance=e)}return function(n){var r=arguments[1];r===void 0&&(r={}),u(n,r),e.init(n.constructor,n,r),n.viewmodel=new i(n),n.viewmodel.compute(),n.template&&(n.fragment=new s({template:n.template,root:n,owner:n})),n.viewmodel.applyChanges(),o(n)}}(Wt,z,cn,go,Xo,Ys),$o=function(e){return function(n,r,i){n.beforeInit&&n.beforeInit(i),e(n,i)}}(Vo),Jo=function(e,t,n,r){function a(t,n,r){for(var i in r)if(!(i in s)&&r.hasOwnProperty(i)){var o=r[i];typeof o=="function"&&(o=e(t,i,o)),n[i]=o}}function f(e){if(e.prototype instanceof i){var n={};while(e)u.forEach(function(t){l(t.useDefaults?e.prototype:e,n,t.name)}),Object.keys(e.prototype).forEach(function(r){if(r==="computed")return;var i=e.prototype[r];if(r in n){if(typeof n[r]=="function"&&typeof i=="function"&&n[r]._method){var s,o=i._method;o&&(i=i._method),s=t(n[r]._method,i),o&&(s._method=s),n[r]=s}}else n[r]=i._method?i._method:i}),e._parent!==i?e=e._parent:e=!1;return n}return e}function l(e,t,n){var r,i=Object.keys(e[n]);if(!i.length)return;(r=t[n])||(r=t[n]={}),i.filter(function(e){return!(e in r)}).forEach(function(t){return r[t]=e[n][t]})}var i,s={_parent:!0,_component:!0},o={toPrototype:a,toOptions:f},u=n.registries;return n.keys.forEach(function(e){return s[e]=!0}),r.push(function(){i=r.Ractive}),o}(Ut,I,Wt,s),Ko=function(e,t,n,r,i,s,o){return function u(){var a=arguments[0];a===void 0&&(a={});var f=this,l,c,h;return a=o.toOptions(a),l=function(e){i(this,l,e)},c=e(f.prototype),c.constructor=l,h={_guid:{value:n()},defaults:{value:c},extend:{value:u,writable:!0,configurable:!0},_parent:{value:f}},t(l,h),r.extend(f,c,a),s.extend(f,c),o.toPrototype(f.prototype,c,a),l.prototype=c,l}}(z,L,mo,Wt,$o,Xo,Jo),Qo=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d;p=function(e){c(this,e)},d={extend:{value:f},parse:{value:l},Promise:{value:u},svg:{value:r},magic:{value:i},VERSION:{value:"0.5.5"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:t},events:{writable:!0,value:{}},interpolators:{writable:!0,value:n},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},s(p,d),p.prototype=a(o,e),p.prototype.constructor=p,p.defaults=p.prototype,h.Ractive=p;while(h.length)h.pop()();var v="function";if(typeof Date.now!==v||typeof String.prototype.trim!==v||typeof Object.keys!==v||typeof Array.prototype.indexOf!==v||typeof Array.prototype.forEach!==v||typeof Array.prototype.map!==v||typeof Array.prototype.filter!==v||typeof window!="undefined"&&typeof window.addEventListener!==v)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return p}(r,i,l,c,x,L,vo,p,gi,Ko,Pt,Vo,s);typeof module!="undefined"&&module.exports?module.exports=Qo:typeof n=="function"&&n.amd&&n("ractive",[],function(){return Qo}),e.Ractive=Qo,Qo.noConflict=function(){return e.Ractive=t,Qo}}(typeof window!="undefined"?window:this),n("rv",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),n("rv!pages/home/template",[],function(){return{v:1,t:[{t:7,e:"div",a:{style:"text-align: center"},f:[{t:7,e:"br"}," ",{t:7,e:"br"}," ",{t:7,e:"h1",f:["Welcome to the homepage"]}," ",{t:7,e:"br"}," ",{t:7,e:"br"}," ",{t:7,e:"br"}," ",{t:7,e:"div",f:["The current time is ",{t:2,x:{r:["format","time"],s:"${0}(${1})"}}]}]}]}}),n("pages/home/main",["ractivejs","rv!./template"],function(e,t){return function(){var n=new e({el:"#body",template:t,data:{time:new Date,format:function(e){return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}});setInterval(function(){n.set("time",new Date)},1e3)}}),n("router",["page","pages/home/main"],function(e,t){function n(e,t){document.getElementById("body"),t()}e(n),e("/*",t),e()}),t(["router"])})();